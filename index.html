<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />
  
  <title>Acceso UCI</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <style>
    body { background-color: #f0f4f8; background-image: radial-gradient(#cbd5e1 1px, transparent 1px); background-size: 24px 24px; font-family: system-ui, sans-serif; }
    .glass-card { background: linear-gradient(145deg, #ffffff, #f8fafc); }
    .modal-backdrop { background-color: rgba(15, 23, 42, 0.8); backdrop-filter: blur(8px); }
    .login-glass { background: rgba(255, 255, 255, 0.7); backdrop-filter: blur(20px); border: 1px solid rgba(255, 255, 255, 0.5); }
    ::-webkit-scrollbar { width: 8px; } ::-webkit-scrollbar-thumb { background: #94a3b8; border-radius: 4px; }
  </style>
  <script> tailwind.config = { theme: { extend: { colors: { lime: { 100: '#ecfccb', 600: '#65a30d' } } } } } </script>
</head>
<body>
  <div id="root"></div>
  <script type="text/babel">
    const { useState, useEffect } = React;
    const PATIENTS = [
  {
    "id": "rea-1",
    "numero_cama": "1",
    "unidad": "REA",
    "estado": "Crítico",
    "edad": "77 años",
    "sexo": "M",
    "dias_estancia": "14º día de ingreso",
    "antecedentes": "Mujer de 77 años con enfermedad coronaria de 3 vasos, doble bypass previo, FEVI moderadamente deprimida y acinesia múltiple. Riesgo de hemólisis por déficit de G6PDH.",
    "plan": "Control hemodinámico con BIAC, vigilar hemólisis, reponer electrolitos (P, K), administrar diuréticos (furosemida para balances negativos), pautar budesonida + atrovent, iniciar linezolid, informar a familia de pronóstico crítico.",
    "sistemas": {
      "neuro": "Sedada con midazolam a 11 mg/h + morfina a 0.5 ml/h. BIS en torno 45-55. Pupilas IC, lentas. Precisa algún bolo puntual de cisatracurio para mejor adaptación al repirador.",
      "hemodinamica": "IAMSEST. Shock cardiogénico postinfarto. BIAC. NA en lento descenso para mantener TAM > 60 mmHg (13 ml/h). Episodios de FA con RVR, CVE, amiodarona a 900 mg/d. TA 125/38 mmHg, FC RS 75-85 lpm con rachas de FA autolimitadas. MCP VVI a 60 lpm. Balón de contrapulsación intraaórtico funcionando en modo 1:1, disparado por ECG. Soplo pansistólico mecánico. Troponinas 1250, láctico normalizado 1.3. Eco: FEVI bp 40%, IM moderada-severa.",
      "hemostasia_coagulacion": "Hb 9.9 (estable), HCT 31.9%. Plaquetas 312.000. IQ: 65%, INR 1.33. Tto: Inyesprin 450 mg/d y clopidogrel 75mg/d. Tromboprofilaxis con enoxaparina 40mg c/24h. Vigilar aparición de hemólisis por déficit de G6PD.",
      "respiratorio": "IOT tubo 7.5. Aspiración subglótica con salida hemática. VMI AC PRVC: FiO2 45% VT 425 FR 14, PEEP 5. PPico 20-35. Gasometría arterial: pH: 7.36, pCO2 42, pO2 109. AP: roncus dispersos. Rx tórax: mayor derrame pleural derecho. FBC: grandes coágulos en LID (extraídos), mucosidad espesa, purulenta (mandado a cultivar). Pauto budesonida + atrovent.",
      "renal": "Diuresis forzadas con Furosemida 20 mg/8h con buena respuesta (1800 ml, balance equilibrado). Edemas en zonas declives. Función renal conservada. U 29, Cr 0.43. Ionograma: Na 136, hipoK 3.0, Cl 105, Ca corregido 9.4, hipoP 1.5, Mg 1.81. Reponer P y K. Mantener furosemida para balances ligeramente negativos.",
      "digestivo": "Abdomen blando y depresible. No ausculto peristaltismo. Se ausculta el click del BCPIAo. SNG con débito escaso. Bilirrubina T 0.97, GOT 40, GPT 55, GGT 47, FA 98. Nutrición parenteral desde ayer.",
      "infeccioso": "Afebril. Leucocitos 14.000, PCR 28. En tto con tazocel desde ayer. Cultivos BAS: cocos gram +. Vías: VYD (swan) 14d, Arteria fem der 14d, VYI 4d. Inicio linezolid iv."
    }
  },
  {
    "id": "rea-3",
    "numero_cama": "3",
    "unidad": "REA",
    "estado": "Crítico",
    "edad": "59 años",
    "sexo": "H",
    "dias_estancia": "9º día postoperatorio",
    "antecedentes": "Varón de 59 años con múltiples antecedentes: shock anafiláctico a betalactámicos, HTA, DLP, TVP recurrente por déficit de proteína C. VIH C3 con afectación ocular (coriorretinitis por CMV y Toxoplasma), condilomas anales y carcinoma epidermoide perianal (T3 alto riesgo). DX: Perforación intestinal. IQx: Laparoscopia exploradora + colostomía en asa, reintervención urgente por perforación intestinal e isquemia de colon.",
    "plan": "Aumentar dosis de clexane 60 mg/12 horas. Realizar angio-TC torácico. Iniciar destete progresivo. Reponer fosfato. Usar suero glucosado para fluidoterapia de medicación/aportes. Mantener balances neutros. Vigilar enzimas de colestasis. Controlar nuevos niveles de vancomicina (martes 10/02/26).",
    "sistemas": {
      "neuro": "Sedoanalgesiado con perfusión de propofol y morfina (RASS -3/-4). BIS aproximados de 60. Pupilas anisocóricas (I>D), reactivas (AP: coriorretinitis por CMV y Toxoplasma). No focalidades neurológicas aparentes.",
      "hemodinamica": "TA 137/59 sin aminas. Reiniciada perfusión de amiodarona ayer, en RS a 90lpm. AC: rítmico, pulsos periféricos presentes y simétricos. Eco 09/02: buena contractilidad de visu, cava 1.6 cm colapsable. Hb 9.7 (estable), lactato normalizado 1.7.",
      "hemostasia_coagulacion": "Plaquetopenia (mínimo 14.000, actual 116.000) con 4 pool de plaquetas transfundidos. Coagulación alterada levemente (IQ 66%, APTTr 1.01, INR 1.33). No sangrados activos. Tromboprofilaxis con medias de compresión intermitente + clexane 60 mg/24 horas (plan: aumentar a 60 mg/12 horas).",
      "respiratorio": "Intento de extubación hace 72 h que requirió reIOT precoz por bajo nivel de conciencia. IOT en SIMV con FiO2 0.7 VT 500, FR 16, PEEP 10 y PS 15. Escasas secreciones mucosas. Pigtail derecho retirado. Fibroscopia: muy poco moco y muy distal. Angio-TC torácico: opacidades de espacio aéreo, pequeño derrame pleural izquierdo con atelectasia pasiva. GSA: pH 7.35; pCO2 44; pO2: 115. AP: MVC con roncus aislados. Rx tórax: aumento de densidad en base izquierda.",
      "renal": "Portador de sondaje vesical. Buenas diuresis con función renal normal (furosemida ya no necesaria). HiperNa 150 (antes hipoK/hiperNa), pautada agua libre por SNG. Urea 111; Cr 0.58, FG >90, K 4.1; P 2.2, Mg 2.03. Reponer fosfato. Buscar balances neutros.",
      "digestivo": "SNG con un débito de 50 (seroso). NPT ajustada. Glucemias bien controladas. Ileostomía mínimamente productiva (60 cc). Abdomen blando y depresible. Pequeño hematoma en hipogastrio. Herida quirúrgica e ileostomía con buen aspecto. Drenaje MP lento. Glucosa 162, Proteínas 5.2, bilirrubina 0,59, GOT 30, GPT 12, GGT: 320, FA 321 (aumento progresivo). Omeprazol.",
      "infeccioso": "Afebril. ABT: Aztreonam + Metronidazol + Vancomicina + Anidulafungina por shock séptico. Finalizada hidrocortisona. Leucocitosis 23.000, PCR 14. Cultivos: Líquido abdominal (30/01): E. coli R, B. stercoris S, C. innocuum, C. tropicalis S. Líquido abdominal (02/02): E. faecium S, E. coli R, C. tropicalis S. Vías: Yugular dcha 11 d, Radial dcha 9 d, S. vesical 11 d. No linezolid por plaquetopenia."
    }
  },
  {
    "id": "rea-4",
    "numero_cama": "4",
    "unidad": "REA",
    "estado": "Crítico",
    "edad": "40 años",
    "sexo": "H",
    "dias_estancia": "19º día en REA/UCCQ",
    "antecedentes": "Varón de 40 años con antecedentes de obesidad, SAOS e hiperuricemia. Ingresó por TCE grave con posterior cerebritis, craniectomía descompresiva y AKI-3. DX asociado: cerebritis tras TCE con mala evolución.",
    "plan": "Intentar reducir perfusión continua de propofol si es posible. Realizar nuevos niveles de Keppra (viernes 13/02). Continuar con O2 en T. Mantener misma pauta de agua libre. Vigilancia de colestasis disociada. Ajustar antibioterapia a función renal: Ceftarolina 600/12h y Ceftazidima-Avibactam 2g/8h.",
    "sistemas": {
      "neuro": "Perfusión continua de propofol 1% a 10 ml/h, con mejor agitación que días previos. No ha vuelto a presentar episodios epileptiformes desde el 31/01. PICN. Moviliza las 4 extremidades. Apertura ocular espontánea. No conecta a la llamada. No obedece órdenes. Tto: clonidina, haloperidol, quetiapina, clonazepam, propranolol y zuclopentixol IM (última el 07/02). Antiepiléptico: keppra y lacosamida.",
      "hemodinamica": "Hemodinámicamente estable sin requerimiento de aminas para mantener TAM >70mmHg. RS en monitor con FC en torno a 70-80lpm. Lac: 1.6.",
      "hemostasia_coagulacion": "No signos ni síntomas sugestivos de sangrado. Tromboprofilaxis con clexane 80mg/24h. Coagulación en rango. Plaquetas: 396.000. Hb: 8.7 (estable).",
      "respiratorio": "Portador de TQT shiley 8.5. Desde el 05/02 en O2 en T bien tolerada. Eupneico, con buena mecánica ventilatoria y manteniendo Sat02 100%. Moviliza secreciones (abundantes). En tto con nebulizaciones (ipratropio y budesonida). AP: MVC, sibilantes espiratorios. GSA: pH: 7,34. p02: 131. pCO2: 45. Rx tórax: persiste congestión hiliar. BAS 29/1/26: Candida tropicalis + Enterobacter hormaechei (carbapenem resistente).",
      "renal": "Diuresis conservada a través de sondaje urinario (2950ml) sin apoyo diurético. BH -592 en 24h. Función renal alterada (AKI-3) en resolución con FG 59, Cr 1.47. Último ciclo de diálisis el 24/01. Ionograma en rango. No presencia de edemas.",
      "digestivo": "Portador de SNG en tratamiento con NE (Low protein) a 60ml/h con buena tolerancia y sin retenciones. Glucemias bien controladas. Realizando deposiciones con macrogol. GOT y GPT en rango. Continua con descenso de enzimas de colestasis GGT 566, FA 202. Abdomen blando y depresible, peristaltismo conservado.",
      "infeccioso": "Aislamiento de contacto. Afebril en tratamiento antibiótico con Ceftarolina 300mg/12h + Ceftazidima-Avibactam 1250mg/8h y Fluconazol 400mg/24h. No aspecto de sepsis ni aumento de parámetros infecciosos. Herida qx: no se observa material purulento. Cultivos: SAMS, S. epidermidis, Proteus mirabilis BLEE, Enterobacter hormaechei (carbapenem resistente) y Candida tropicalis. Frotis faríngeo 04/02/26: Enterobacter hormaechei (carbapenem resistente)."
    }
  },
  {
    "id": "rea-6",
    "numero_cama": "6",
    "unidad": "REA",
    "estado": "Estable",
    "edad": "69 años",
    "sexo": "H",
    "dias_estancia": "Primer día de estancia",
    "antecedentes": "Varón de 69 años, ex-fumador, con HTA, DLP, DM2 y meralgia parestésica. DX: Aneurisma de aorta ascendente y arco aórtico severo (Dmax 7.6 x 7.6cm). IQx: Tubo supracoronario.",
    "plan": "Control postoperatorio inmediato de cirugía cardíaca mayor, manteniendo sedación, ventilación mecánica y soporte hemodinámico (dopamina a dosis bajas).",
    "sistemas": {
      "neuro": "Traslado a UCIQ bajo sedación con IOT.",
      "hemodinamica": "Llega a quirófano estable (TA 115/65mmHg, FC 65 lpm en RS). Inducción con fentanilo, etomidato, rocuronio. Monitorización: PAI, BIS, INVOS, Swan-Ganz. Heparinización 250mg. Entrada en CEC sin incidencias. Salida de CEC con apoyo de dopamina (no > 3 mcg/kg/min) y MCP en VVI a 70 lpm, luego RS 70-75 lpm. Transfusiones: 2 u de CH+ 2 PF + 2 pool de plaquetas y 2 g de fibrinógeno. Necesidad de dopamina a dosis bajas.",
      "hemostasia_coagulacion": "Intraoperatorio se trasfundieron: 2 u de CH+ 2 PF + 2 pool de plaquetas y 2 g de fibrinógeno.",
      "respiratorio": "Intubación orotraqueal (TET nº 7). Ventilación Han I. Traslado a UCIQ bajo sedación con IOT.",
      "renal": "Monitorización de diuresis horaria.",
      "digestivo": "No información específica en la nota.",
      "infeccioso": "No información específica en la nota."
    }
  },
  {
    "id": "rea-7",
    "numero_cama": "7",
    "unidad": "REA",
    "estado": "Crítico",
    "edad": "77 años",
    "sexo": "H",
    "dias_estancia": "Primer día de evolución",
    "antecedentes": "Varón de 77 años, ex-fumador, con DM II, DLP, HBP, Gota, EPOC leve y anemia ferropénica. Presenta GIST estadio IV (metástasis hepáticas y peritoneales) diagnosticado en diciembre/25 y en tratamiento con imatinib. Ingresa por shock séptico de origen abdominal secundario a perforación de la neoplasia.",
    "plan": "Control del shock séptico, soporte hemodinámico intensivo con noradrenalina, corrección de acidosis metabólica, manejo de anemización y oligoanuria. Inicio de antibioterapia de amplio espectro (meropenem + linezolid). Vigilancia post-quirúrgica de sigmoidectomía y resección de íleon.",
    "sistemas": {
      "neuro": "Llega a quirófano consciente y orientado. Post-cirugía IOT y sedado.",
      "hemodinamica": "Al quirófano llega con hipotensión (TA 96/40mmHg), taquicardia (FC 95lpm) y mala perfusión periférica. Se inició precozmente noradrenalina. Post-cirugía: inestabilidad hemodinámica con NA a 18ml/h para TAM 65mmHg, ligera taquicardia 110lpm, mala perfusión periférica con livideces distales.",
      "hemostasia_coagulacion": "Anemización Hb 7.7gr/dl. Transfundidos 2 CH. Administrado 1gr de amchafibrin.",
      "respiratorio": "Sensación disneica 48h antes del ingreso. Saturación periférica no capta por mala perfusión periférica. IOT de secuencia rápida. Traslado IOT a reanimación.",
      "renal": "Oligoanuria durante toda la cirugía. Sondaje vesical.",
      "digestivo": "Cuadro de dolor abdominal generalizado, distensión abdominal. Laparotomía: abundante líquido ascítico maloliente (~2L). Sigmoidectomía y resección de segmento de íleon con anastomosis L-L manual y colostomía en FII. Drenaje Blake en espacio de Douglas.",
      "infeccioso": "Ingresa por shock séptico de origen abdominal. ABT: tazocel (intra-op), ampliado en reanimación a meropenem + linezolid. Se cursaron muestras para cultivo."
    }
  },
  {
    "id": "rea-9",
    "numero_cama": "9",
    "unidad": "REA",
    "estado": "Crítico",
    "edad": "67 años",
    "sexo": "H",
    "dias_estancia": "34º día de ingreso",
    "antecedentes": "Varón de 67 años con RAM a petidina, fumador, HTA, DLP, AdenoCa Pulmón (bilobectomía 2010), AAA infrarrenal (EVAR 2022 y reintervención 2025 por migración), ERC en prediálisis y estenosis renal severa bilateral. DX: Rotura de saco aneurismático en paciente ya reintervenido de EVAR. IQx: EVAR sobre EVAR.",
    "plan": "Ajustar sedación/agitación (cambiar olanzapina por quetiapina nocturna). Alternar periodos con válvula fonatoria durante el día. Contactar con párroco del hospital. Mantener y alternar O2T y PS. No progresar la deglución más allá de sorbo de agua. Retirar anidulafungina, Ceftolozano/Tazobactam y metronidazol (sospecha de colonización, considerar cefiderocol si empeora). Mantener dieta oral sin progresar.",
    "sistemas": {
      "neuro": "Consciente y orientado, colaborador. Por las noches precisa de propofol por agitación y reconexión a PS. Días previos requirió reiniciar dexdor.",
      "hemodinamica": "Estable con tendencia a la HTA. TA 140/70 mmHg, RS 75 lpm. Tto: Bisoprolol 5mg/24h. Doxazosina y amlodipino SP. Buen relleno capilar, MID sin cambios. Láctico 1.7.",
      "hemostasia_coagulacion": "24h desde última transfusión, Hb estable en 8.4. Plaquetas y coagulación convencional ok. AAS 100 mg/d vo. Anticoagulación a dosis profilácticas con Tinzaparina 4.500U/24h.",
      "respiratorio": "TQT percutánea. Alterna O2T 5L con PS 10/6 durante la noche, coincidiendo con fatiga y agitación. Sentado en SARA a diario. AP: MVC con disminución MV base derecha, roncus dispersos. GSA (PS): pH 7.42, pCO2 39, pO2 114. Rx TORAX: similar a días previos. Destete dificultoso condicionado por distensión abdominal con PIAS altas.",
      "renal": "72h desde última HD convencional, sin criterios metabólicos ni de volumen (Diuresis 4100 ml con furosemida, balance -3114 ml). Peso 88 kg. Seguimiento con Nefrología.",
      "digestivo": "Abdomen muy distendido de forma habitual, continua haciendo deposiciones. Desde hace 5 días empieza a tolerar cremas y yogures, pero está poco apetente. NPT. No porta SNG. Enzimas hepáticas normales. TAC 22/1: Moderada distensión de gran parte del intestino. Colonoscopia 29/01: Compatible con signos de colitis isquémica.",
      "infeccioso": "En tratamiento con Ceftolozano/Tazobactam y Anidulafungina. Afebril. Marcadores infecciosos en descenso PCR 9.5, L 16.5. Cultivos: BAS 15/1: Pseudomona Aureginosa CR y C. glabrata. Sheldon y Hemocultivo 24/01: Staphylococcus epidermidis R line. Esputo 04/02: P. aeruginosa R a CFTZ-TAZ y CAZ-AVI. HC x2 31/01: 1/2 en CVC: S.epidermidis. Vigilancia 03/02 P. aeruginosa en FF."
    }
  },
  {
    "id": "rea-10",
    "numero_cama": "10",
    "unidad": "REA",
    "estado": "Crítico",
    "edad": "61 años",
    "sexo": "M",
    "dias_estancia": "4º día de ingreso",
    "antecedentes": "Mujer de 61 años con ESPONDILOLISTESIS DE ALTO GRADO L5-S1 CON PSEUDOARTROSIS Y ESCOLIOSIS DE LA CHARNELA TORACOLUMBAR. IQx: AMPLIACIÓN FIJACIÓN PROXIMAL HASTA T9 Y FIJACIÓN DISTAL A ILÍACOS. SISTEMA NEO MEDICAL.",
    "plan": "Pautar Metamizol 2g/8h si precisa. Mantener perfusión continua de morfina 1 mg/h. Vigilancia estrecha de herida quirúrgica por colección/seroma y posible fuga de LCR (vigilar cefalea). Realizar GA de control. Mantener dosis de cefazolina por presencia de colección. Progresar dieta. Revisión de herida quirúrgica, vigilar fiebre, vigilancia de la colección. Pendiente de control de evolución neurológica. Destete de aminas. Tratamiento de la anemia.",
    "sistemas": {
      "neuro": "Consciente, orientada y colaboradora, sin focalidad neurológica (GCS: 15). Perfusión continua de morfina a 1mg/H desde ayer, a pesar de ello refiere dolor. Drenajes tipo Redón con débito serohemático (350 cc ayer). AngioTAC 06/02: Colección postquirúrgica retroespinal (18,6 x 5,8 x 3,8 cm), sin identificar focos de sangrado activo. Sospecha fuga de LCR.",
      "hemodinamica": "Necesidad de NA a 2 ml/h. TA 114/79 (87) mmHg. FC: 77 /min, en RS. Lact:1.1.",
      "hemostasia_coagulacion": "Coagulación normal, PLAQ: 258.000, Hgb: 9.7 g/dl (estable), HCT: 29.5 %. Profilaxis antrombótica con medias de compresión neumática. Vigilancia de signos de sangrado.",
      "respiratorio": "Eupneica con gafas nasales 2L O2. GSA: pH: 7.36 pCO2: 54 mmHg, pO2: 52 mmHg, HCO3: 30.5 mmol/l. AP: murmullo vesicular conservado, sin estertores patológicos. Rx Tórax 05/02: sin alteraciones significativas.",
      "renal": "Función renal sin alteraciones con iones normales. Diuresis: 4045 cc ayer, Balance: -2356 cc. Diuresis espontáneas.",
      "digestivo": "Abdomen blando y depresible, no doloroso, peristaltismo disminuido. Se inicia la tolerancia a agua con buen control posterior. Glucemia alrededor de 134 mg/dl, sin necesidad de insulina. Proteínas totales: 5.4 g/dl.",
      "infeccioso": "Afebril. Leucocitos: 7.720, PCR: 8.4. En tratamiento con cefazolina. El aspecto del líquido que drena de la herida quirúrgica es más seroso que serohemático. Se realiza limpieza y vigilancia 6-8 veces al día."
    }
  },
  {
    "id": "rea-11",
    "numero_cama": "11",
    "unidad": "REA",
    "estado": "Estable",
    "edad": "75 años",
    "sexo": "M",
    "dias_estancia": "Primer día de estancia",
    "antecedentes": "Mujer de 75 años, fumadora activa. Cardiopatía isquémica crónica con revascularización percutánea (stent en DA media). DX: Insuficiencia aórtica moderada, IM moderada funcional y aneurisma de aorta ascendente de 60mm. IQx: Sustitución valvular aórtica biológica + tubo de aorta ascendente supracoronario.",
    "plan": "Control postoperatorio inmediato de cirugía cardíaca mayor, incluyendo manejo de IOT y sedación.",
    "sistemas": {
      "neuro": "Llega a quirófano consciente y orientada. Traslado a la Unidad de Reanimación en situación de IOT.",
      "hemodinamica": "Al ingreso en quirófano: TA:170/55 mmHg. FC: 55 lpm. SpO2: 89%. Catéteres arteriales: ARI + AFD. Catéter venoso central: VCYID con eco. Monitorización hemodinámica: PAI, diuresis horaria, PVC, ETE. Heparinización 150 mg. Entrada en CEC sin incidencias. Salida de CEC con aminas (no especificadas).",
      "hemostasia_coagulacion": "Administración de Protamina (cantidad no especificada) y hemoderivados (no especificados).",
      "respiratorio": "Preoxigenación. Intubación orotraqueal (TET: 7 mm). Mantenimiento con O2/Aire, sevofluorano, rocuronio y remifenta en PC. Traslado a la Unidad de Reanimación en situación de IOT.",
      "renal": "Diuresis horaria monitorizada.",
      "digestivo": "No información específica en la nota.",
      "infeccioso": "No información específica en la nota."
    }
  }
];
    const PASSWORD_CORRECTA = "misbalare2720"; // La contraseña se inyecta aquí desde el script

    // --- COMPONENTE DE LOGIN ---
    const LoginScreen = ({ onLogin }) => {
      const [input, setInput] = useState("");
      const [error, setError] = useState(false);

      const handleSubmit = (e) => {
        e.preventDefault();
        // Convertimos a minúsculas para que no importe si escriben "UCI" o "uci"
        if (input.toLowerCase() === PASSWORD_CORRECTA.toLowerCase()) {
          onLogin();
        } else {
          setError(true);
          setInput("");
        }
      };

      return (
        <div className="min-h-screen flex items-center justify-center p-4">
          <div className="login-glass p-10 rounded-3xl shadow-2xl max-w-sm w-full text-center">
            <div className="mb-6 inline-flex p-4 bg-blue-600 rounded-2xl text-white shadow-lg shadow-blue-500/30">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="w-8 h-8"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect><path d="M7 11V7a5 5 0 0 1 10 0v4"></path></svg>
            </div>
            <h1 className="text-2xl font-black text-slate-800 mb-2">Acceso Restringido</h1>
            <p className="text-slate-500 text-sm mb-8 font-medium">Dashboard Clínico UCI Quirúrgica</p>
            
            <form onSubmit={handleSubmit} className="space-y-4">
              <input 
                type="password" 
                value={input}
                onChange={(e) => {setInput(e.target.value); setError(false);}}
                placeholder="Introduce la clave..."
                className="w-full px-5 py-3 rounded-xl bg-white/50 border border-slate-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 outline-none transition-all font-bold text-center text-slate-700 placeholder-slate-400"
                autoFocus
              />
              <button type="submit" className="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 rounded-xl shadow-lg shadow-blue-600/30 transition-all active:scale-95">
                Entrar
              </button>
            </form>
            {error && <p className="mt-4 text-red-500 text-xs font-bold animate-pulse">⛔ Clave incorrecta</p>}
          </div>
        </div>
      );
    };

    // --- ICONOS ---
    const Icons = {
      Brain: (p)=><svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z"/><path d="M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z"/></svg>,
      Wind: (p)=><svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M17.7 7.7a2.5 2.5 0 1 1 1.8 4.3H2"/><path d="M9.6 4.6A2 2 0 1 1 11 8H2"/><path d="M12.6 19.4A2 2 0 1 0 14 16H2"/></svg>,
      Heart: (p)=><svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M22 12h-4l-3 9L9 3l-3 9H2"/></svg>,
      Droplet: (p)=><svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M12 22a7 7 0 0 0 7-7c0-2-2-3-4-3l-3-3-3 3c-2 0-4 1-4 3a7 7 0 0 0 7 7z"/></svg>,
      Thermometer: (p)=><svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z"/></svg>,
      Stomach: (p)=><svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M19 20H5a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2Z"/><path d="M12 11h4"/><path d="M12 16h4"/><path d="M8 11h.01"/><path d="M8 16h.01"/></svg>,
      Bed: (p)=><svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M2 4v16"/><path d="M2 8h18a2 2 0 0 1 2 2v10"/><path d="M2 17h20"/><path d="M6 8v9"/></svg>,
      Alert: (p)=><svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/><line x1="12" y1="9" x2="12" y2="13"/><line x1="12" y1="17" x2="12.01" y2="17"/></svg>,
      Clipboard: (p)=><svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><rect width="8" height="4" x="8" y="2" rx="1" ry="1"/><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"/><path d="M12 11h4"/><path d="M12 16h4"/></svg>,
      User: (p)=><svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>,
      Logout: (p)=><svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/><polyline points="16 17 21 12 16 7"/><line x1="21" y1="12" x2="9" y2="12"/></svg>
    };
    const Icon = ({n, c}) => { const I = Icons[n]; return I ? <I className={c} /> : null; };

    // --- COMPONENTES UI DASHBOARD ---
    const BedCard = ({ data, onClick }) => {
      const isUCIN = data.unidad === 'UCIN';
      const colors = { 'Crítico': 'border-l-red-500 bg-red-100 text-red-700', 'Estable': 'border-l-emerald-500 bg-emerald-100 text-emerald-700', 'Alerta': 'border-l-amber-500 bg-amber-100 text-amber-700' };
      const status = colors[data.estado] || colors['Alerta'];
      const unitClass = isUCIN ? 'bg-purple-100 text-purple-700' : 'bg-blue-100 text-blue-700';
      return (
        <div onClick={() => onClick(data)} className={`relative glass-card rounded-xl shadow-sm hover:shadow-2xl hover:-translate-y-1 transition-all p-5 cursor-pointer border border-slate-200 border-l-4 ${status.split(' ')[0]}`}>
          <div className="flex justify-between items-start mb-2">
             <div className="flex items-center gap-3">
               <div className="bg-slate-50 p-2 rounded-lg text-slate-400"><Icon n="Bed" c="w-6 h-6"/></div>
               <div><h3 className="text-xl font-black text-slate-800 leading-none">Cama {data.numero_cama}</h3><span className={`text-[10px] font-black px-2 py-0.5 rounded uppercase ${unitClass}`}>{data.unidad}</span></div>
             </div>
             <span className={`px-2 py-1 rounded text-xs font-bold uppercase ${status.substring(status.indexOf(' ')+1)}`}>{data.estado}</span>
          </div>
          <div className="flex items-center gap-2 text-xs font-bold text-slate-500 mb-3 bg-slate-50 p-1.5 rounded-lg border border-slate-100">
             <span className="flex items-center gap-1"><Icon n="User" c="w-3 h-3"/> {data.edad} años</span><span className="text-slate-300">|</span><span>Día {data.dias_estancia}</span>
          </div>
          <div><p className="text-xs text-slate-400 font-bold uppercase">Paciente</p><p className="text-2xl font-black text-slate-700 truncate">{data.paciente_id}</p></div>
          {data.alertas && <div className="mt-3 flex items-center gap-2 text-red-600 bg-red-50 px-2 py-1 rounded"><Icon n="Alert" c="w-4 h-4 animate-pulse"/><span className="text-xs font-bold">ATENCIÓN</span></div>}
        </div>
      );
    };

    const Section = ({ i, t, txt, col }) => (
      <div className="bg-white/80 p-4 rounded-2xl border border-slate-100 shadow-sm backdrop-blur-sm">
        <div className="flex items-center gap-2 mb-2"><div className={`p-2 rounded-lg ${col}`}><Icon n={i} c="w-5 h-5"/></div><h4 className="text-xs font-bold text-slate-500 uppercase">{t}</h4></div>
        <p className="text-sm font-medium text-slate-700 pl-10 leading-relaxed">{txt || "Sin datos."}</p>
      </div>
    );

    const Modal = ({ p, onClose }) => {
      if(!p) return null;
      const isUCIN = p.unidad === 'UCIN';
      const headCol = isUCIN ? 'bg-purple-600' : 'bg-blue-600';
      return (
        <div className="fixed inset-0 modal-backdrop flex items-center justify-center p-4 z-50" onClick={onClose}>
          <div className="bg-slate-50 w-full max-w-6xl max-h-[95vh] overflow-y-auto rounded-3xl shadow-2xl" onClick={e=>e.stopPropagation()}>
            <div className="bg-white p-6 border-b border-slate-100 flex justify-between items-center sticky top-0 z-10 shadow-sm">
               <div className="flex items-center gap-4">
                 <div className={`h-14 w-14 ${headCol} rounded-xl flex items-center justify-center text-white font-black text-2xl shadow-md`}>{p.numero_cama}</div>
                 <div>
                    <h2 className="text-3xl font-black text-slate-800 tracking-tight">{p.paciente_id}</h2>
                    <div className="flex items-center gap-3 text-slate-500 font-bold text-sm mt-1">
                        <span className="bg-slate-100 px-2 py-0.5 rounded text-slate-600">{p.sexo}</span>
                        <span>{p.edad} años</span><span className="text-slate-300">•</span><span>Estancia: Día {p.dias_estancia}</span>
                    </div>
                 </div>
               </div>
               <button onClick={onClose} className="px-5 py-2.5 bg-slate-100 rounded-xl font-bold text-slate-600 hover:bg-slate-200 transition-colors">Esc Cerrar</button>
            </div>
            <div className="p-6 md:p-8 space-y-6">
               {p.antecedentes && p.antecedentes !== "?" && <div className="bg-slate-100/80 p-5 rounded-2xl border border-slate-200"><h3 className="text-xs font-black text-slate-400 uppercase tracking-widest mb-2">Antecedentes Personales (AP)</h3><p className="text-base font-medium text-slate-700 italic">{p.antecedentes}</p></div>}
               <div className={`p-1 rounded-2xl shadow-sm bg-gradient-to-r ${isUCIN ? 'from-purple-500 to-purple-400' : 'from-blue-500 to-blue-400'}`}><div className="bg-white p-5 rounded-xl"><div className="flex gap-2 mb-2 items-center text-slate-800"><Icon n="Clipboard" c="w-6 h-6"/><span className="font-black uppercase tracking-wide">Plan Terapéutico</span></div><p className="text-lg font-medium pl-8 leading-relaxed text-slate-800">{p.plan}</p></div></div>
               <div className="grid grid-cols-1 md:grid-cols-3 gap-5">
                 <Section i="Brain" t="Neurológico" txt={p.sistemas.neurologico} col="bg-indigo-100 text-indigo-600"/>
                 <Section i="Wind" t="Respiratorio" txt={p.sistemas.respiratorio} col="bg-sky-100 text-sky-600"/>
                 <Section i="Heart" t="Hemodinámico" txt={p.sistemas.hemodinamico} col="bg-rose-100 text-rose-600"/>
                 <Section i="Droplet" t="Renal" txt={p.sistemas.renal} col="bg-amber-100 text-amber-600"/>
                 <Section i="Thermometer" t="Infeccioso" txt={p.sistemas.infeccioso} col="bg-purple-100 text-purple-600"/>
                 <Section i="Stomach" t="Digestivo" txt={p.sistemas.digestivo} col="bg-lime-100 text-lime-600"/>
               </div>
            </div>
          </div>
        </div>
      );
    };

    // --- COMPONENTE PRINCIPAL (GESTIÓN DE SESIÓN) ---
    const App = () => {
      const [isLoggedIn, setIsLoggedIn] = useState(false);
      const [sel, setSel] = useState(null);

      // Al iniciar, miramos si ya estaba logueado en esta sesión para no pedir clave al recargar
      useEffect(() => {
        const session = sessionStorage.getItem("uci_auth");
        if (session === "true") setIsLoggedIn(true);
      }, []);

      const handleLoginSuccess = () => {
        setIsLoggedIn(true);
        sessionStorage.setItem("uci_auth", "true"); // Guarda la sesión mientras no cierren el navegador
      };
      
      const handleLogout = () => {
        setIsLoggedIn(false);
        setSel(null);
        sessionStorage.removeItem("uci_auth");
      };

      // Si no está logueado, mostramos SOLO la pantalla de Login
      if (!isLoggedIn) {
        return <LoginScreen onLogin={handleLoginSuccess} />;
      }

      // Si está logueado, mostramos el Dashboard normal
      const reas = PATIENTS.filter(p=>p.unidad==='REA');
      const ucins = PATIENTS.filter(p=>p.unidad==='UCIN');
      
      return (
        <div className="min-h-screen p-6 md:p-10 max-w-[1920px] mx-auto">
           <header className="mb-10 flex flex-col md:flex-row justify-between items-end gap-4">
              <div><h1 className="text-5xl font-black text-slate-800 tracking-tighter mb-2">UCI Quirúrgica <span className="text-blue-600">Dashboard</span></h1><p className="text-slate-500 font-medium">Vista clínica en tiempo real • REA + UCIN</p></div>
              <div className="flex gap-4 items-center">
                <div className="bg-white px-4 py-2 rounded-xl shadow-sm border border-slate-100 text-sm font-bold text-slate-400">Act: {new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})}</div>
                <button onClick={handleLogout} className="bg-red-50 hover:bg-red-100 text-red-600 p-2 rounded-xl transition-colors" title="Cerrar sesión"><Icon n="Logout" c="w-6 h-6"/></button>
              </div>
           </header>
           {reas.length>0 && <div className="mb-12"><h2 className="text-2xl font-black text-blue-900 mb-6 flex items-center gap-2"><span className="w-2 h-8 bg-blue-500 rounded-full"></span>REA</h2><div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5 gap-6">{reas.map(p=><BedCard key={p.id} data={p} onClick={setSel}/>)}</div></div>}
           {ucins.length>0 && <div><h2 className="text-2xl font-black text-purple-900 mb-6 flex items-center gap-2"><span className="w-2 h-8 bg-purple-500 rounded-full"></span>UCIN</h2><div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5 gap-6">{ucins.map(p=><BedCard key={p.id} data={p} onClick={setSel}/>)}</div></div>}
           {sel && <Modal p={sel} onClose={()=>setSel(null)}/>}
        </div>
      );
    };

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<App />);
  </script>
</body>
</html>