<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />
  
  <title>Acceso UCI</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <style>
    body { background-color: #f0f4f8; background-image: radial-gradient(#cbd5e1 1px, transparent 1px); background-size: 24px 24px; font-family: system-ui, sans-serif; }
    .glass-card { background: linear-gradient(145deg, #ffffff, #f8fafc); }
    .modal-backdrop { background-color: rgba(15, 23, 42, 0.8); backdrop-filter: blur(8px); }
    .login-glass { background: rgba(255, 255, 255, 0.7); backdrop-filter: blur(20px); border: 1px solid rgba(255, 255, 255, 0.5); }
    ::-webkit-scrollbar { width: 8px; } ::-webkit-scrollbar-thumb { background: #94a3b8; border-radius: 4px; }
  </style>
  <script> tailwind.config = { theme: { extend: { colors: { lime: { 100: '#ecfccb', 600: '#65a30d' } } } } } </script>
</head>
<body>
  <div id="root"></div>
  <script type="text/babel">
    const { useState, useEffect } = React;
    const PATIENTS = [
  {
    "id": "rea-1",
    "numero_cama": "1",
    "unidad": "REA",
    "estado": "Crítico",
    "edad": "77 años",
    "sexo": "M",
    "dias_estancia": "8",
    "antecedentes": "Enfermedad coronaria de 3 vasos, doble bypass, RAM a AAS/G6PDH, HTA, DLP. IQx: Amigdalectomía, Colecistectomía, Histerectomía + doble anexectomía.",
    "plan": "Seguir sentando en sillón. Intentar destete de NA. Realizar ETE mañana (en ayunas) por sospecha de CIV. Retirada de pigtail izquierdo. Intentar disminuir FiO2 y controles gasométricos. Reponer Fosfato monosódico y monopotasico. Vigilancia enzimas hepáticas. Pautar lactulosa.",
    "sistemas": {
      "neurologico": "Consciente y orientada en las 3 esferas, tranquila y colaboradora. GCS 15. PINR. No focalidades neurológicas aparentes. Algias controladas con analgesia de primer escalón. Lorazepam nocturno.",
      "hemodinamico": "Requerimiento de NA a 13ml/h. RS a 88lpm (tendencia a taquicardia previa con extrasístoles). Episodio de FA tratado con amiodarona. IAMSEST post-op con troponinas en descenso. Portadora de catéter SG. Eco FICE: VI ligeramente dilatado, FEVI moderadamente deprimida, sin derrame. Láctico normal.",
      "hemostasia_coagulacion": "Hb 9.2, HCT 28.3%. Sangrado previo por safenectomía (apositos limpios hoy). Plaquetas y coagulación sin alteraciones. Tromboprofilaxis con enoxaparina 40mg c/24h y antiagregación con clopidogrel 75mg.",
      "respiratorio": "GNAF 35/35, PO2: 75. Drenaje pleural izq con 20ml seroso. Fisioterapia inspiratoria. Rx tórax sin neumotórax ni IC, leve pinzamiento costofrenico izq. Historia de IRA con VMNI BIPAP y GNAF.",
      "renal": "Portadora de sondaje vesical, diuresis forzadas con furosemida oral (ayer 40mg). Ritmo miccional adecuado pero ocasional oliguria. Balance hídrico neutro +5. Función renal conservada. Leve hipofosfatemia (2.4).",
      "digestivo": "Mejor tolerancia a dieta oral. Glucemias bien controladas. No deposiciones desde ingreso. Tratamiento antiemético. Elevación de transaminasas en descenso (GOT: 31 GPT: 198 GGT: 46 FA:82). Bilirrubina normal. Hipoproteinemia (5.4). Abdomen blando y depresible.",
      "infeccioso": "Afebril, sin tratamiento antibiótico. No aspecto de sepsis. Leucocitos 15980, PCR 7.43."
    }
  },
  {
    "id": "rea-2",
    "numero_cama": "2",
    "unidad": "REA",
    "estado": "Alerta",
    "edad": "41 años",
    "sexo": "H",
    "dias_estancia": "1",
    "antecedentes": "Dx: Endocarditis sobre prótesis mecánica Ao con IAo severa y absceso sobre raíz de Ao. IQx: SVAo mecánica. SVAo mecánica previa (2021) por IAo. DLP. Cuadro de febrícula y tiritona por sospecha de endocarditis.",
    "plan": "Monitorización postoperatoria inmediata y manejo de la vasoplejia post-CEC. Evaluación de calcio y leucocitos.",
    "sistemas": {
      "neurologico": "Bajo sedación e IOT para monitorización postoperatoria inmediata.",
      "hemodinamico": "Hemodinámicamente estable en quirófano, pero tendencia a hipotensión arterial por vasoplejía post-CEC. Necesidad de NA a dosis bajas (8ml/h). Eco por cardiología muestra buena función sistólica y valvular correcta. Láctico normal intraoperatorio.",
      "hemostasia_coagulacion": "Sangrado dentro de límites permisibles. Transfusión 2 plasma y 1g fibrinógeno intraoperatorio. Heparinización 300mg, protamina 40mg.",
      "respiratorio": "IOT con TET nº 7,5. Ventilación Han I. SatO2 98%. Traslado a UCIQ bajo sedación e IOT.",
      "renal": "Diuresis conservada intraoperatoria. No se especifica estado renal post-op.",
      "digestivo": "No información específica del sistema digestivo.",
      "infeccioso": "Leucocitos 18.000/mm3. Diagnóstico de endocarditis. Profilaxis ATB no detallada."
    }
  },
  {
    "id": "rea-3",
    "numero_cama": "3",
    "unidad": "REA",
    "estado": "Crítico",
    "edad": "59 años",
    "sexo": "H",
    "dias_estancia": "6",
    "antecedentes": "DX: Perforación intestinal. IQx: Laparoscopia exploradora + colostomía en asa. Reintervención urgente por isquemia de colon con perforación. RAM a Betalactámicos (shock anafiláctico). HTA, DLP. TVP recidivante por Déficit proteína C. VIH C3. Carcinoma epidermoide perianal.",
    "plan": "Disminuir aminas para mantener TAM > 65 mmHg. Tener en cuenta el déficit de proteína C. Solicitar transfusión de 1PP por sangrado subglótico. Mantener perfusión de furosemida bajándola según ritmo diurético. Ajuste de niveles de Vancomicina (500mg/12h). Solicitar NPT.",
    "sistemas": {
      "neurologico": "Sedoanalgesiado con Propofol 2% a 2 ml/h + Cl mórfico a 1 ml/h. RASS -4. BIS 28-35.",
      "hemodinamico": "Mejoría. Retirada de NA y vasopresina. RS a 74 lpm. Perfusión de amiodarona a 4 ml/h. Lactato elevado (3.5). Relleno capilar enlentecido. AC: tonos rítmicos, soplo sistólico. Eco cardio sin datos relevantes en la nota.",
      "hemostasia_coagulacion": "Hgb: 11.1 g/dl. Plaquetas 15.000. Coagulación alterada (APTT 1.46; INR 1.5). Sin tratamiento anticoagulante por alteración analítica y sangrado espontáneo por sonda aspiración subglótica. Déficit de Proteína C.",
      "respiratorio": "Insuficiencia respiratoria hipoxémica, con mejoría de FiO2 a 50%. VC con VT 475, FR 16, PEEP 12. PAFI 152. Derrame pleural derecho ya desaparecido (drenaje con pig-tail). TET normoposicionado. Drenaje pleural 580 cc serohemático. GSA: pH: 7.32, pCO2: 45, pO2: 76.",
      "renal": "Estabilidad FR. FRA con Cr 1.43 mg/dL. Urea: 65 mg/dl. Diuresis: 2765 cc (ayer), Balance: -801 cc (ayer). PC de furosemida a 2 ml/h por poliuria. Hipopotasemia (3 meq/l).",
      "digestivo": "Reintervención hace 48 h por isquemia de colon con perforación y peritonitis fecaloidea. Resección de colon e ileostomía terminal. Abdomen depresible, no distendido. M. palanca activo lento (700c). Herida quirúrgica (laparotomía media) con buen aspecto. Enzimas hepáticas GOT/GPT 87/26. Hipoproteinemia 4.9.",
      "infeccioso": "Mejoría por recuperación de leucopenia (L 6750). Afebril. PCR elevada 38, PCT 8. Tratamiento con Aztreonam + Metronidazol + Vancomicina + Anidulafungina (por RAM a betalactámicos). Cultivos: Líquido peritoneal E. coli y E. Faecium."
    }
  },
  {
    "id": "rea-4",
    "numero_cama": "4",
    "unidad": "REA",
    "estado": "Crítico",
    "edad": "40 años",
    "sexo": "H",
    "dias_estancia": "17",
    "antecedentes": "TCE grave tras precipitación. Craniectomía descompresiva, posterior cerebritis e infección de herida. Obesidad, SAOS, Hiperuricemia. HTA, DM, DLP no. Múltiples cambios de antibióticos por cultivos y AKI. TQT reglada.",
    "plan": "Intentar reducir dosis de propofol. Pendiente niveles de Keppra. Continuar ventilación en PS, valorar O2T. Vigilancia de hipernatremia y evitar balances negativos excesivos. Vigilancia de colestasis disociada y Eco abdominal. Si hace fiebre, realizar Hemocultivos. Ajustar antibióticos si mejora función renal (Ceftazidima-Avibactam por antibiograma).",
    "sistemas": {
      "neurologico": "Sedado con propofol (dosis fluctuantes, alta por la noche). Agitación de difícil control (a pesar de clonidina, haloperidol, quetiapina, clonazepam, propranolol). Moviliza 4 EE, apertura ocular espontánea, no conecta con el medio. PINR. Sin nuevos episodios epileptiformes en 5 días (en tratamiento con Keppra y Lacosamida). Psiquiatría valora inicio de Zuclopentixol IM.",
      "hemodinamico": "Estable, sin requerimiento de aminas. RS a 90lpm, tendencia a HTA. Hb 9.1, lactato 0.9. No soplos. Última transfusión 25/01 (3HC en total).",
      "hemostasia_coagulacion": "Tromboprofilaxis con tinzaparina 4.500U (función renal alterada). Plaquetas 347.000. Coagulación anulada por incidencia, previamente en rango.",
      "respiratorio": "TQT en modalidad CPAP PS 14/8, FiO2 0.4. Sat O2 100%. Mejoría de secreciones. Buena mecánica. GSA: pH 7.36, pCO2 35, pO2 115. Rx tórax sin hallazgos patológicos. BAS: Candida tropicalis + Enterobacter hormaechei.",
      "renal": "AKI-3 en fase de mejoría. Poliuria en descenso (3110ml ayer, Balance -582). Último ciclo de diálisis 24/01. Ligera hipernatremia (Na 148), en tratamiento con agua libre por sonda e Ionolyte. Urea 87, Cr 2.56, FG 30.",
      "digestivo": "SNG con NE (Low protein) a 60ml/h, buena tolerancia. Glucemias bien controladas. 4 días sin deposiciones. Colestasis disociada en meseta (GGT 994, FA 293). Abdomen blando, peristaltismo conservado.",
      "infeccioso": "Afebril. Tratamiento antibiótico con Ceftarolina 300mg/12h + Cefepime 1g/12h (ambos ajustados a FG 10-30) y Fluconazol 400mg/24h. Leucocitos 11900, PCR 4.63. Cultivos: BAS con Enterobacter hormaechei (carbapenem resistente) y Candida tropicalis. Frotis rectal: Colonización por Proteus mirabilis BLEE."
    }
  },
  {
    "id": "rea-5",
    "numero_cama": "5",
    "unidad": "REA",
    "estado": "Sin paciente",
    "edad": "?",
    "sexo": "?",
    "dias_estancia": "?",
    "antecedentes": "Sin paciente en esta cama.",
    "plan": "No aplica.",
    "sistemas": {}
  },
  {
    "id": "rea-6",
    "numero_cama": "6",
    "unidad": "REA",
    "estado": "Alerta",
    "edad": "59 años",
    "sexo": "M",
    "dias_estancia": "1",
    "antecedentes": "Dx: Carcinoma de Timo. IQx: resección con esternotomía. Incidencias intraoperatorias: sección de nervio frénico y laríngeo recurrente izquierdo, laceración de arteria pulmonar y vena cava superior con reparación.",
    "plan": "Realizar EVP e intentar disminuir NA hasta suspender. Iniciar tromboprofilaxis con enoxaparina 40 mg sc/24h. Objetivo de balance hídrico neutro. Iniciar tolerancia a dieta oral.",
    "sistemas": {
      "neurologico": "Consciente, orientada y colaboradora, sin focalidad neurológica. RASS 0. Dolor controlado con catéter epidural.",
      "hemodinamico": "Precisa NA a bajas dosis (1 ml/h) para mantener TAM > 65 mmHg. RS a 93 lpm. Tonos rítmicos, sin soplos ni roces. Láctico 2.8 (previamente 3.5).",
      "hemostasia_coagulacion": "Coagulación y plaquetas normales. Hgb: 9.3 g/dl. Déficit de factores de coagulación intra-op tratado con complejo protrombínico.",
      "respiratorio": "Eupneica con GN a 2 lpm. Dificultad para expectorar secreciones (relacionado con lesión del nervio recurrente). GSA: pH: 7.34, pCO2: 42, pO2: 85. Rx Tórax: hemitórax izquierdo con aumento de trama vascular. Drenajes torácicos con débito serohemático.",
      "renal": "Urea: 38 mg/dl, Cr: 0.51 mg/dl. Diuresis: 940cc (ayer). Balance positivo de 672 cc (ayer). Iones en rango (Magnesio 1.63). Sin tratamiento diurético ni edemas.",
      "digestivo": "Abdomen blando y depresible, sin masas ni visceromegalias, peristaltismo disminuido. Bilirrubina total: 0.52 mg/dl, GOT y GPT sin interés. Glucemia alrededor de 186 mg/dl (con insulina regular). Proteínas totales: 5.3 g/dl.",
      "infeccioso": "Afebril. Leucocitos: 14.390 /mm3, PCR: 17 mg/dl."
    }
  },
  {
    "id": "rea-7",
    "numero_cama": "7",
    "unidad": "REA",
    "estado": "Estable",
    "edad": "57 años",
    "sexo": "M",
    "dias_estancia": "1",
    "antecedentes": "Dx: Meningioma ángulo pontocerebeloso. IQx: Craneotomía + exéresis mio. Exéresis subtotal dejando probable resto. Pares craneales V al XI monitorizados sin alteraciones.",
    "plan": "Curso TAC control en 24h. RNM solicitada por neurocirugía. Amlodipino 5 mgr/24 h vo si HTA. Vigilancia neurológica. Si TAC normal y sin variaciones clínicas, alta mañana.",
    "sistemas": {
      "neurologico": "Consciente y orientada. Sin focalidad neurológica. Pares craneales conservados y simétricos.",
      "hemodinamico": "Estable, con tendencia a la hipertensión que precisó clevidipino a dosis bajas (ya suspendido). TA 133/60, en ritmo sinusal a 70lpm. Hb 13 gr/dl.",
      "hemostasia_coagulacion": "No se especifica. Hb en rango.",
      "respiratorio": "Eupneica en reposo con cánulas a 3l/min. SatpO2 100%. AP: mvc, sin ruidos patológicos. GSA: pH 7.38, pCO2 36, pO2 102. Rx tórax: shp (sin hallazgos patológicos).",
      "renal": "Diuresis espontánea > 1 ml/Kg/h con función renal e iones dentro de la normalidad.",
      "digestivo": "Abdomen anodino. Dieta absoluta.",
      "infeccioso": "Afebril. Leucocitos 12290 (81.6%N), PCR 5.52."
    }
  },
  {
    "id": "rea-8",
    "numero_cama": "8",
    "unidad": "REA",
    "estado": "Crítico",
    "edad": "75 años",
    "sexo": "H",
    "dias_estancia": "2",
    "antecedentes": "Dx: IM severa. IQx: Cirugía de reparación valvular mitral + ablación de venas pulmonares + implante de Atriclip. HTA, DLP. IAM (julio 2025), IC descompensada, FEVI límite inferior. FA, CVE. PTI (tto con dexametasona). Aneurisma iliacas (embolizadas). Ictus isquémico (julio 2025).",
    "plan": "Disminuir aminas. Prednisoma oral, pautado dosis decrecientes para suspender. Incentivometría respiratoria. Vigilar función renal. Aumentar furosemida c/6h prn. Reposición de calcio iv y bicarbonato vo. Progresar tolerancia oral y suspender fluidos. Pautar batidos hiperproteicos. Procinéticos pautados.",
    "sistemas": {
      "neurologico": "Consciente, orientado y colaborador, sin focalidad neurológica aparente. RASS: 0. GCS: 15 puntos. Aceptable analgesia con PC morfina 0.5 ml/h.",
      "hemodinamico": "Inestable con necesidad de PC noradrenalina a 10 ml/h. FC: 63 lpm en RS?. Troponina I: 17.163 ng/l. AC: tonos rítmicos. Eco: aceptable contractilidad global, no taponamiento. Esternón estable. Láctico 2.3. Tubos torácicos con débito hemático.",
      "hemostasia_coagulacion": "Hb: 8.8 g/dl, Hto: 27.5%. Plaquetas 116.000. Coagulación en rango. Administrado hidrocortisona (px supresión suprarrenal por PTI).",
      "respiratorio": "Eupneico con GN a 3 lpm. Buen intercambio gaseoso y mecánica. GSA: pH: 7.30, pCO2: 36, pO2: 94. AP: murmullo vesicular conservado, algún roncus en base derecha. Rx Tórax: ICT > 0.5, sin infiltrados ni derrames aparentes.",
      "renal": "Tendencia a oliguria a pesar de expansión, precisa furosemida a bolos. Diuresis ayer 700ml, balance +2.339 ml. Empeoramiento de la función renal. Urea: 63, Cr: 1.9. Leve hipocalcemia y hipofosfatemia (Calcio corregido: 8.3, fosfato: 4.5).",
      "digestivo": "Abdomen blando y depresible. Peristaltismo disminuido. Bilirrubina total: 1.11, GOT: 95, GPT: 35. Nauseoso, pero ha iniciado tolerancia oral con procinéticos. Mal control glucémico, precisa insulina regular. Proteínas totales: 5.3 g/dl."
    }
  },
  {
    "id": "rea-9",
    "numero_cama": "9",
    "unidad": "REA",
    "estado": "Crítico",
    "edad": "67 años",
    "sexo": "H",
    "dias_estancia": "27",
    "antecedentes": "Inestabilidad hemodinámica (NA dosis altas, politransfusión). FRA anúrico con TRRC (actualmente HD intermitente). Elevación de transaminasas. Destete complicado (TQT percutánea). Distensión abdominal. IQx no detallada, pero shock hemorrágico pre e intraoperatorio.",
    "plan": "Continuar con destete, siguiendo con periodos de O2 en T y sentando al paciente. Mantener PC de Bicarbonato 1/6M. Nefrología no pautará diálisis hoy. Si fiebre, cambiar vías. Mantener misma antibioterapia. Progresar con la dieta oral.",
    "sistemas": {
      "neurologico": "Conciente y aparentemente orientado. Colaborador y tranquilo. Ya no precisa dexdor nocturno. Progreso a nivel miopático, realiza ejercicios con fisioterapeuta.",
      "hemodinamico": "Estable con tendencia a la HTA. TA 123/51 mmHg. Amlodipino, Bisoprolol. RS a 92 lpm con extrasístoles ventriculares. Retirada de amiodarona. Láctico 1.7. Mala perfusión periférica en MID (livideces, isquemia crónica). EcoDoppler venoso MID sin TVP.",
      "hemostasia_coagulacion": "Hb 7.7, Hto: 23.7 %. Plaquetas 361.000/mm3. AAS 100 mg/d vo desde hace 2 días. Última transfusión 2CH hace 4 días.",
      "respiratorio": "TQT percutánea. En oxígeno en T (periodos prolongados durante el día), por la noche en SIMV con PS 12/6. FiO2 0.35%. Disminución MV base derecha. GSA PS: pH 7.44, pCO2 30, pO2 108. Rx TORAX: Continúa en mejoría radiológica tras drenaje de derrame pleural. Drenaje ya sin débito.",
      "renal": "Diálisis ayer (sin ultrafiltrado significativo). Edemas en MMII en disminución. Buen ritmo diurético con furosemida 20 mg/12h. BH +139 ml. Cr 4.55 mg/dl, U 215 mg/dl. FG 12 ml/min. Iones en rango, K 3.6.",
      "digestivo": "Dieta absoluta, con nutrición parenteral. Abdomen menos distendido, ha tolerado agua y yogur, defecó ayer (500 ml). SNG con débito verdoso escaso. Enzimas hepáticas de citólisis normalizadas; de colestasis elevadas pero en descenso (GGT 149, FA 226). TAC 22/1: sin obstrucción. Colonoscopia 29/01: compatible con signos de colitis isquémica.",
      "infeccioso": "En tratamiento con Ceftolozano/Tazobactam, Daptomicina y Anidulofungina. Afebril. Marcadores infecciosos en descenso (PCR 7.3, Leucocitos 21.070). Hemocultivo 31/01: S. epidermidis en vía central, se cambia a PIC y catéter de diálisis. Cultivos previos: E.Coli BLEE, P. aeruginosa (CarbaR), C. albicans."
    }
  },
  {
    "id": "rea-10",
    "numero_cama": "10",
    "unidad": "REA",
    "estado": "Estable",
    "edad": "61 años",
    "sexo": "M",
    "dias_estancia": "1",
    "antecedentes": "Corrección de deformidad dorso lumbar mediante artrodesis T9-S1 ilíacos. Fumadora. Neoplasia mamaria (mastectomía 2024). Varices. Artrodesis de cadera L1-S1 (2023). Tratamiento por unidad del dolor con neuromoduladores. No HTA, DM, DLP.",
    "plan": "Continuar abordaje terapéutico y control evolutivo del paciente en UCCQ.",
    "sistemas": {
      "neurologico": "Extubación en quirófano sin incidencias. Catéter incisional con anestésico local para el dolor. Monitorización neurofisiológica intra-op.",
      "hemodinamico": "Estable durante la intervención (TA: 147/89 mmHg. FC: 82 lpm). Sin aminas. Sangrado 1500-1600 ml (recuperador de sangre). 2CH y 2500 ml de cristaloides administrados.",
      "hemostasia_coagulacion": "No se especifica. Sangrado intra-op controlado.",
      "respiratorio": "Intubación orotraqueal sin incidencias. TET nº 7 flexometálico. Extubación en quirófano sin incidencias. SatO2 97%.",
      "renal": "Diuresis conservada (0.5-1 ml/kg/h). Diuresis total 1700 ml durante la cirugía. No hay más detalles post-op.",
      "digestivo": "No información específica. Glucemia controlada intra-op.",
      "infeccioso": "Profilaxis antibiótica según PROA."
    }
  },
  {
    "id": "rea-11",
    "numero_cama": "11",
    "unidad": "REA",
    "estado": "Crítico",
    "edad": "65 años",
    "sexo": "H",
    "dias_estancia": "8",
    "antecedentes": "DX: Hemorragia digestiva alta (gran úlcera con sangrado activo en jet). IQ: Laparotomía (hemostasia). Melanoma coroideo ojo izquierdo estadio IV (LOEs hepáticas, adenopx). Fumador activo, Enolismo, DLP, Obesidad.",
    "plan": "Disminuir sedación (con intención de destete), valorar dexmedetomidina si disminución de noradrenalina. Disminuir aminas. Transfundir 2 CH por inestabilidad HD persistente, 1 PP y 500 mg CP para drenar DP izq. Solicitar Drenaje pleural izquierdo a RxI. Nebulizaciones SSF hipertónico. Destete respiratorio. Mantener terapia HDFVVC. Iniciar sustitución de iones en bolsa de biphozil (ClK, P monoNa, Mg). Buscar balance negativo. Mantener antibioterapia. Vigilar función hepática y sangrado de nueva aparición. Valorado por Cir Gral, si sangra precisará embolización por RxI.",
    "sistemas": {
      "neurologico": "Sedado con PPF 2% a 12-15 ml/h. BIS 50-70. Pupilas reactivas a la luz y simétricas, lado izquierdo levemente más perezosa (probablemente asociado a melanoma coroideo).",
      "hemodinamico": "Inestable con necesidad de PC noradrenalina a 14 ml/h. RS 84 mmHg. Mala perfusión distal crónica y aguda. Láctico 3.7. Transfusión total: 5 CH + 1 PFC + 2 PP.",
      "hemostasia_coagulacion": "Mínima anemización diaria (Hb: 7.5, Hto: 22%). Plaquetas 40.000 (transfusión 2 PP 01/02). Ligera mejoría de la coagulopatía (APTT r 1.37, INR 1.25). TEG compatible con coagulopatía.",
      "respiratorio": "IOT por disnea progresiva. VMI VT 550, FR 18, PEEP 6. Roncus dispersos. Hipofonesis en base izquierda. GSA (40%): pH 7.34, pO2 119, pCO2 41. Rx Tórax: Patrón alveolo-intersticial difuso, atelectasias base derecha, derrame pleural izquierdo.",
      "renal": "FRA on TTRR en HDFVVC desde 30/01/26. Anticoagulación con citrato. Diuresis espontánea 10 ml en 24h. Balance ayer -6.163 ml. Disminución de edemas generalizados (peso -2 kg). Cr 1.57, FG 45. Urea: 56. Hipopotasemia (2.9), hipomagnesemia (1.27), hipofosfatemia (2.3).",
      "digestivo": "Abdomen globuloso, ligeramente distendido, no doloroso. Peristaltismo disminuido. Drenaje penrose: débito ascítico de 3000 ml. SNG: débito diario escaso, con salida de sangre fresca. Bilirrubina total: 6.13. Disminución de enzimas hepáticas (GOT: 97, GPT: 75). Hipoproteinemia (4.5 g/dl). NPT 1500ml. Buen control glucémico."
    }
  },
  {
    "id": "rea-12",
    "numero_cama": "12",
    "unidad": "REA",
    "estado": "Crítico",
    "edad": "61 años",
    "sexo": "H",
    "dias_estancia": "2",
    "antecedentes": "HTA, DLP, tabaquismo. Serología de VHC + y sífilis +. IAMSEST con enfermedad de 3 vasos. IQx: Revascularización quirúrgica coronaria (doble by-pass). EAo ligera. Obstrucción de ambas anastomosis vasculares (re-IAM).",
    "plan": "Iniciaremos hoy la tolerancia oral una vez decidido que no se hará intervencionismo coronario.",
    "sistemas": {
      "neurologico": "Consciente, orientado y colaborador, sin focalidad neurológica. GCS: 15 puntos.",
      "hemodinamico": "TA: 110/63 mmHg. FC: 103/min en RS. Noradrenalina a 0.05 mcg/kg/min (ayer terminó levosimendán). Hgb: 10 g/dl. Troponina I: 63156 pg/ml (pico 1043766 pg/ml). AC: tonos rítmicos, sin soplos ni roces. Episodio de FA con respuesta ventricular rápida yugulado con amiodarona. Hipocinesia generalizada del VI post-op.",
      "hemostasia_coagulacion": "Hgb: 10 g/dl, HCT: 30.8%. IQ: 86%, INR: 1.09, TTPAr: 0.84. Plaquetas: 182.000/mm3. Profilaxis de TVP con enoxaparina.",
      "respiratorio": "FR: 18/min, SatO2: 98 % con GN a 3 l/min. GSA: pH: 7.36, pCO2: 41, pO2: 78. Murmullo vesicular conservado. Rx Tórax: aumento de trama intersticial.",
      "renal": "Urea: 29 mg/dl, Cr: 0.97 mg/dl. Diuresis: 4070 cc (ayer), Balance: -2329 cc (ayer). Iones en rango (hipofosfatemia 1.7). Sin tratamiento diurético ni edemas.",
      "digestivo": "Abdomen blando y depresible, sin masas ni visceromegalias, peristaltismo disminuido. Bilirrubina total: 0.35 mg/dl. GOT: 212 UI/l, GPT: 64 UI/L. Glucemia: 193 mg/dl, precisa insulina regular. Proteínas totales: 6.3 g/dl.",
      "infeccioso": "Afebril (máx 36.7ºC). Leucocitos: 5950/mm3, PCR: 19.69 mg/dl. Tratamiento con penicilina por antecedente de sífilis."
    }
  },
  {
    "id": "ucin-1",
    "numero_cama": "1",
    "unidad": "UCIN",
    "estado": "Estable",
    "edad": "66 años",
    "sexo": "M",
    "dias_estancia": "1",
    "antecedentes": "Ingreso por perforación colon con peritonitis fecaloidea. Carcinoma con metástasis ósea e invasión canal medular (collarín cervical, pendiente artrodesis y fijación qx).",
    "plan": "Reintroducir oxicodona por la noche. Iniciar agua de confort (dieta absoluta).",
    "sistemas": {
      "neurologico": "Consciente y orientada, sin focalidad. Dolor controlado con analgésicos de primer escalón. Reintroducción de oxicodona nocturna.",
      "hemodinamico": "Estable sin precisar soporte vasopresor ni inotrópico. TA: 120/69; RS a 70 lpm. Hgb: 8.8 gr/dl. Láctico: 1.1. No edema ni hematoma de la zona quirúrgica.",
      "hemostasia_coagulacion": "Coagulación en rango. IQ: 77%.",
      "respiratorio": "Eupneica con buena mecánica respiratoria y buen intercambio gaseoso. Sat O2: 100%. AP: MVC, no ruidos patológicos. GSA: pH: 7.41; pCO2: 41; pO2: 107. Rx tórax: Ensanchamiento mediastínico. No DP ni condensaciones parenquimatosas.",
      "renal": "Diuresis conservadas sin precisar soporte diurético. Función renal e iones en rango.",
      "digestivo": "En dieta absoluta, inicia agua de confort. Dolor abdominal difuso con abdomen empastado. Marti-palanca activo lento serohemático.",
      "infeccioso": "Afebril. No elevación de parámetros sépticos. PCR: 18.18; Leu: 4960. Cultivo líquido abdominal: Cocos Gram + y bacilos Gram -. En tratamiento con linezolid, meropenem y fluconazol."
    }
  },
  {
    "id": "ucin-2",
    "numero_cama": "2",
    "unidad": "UCIN",
    "estado": "Alerta",
    "edad": "71 años",
    "sexo": "H",
    "dias_estancia": "1",
    "antecedentes": "Intervención quirúrgica programada de nefrectomía radical por tumor renal izquierdo (infiltra psoas con trombo en vena renal, metástasis pulmonares). Neoplasia sincrónica: Ca Próstata. Ex-fumador, HTA, DM, DLP.",
    "plan": "Continuar abordaje terapéutico y control evolutivo del paciente en UCIN.",
    "sistemas": {
      "neurologico": "Extubación en quirófano sin incidencias. Sin focalidad en el post-op inmediato.",
      "hemodinamico": "Hemodinámicamente inestable intra-op por sangrado abundante (1L). Precisó PC de NA a dosis bajas y transfusión de 1CH. Lactato 1.9 intra-op. Traslado a UCIN monitorizado.",
      "hemostasia_coagulacion": "Sangrado intra-op 1L. Transfusión 1CH. Coagulación no especificada post-op.",
      "respiratorio": "Intubación orotraqueal intra-op. Extubación en quirófano sin incidencias. Traslado con ventimask 6 L/min.",
      "renal": "Diuresis mantenida intra-op (450cc total). Función renal no especificada post-op.",
      "digestivo": "No información específica del sistema digestivo post-op. Glucemia controlada intra-op con insulina.",
      "infeccioso": "Profilaxis antibiótica con cefuroxima intra-op. No especifica antibióticos post-op."
    }
  },
  {
    "id": "ucin-3",
    "numero_cama": "3",
    "unidad": "UCIN",
    "estado": "Sin paciente",
    "edad": "?",
    "sexo": "?",
    "dias_estancia": "?",
    "antecedentes": "Sin paciente en esta cama.",
    "plan": "No aplica.",
    "sistemas": {}
  },
  {
    "id": "ucin-4",
    "numero_cama": "4",
    "unidad": "UCIN",
    "estado": "Estable",
    "edad": "44 años",
    "sexo": "M",
    "dias_estancia": "1",
    "antecedentes": "Ingresa para vigilancia postoperatoria tras tiroidectomía subtotal y linfadenectomía derecha programada. RAM a metamizol y dexketoprofeno. HTA. Adenocarcinoma de pulmón con metástasis cerebral (QT + inmunoterapia). Hipotiroidismo.",
    "plan": "Seguir vigilancia y cuidados en UCCQ/UCIN.",
    "sistemas": {
      "neurologico": "Extubación en quirófano sin incidencias. Neurofisiología: falta de respuesta nerviosa en nervio laríngeo recurrente derecho intra-op (decisión de no completar tiroidectomía izquierda).",
      "hemodinamico": "Estable durante la intervención (TA: 148/89 mmHg. FC: 82 lpm). Sangrado dentro de límites permisibles. No se especifica estado post-op.",
      "hemostasia_coagulacion": "No se especifica. Sangrado intra-op controlado.",
      "respiratorio": "Intubación orotraqueal con videolaringoscopio. TET flexometálico nº 7. Extubación en quirófano sin incidencias. SatO2 95%.",
      "renal": "Diuresis conservada intra-op (0.5-1 ml/kg/h). No se especifica estado post-op.",
      "digestivo": "No información específica.",
      "infeccioso": "No se especifica profilaxis antibiótica ni estado infeccioso post-op."
    }
  },
  {
    "id": "ucin-5",
    "numero_cama": "5",
    "unidad": "UCIN",
    "estado": "Alerta",
    "edad": "70 años",
    "sexo": "M",
    "dias_estancia": "1",
    "antecedentes": "Ingresa procedente de quirófano de cirugía plástica + neurocirugía por infección de herida quirúrgica, IQx: reconstrucción con colgajo. RAM a Penicilina, Vancomicina, Cloxacilina y Ceftriaxona. HTA. Meningioma fronto-parietal izquierdo (múltiples reintervenciones, empiema epidural). Epilepsia sintomática.",
    "plan": "Continuar vigilancia y cuidados postoperatorios. Seguimiento de los antecedentes alérgicos.",
    "sistemas": {
      "neurologico": "Consciente y orientada, sin focalidad. Extubación en quirófano sin incidencias.",
      "hemodinamico": "Labilidad tensional durante la intervención, precisó bolos puntuales de efedrina y fenilefrina. Diuresis total 700cc. Sangrado entre 700cc y 1L, se transfundieron 2CH. Estable al traslado.",
      "hemostasia_coagulacion": "Sangrado intra-op (700cc-1L) con transfusión de 2CH. Coagulación no especificada post-op.",
      "respiratorio": "Intubación orotraqueal sin incidencias. TET nº 6.5 anillado. Extubación en quirófano sin incidencias. SatO2 96%.",
      "renal": "Diuresis conservada intra-op (0.5-1 ml/kg/h). No se especifica estado post-op.",
      "digestivo": "No información específica. Sin datos.",
      "infeccioso": "Administrado antibioterapia según UEI con ceftarolina y daptomicina. No se especifica estado infeccioso post-op."
    }
  },
  {
    "id": "ucin-6",
    "numero_cama": "6",
    "unidad": "UCIN",
    "estado": "Estable",
    "edad": "41 años",
    "sexo": "M",
    "dias_estancia": "1",
    "antecedentes": "Ingresa para control postoperatorio tras resección de quiste mediastínico (Timo) RATS. Distrofia muscular Emery-Dreifuss (sin cardiopatía, afectación muscular ósea y tendinosa). Trastorno respiratorio restrictivo moderado. Ex-fumadora. No HTA, DN ni DLP.",
    "plan": "Control postoperatorio. Vigilancia de antecedentes médicos, especialmente respiratorios y musculares.",
    "sistemas": {
      "neurologico": "Extubación en quirófano sin incidencias. No focalidad. Trasladada a REA3 por antecedentes médicos.",
      "hemodinamico": "Intraoperatoriamente estable. TA 110/70mmHg en RS a 90lpm. Sangrado escaso. No se especifica estado post-op.",
      "hemostasia_coagulacion": "Sangrado escaso intra-op. No se especifica.",
      "respiratorio": "Intubación endotraqueal con TET nº 8. Extubación en quirófano sin incidencias. SatO2 100% (respirando aire ambiente pre-IQx).",
      "renal": "No se especifica. Sin datos.",
      "digestivo": "No se especifica. Sin datos.",
      "infeccioso": "No se especifica. Sin datos."
    }
  }
];
    const PASSWORD_CORRECTA = "misbalare2720"; // La contraseña se inyecta aquí desde el script

    // --- COMPONENTE DE LOGIN ---
    const LoginScreen = ({ onLogin }) => {
      const [input, setInput] = useState("");
      const [error, setError] = useState(false);

      const handleSubmit = (e) => {
        e.preventDefault();
        // Convertimos a minúsculas para que no importe si escriben "UCI" o "uci"
        if (input.toLowerCase() === PASSWORD_CORRECTA.toLowerCase()) {
          onLogin();
        } else {
          setError(true);
          setInput("");
        }
      };

      return (
        <div className="min-h-screen flex items-center justify-center p-4">
          <div className="login-glass p-10 rounded-3xl shadow-2xl max-w-sm w-full text-center">
            <div className="mb-6 inline-flex p-4 bg-blue-600 rounded-2xl text-white shadow-lg shadow-blue-500/30">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="w-8 h-8"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect><path d="M7 11V7a5 5 0 0 1 10 0v4"></path></svg>
            </div>
            <h1 className="text-2xl font-black text-slate-800 mb-2">Acceso Restringido</h1>
            <p className="text-slate-500 text-sm mb-8 font-medium">Dashboard Clínico UCI Quirúrgica</p>
            
            <form onSubmit={handleSubmit} className="space-y-4">
              <input 
                type="password" 
                value={input}
                onChange={(e) => {setInput(e.target.value); setError(false);}}
                placeholder="Introduce la clave..."
                className="w-full px-5 py-3 rounded-xl bg-white/50 border border-slate-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 outline-none transition-all font-bold text-center text-slate-700 placeholder-slate-400"
                autoFocus
              />
              <button type="submit" className="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 rounded-xl shadow-lg shadow-blue-600/30 transition-all active:scale-95">
                Entrar
              </button>
            </form>
            {error && <p className="mt-4 text-red-500 text-xs font-bold animate-pulse">⛔ Clave incorrecta</p>}
          </div>
        </div>
      );
    };

    // --- ICONOS ---
    const Icons = {
      Brain: (p)=><svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z"/><path d="M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z"/></svg>,
      Wind: (p)=><svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M17.7 7.7a2.5 2.5 0 1 1 1.8 4.3H2"/><path d="M9.6 4.6A2 2 0 1 1 11 8H2"/><path d="M12.6 19.4A2 2 0 1 0 14 16H2"/></svg>,
      Heart: (p)=><svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M22 12h-4l-3 9L9 3l-3 9H2"/></svg>,
      Droplet: (p)=><svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M12 22a7 7 0 0 0 7-7c0-2-2-3-4-3l-3-3-3 3c-2 0-4 1-4 3a7 7 0 0 0 7 7z"/></svg>,
      Thermometer: (p)=><svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z"/></svg>,
      Stomach: (p)=><svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M19 20H5a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2Z"/><path d="M12 11h4"/><path d="M12 16h4"/><path d="M8 11h.01"/><path d="M8 16h.01"/></svg>,
      Bed: (p)=><svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M2 4v16"/><path d="M2 8h18a2 2 0 0 1 2 2v10"/><path d="M2 17h20"/><path d="M6 8v9"/></svg>,
      Alert: (p)=><svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/><line x1="12" y1="9" x2="12" y2="13"/><line x1="12" y1="17" x2="12.01" y2="17"/></svg>,
      Clipboard: (p)=><svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><rect width="8" height="4" x="8" y="2" rx="1" ry="1"/><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"/><path d="M12 11h4"/><path d="M12 16h4"/></svg>,
      User: (p)=><svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>,
      Logout: (p)=><svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/><polyline points="16 17 21 12 16 7"/><line x1="21" y1="12" x2="9" y2="12"/></svg>
    };
    const Icon = ({n, c}) => { const I = Icons[n]; return I ? <I className={c} /> : null; };

    // --- COMPONENTES UI DASHBOARD ---
    const BedCard = ({ data, onClick }) => {
      const isUCIN = data.unidad === 'UCIN';
      const colors = { 'Crítico': 'border-l-red-500 bg-red-100 text-red-700', 'Estable': 'border-l-emerald-500 bg-emerald-100 text-emerald-700', 'Alerta': 'border-l-amber-500 bg-amber-100 text-amber-700' };
      const status = colors[data.estado] || colors['Alerta'];
      const unitClass = isUCIN ? 'bg-purple-100 text-purple-700' : 'bg-blue-100 text-blue-700';
      return (
        <div onClick={() => onClick(data)} className={`relative glass-card rounded-xl shadow-sm hover:shadow-2xl hover:-translate-y-1 transition-all p-5 cursor-pointer border border-slate-200 border-l-4 ${status.split(' ')[0]}`}>
          <div className="flex justify-between items-start mb-2">
             <div className="flex items-center gap-3">
               <div className="bg-slate-50 p-2 rounded-lg text-slate-400"><Icon n="Bed" c="w-6 h-6"/></div>
               <div><h3 className="text-xl font-black text-slate-800 leading-none">Cama {data.numero_cama}</h3><span className={`text-[10px] font-black px-2 py-0.5 rounded uppercase ${unitClass}`}>{data.unidad}</span></div>
             </div>
             <span className={`px-2 py-1 rounded text-xs font-bold uppercase ${status.substring(status.indexOf(' ')+1)}`}>{data.estado}</span>
          </div>
          <div className="flex items-center gap-2 text-xs font-bold text-slate-500 mb-3 bg-slate-50 p-1.5 rounded-lg border border-slate-100">
             <span className="flex items-center gap-1"><Icon n="User" c="w-3 h-3"/> {data.edad} años</span><span className="text-slate-300">|</span><span>Día {data.dias_estancia}</span>
          </div>
          <div><p className="text-xs text-slate-400 font-bold uppercase">Paciente</p><p className="text-2xl font-black text-slate-700 truncate">{data.paciente_id}</p></div>
          {data.alertas && <div className="mt-3 flex items-center gap-2 text-red-600 bg-red-50 px-2 py-1 rounded"><Icon n="Alert" c="w-4 h-4 animate-pulse"/><span className="text-xs font-bold">ATENCIÓN</span></div>}
        </div>
      );
    };

    const Section = ({ i, t, txt, col }) => (
      <div className="bg-white/80 p-4 rounded-2xl border border-slate-100 shadow-sm backdrop-blur-sm">
        <div className="flex items-center gap-2 mb-2"><div className={`p-2 rounded-lg ${col}`}><Icon n={i} c="w-5 h-5"/></div><h4 className="text-xs font-bold text-slate-500 uppercase">{t}</h4></div>
        <p className="text-sm font-medium text-slate-700 pl-10 leading-relaxed">{txt || "Sin datos."}</p>
      </div>
    );

    const Modal = ({ p, onClose }) => {
      if(!p) return null;
      const isUCIN = p.unidad === 'UCIN';
      const headCol = isUCIN ? 'bg-purple-600' : 'bg-blue-600';
      return (
        <div className="fixed inset-0 modal-backdrop flex items-center justify-center p-4 z-50" onClick={onClose}>
          <div className="bg-slate-50 w-full max-w-6xl max-h-[95vh] overflow-y-auto rounded-3xl shadow-2xl" onClick={e=>e.stopPropagation()}>
            <div className="bg-white p-6 border-b border-slate-100 flex justify-between items-center sticky top-0 z-10 shadow-sm">
               <div className="flex items-center gap-4">
                 <div className={`h-14 w-14 ${headCol} rounded-xl flex items-center justify-center text-white font-black text-2xl shadow-md`}>{p.numero_cama}</div>
                 <div>
                    <h2 className="text-3xl font-black text-slate-800 tracking-tight">{p.paciente_id}</h2>
                    <div className="flex items-center gap-3 text-slate-500 font-bold text-sm mt-1">
                        <span className="bg-slate-100 px-2 py-0.5 rounded text-slate-600">{p.sexo}</span>
                        <span>{p.edad} años</span><span className="text-slate-300">•</span><span>Estancia: Día {p.dias_estancia}</span>
                    </div>
                 </div>
               </div>
               <button onClick={onClose} className="px-5 py-2.5 bg-slate-100 rounded-xl font-bold text-slate-600 hover:bg-slate-200 transition-colors">Esc Cerrar</button>
            </div>
            <div className="p-6 md:p-8 space-y-6">
               {p.antecedentes && p.antecedentes !== "?" && <div className="bg-slate-100/80 p-5 rounded-2xl border border-slate-200"><h3 className="text-xs font-black text-slate-400 uppercase tracking-widest mb-2">Antecedentes Personales (AP)</h3><p className="text-base font-medium text-slate-700 italic">{p.antecedentes}</p></div>}
               <div className={`p-1 rounded-2xl shadow-sm bg-gradient-to-r ${isUCIN ? 'from-purple-500 to-purple-400' : 'from-blue-500 to-blue-400'}`}><div className="bg-white p-5 rounded-xl"><div className="flex gap-2 mb-2 items-center text-slate-800"><Icon n="Clipboard" c="w-6 h-6"/><span className="font-black uppercase tracking-wide">Plan Terapéutico</span></div><p className="text-lg font-medium pl-8 leading-relaxed text-slate-800">{p.plan}</p></div></div>
               <div className="grid grid-cols-1 md:grid-cols-3 gap-5">
                 <Section i="Brain" t="Neurológico" txt={p.sistemas.neurologico} col="bg-indigo-100 text-indigo-600"/>
                 <Section i="Wind" t="Respiratorio" txt={p.sistemas.respiratorio} col="bg-sky-100 text-sky-600"/>
                 <Section i="Heart" t="Hemodinámico" txt={p.sistemas.hemodinamico} col="bg-rose-100 text-rose-600"/>
                 <Section i="Droplet" t="Renal" txt={p.sistemas.renal} col="bg-amber-100 text-amber-600"/>
                 <Section i="Thermometer" t="Infeccioso" txt={p.sistemas.infeccioso} col="bg-purple-100 text-purple-600"/>
                 <Section i="Stomach" t="Digestivo" txt={p.sistemas.digestivo} col="bg-lime-100 text-lime-600"/>
               </div>
            </div>
          </div>
        </div>
      );
    };

    // --- COMPONENTE PRINCIPAL (GESTIÓN DE SESIÓN) ---
    const App = () => {
      const [isLoggedIn, setIsLoggedIn] = useState(false);
      const [sel, setSel] = useState(null);

      // Al iniciar, miramos si ya estaba logueado en esta sesión para no pedir clave al recargar
      useEffect(() => {
        const session = sessionStorage.getItem("uci_auth");
        if (session === "true") setIsLoggedIn(true);
      }, []);

      const handleLoginSuccess = () => {
        setIsLoggedIn(true);
        sessionStorage.setItem("uci_auth", "true"); // Guarda la sesión mientras no cierren el navegador
      };
      
      const handleLogout = () => {
        setIsLoggedIn(false);
        setSel(null);
        sessionStorage.removeItem("uci_auth");
      };

      // Si no está logueado, mostramos SOLO la pantalla de Login
      if (!isLoggedIn) {
        return <LoginScreen onLogin={handleLoginSuccess} />;
      }

      // Si está logueado, mostramos el Dashboard normal
      const reas = PATIENTS.filter(p=>p.unidad==='REA');
      const ucins = PATIENTS.filter(p=>p.unidad==='UCIN');
      
      return (
        <div className="min-h-screen p-6 md:p-10 max-w-[1920px] mx-auto">
           <header className="mb-10 flex flex-col md:flex-row justify-between items-end gap-4">
              <div><h1 className="text-5xl font-black text-slate-800 tracking-tighter mb-2">UCI Quirúrgica <span className="text-blue-600">Dashboard</span></h1><p className="text-slate-500 font-medium">Vista clínica en tiempo real • REA + UCIN</p></div>
              <div className="flex gap-4 items-center">
                <div className="bg-white px-4 py-2 rounded-xl shadow-sm border border-slate-100 text-sm font-bold text-slate-400">Act: {new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})}</div>
                <button onClick={handleLogout} className="bg-red-50 hover:bg-red-100 text-red-600 p-2 rounded-xl transition-colors" title="Cerrar sesión"><Icon n="Logout" c="w-6 h-6"/></button>
              </div>
           </header>
           {reas.length>0 && <div className="mb-12"><h2 className="text-2xl font-black text-blue-900 mb-6 flex items-center gap-2"><span className="w-2 h-8 bg-blue-500 rounded-full"></span>REA</h2><div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5 gap-6">{reas.map(p=><BedCard key={p.id} data={p} onClick={setSel}/>)}</div></div>}
           {ucins.length>0 && <div><h2 className="text-2xl font-black text-purple-900 mb-6 flex items-center gap-2"><span className="w-2 h-8 bg-purple-500 rounded-full"></span>UCIN</h2><div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5 gap-6">{ucins.map(p=><BedCard key={p.id} data={p} onClick={setSel}/>)}</div></div>}
           {sel && <Modal p={sel} onClose={()=>setSel(null)}/>}
        </div>
      );
    };

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<App />);
  </script>
</body>
</html>