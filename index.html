<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />
  
  <title>Acceso UCI</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <style>
    body { background-color: #f0f4f8; background-image: radial-gradient(#cbd5e1 1px, transparent 1px); background-size: 24px 24px; font-family: system-ui, sans-serif; }
    .glass-card { background: linear-gradient(145deg, #ffffff, #f8fafc); }
    .modal-backdrop { background-color: rgba(15, 23, 42, 0.8); backdrop-filter: blur(8px); }
    .login-glass { background: rgba(255, 255, 255, 0.7); backdrop-filter: blur(20px); border: 1px solid rgba(255, 255, 255, 0.5); }
    ::-webkit-scrollbar { width: 8px; } ::-webkit-scrollbar-thumb { background: #94a3b8; border-radius: 4px; }
  </style>
  <script> tailwind.config = { theme: { extend: { colors: { lime: { 100: '#ecfccb', 600: '#65a30d' } } } } } </script>
</head>
<body>
  <div id="root"></div>
  <script type="text/babel">
    const { useState, useEffect } = React;
    const PATIENTS = [
  {
    "id": "rea-1",
    "numero_cama": "1",
    "unidad": "REA",
    "estado": "Crítico",
    "edad": "77",
    "sexo": "M",
    "dias_estancia": "14º día de ingreso",
    "antecedentes": "Enfermedad coronaria de 3 vasos con doble bypass previo. RAM a medicación que genere hemólisis por déficit de G6PDH. FEVI moderadamente deprimida con acinesia de múltiples segmentos. IM leve funcional. IAMSEST, insuficiencia respiratoria aguda, shock cardiogénico postinfarto con BIAC. Sospecha de CIV septal postinfarto.",
    "plan": "Familia informada de situación crítica y mal pronóstico. Control hemodinámico, mantener BIAC. Vigilar hemólisis por déficit de G6PDH. Reponer Fósforo y Potasio. Furosemida 20mg/8h iv buscando balances ligeramente negativos. Pautar Budesonida + Atrovent. Iniciar Linezolid iv.",
    "sistemas": {
      "neuro": "Sedada con midazolam y morfina. BIS 45-55. Pupilas isocóricas, lentas. Requiere bolos puntuales de cisatracurio para adaptación a VMI.",
      "hemodinamica": "Inestable hemodinámicamente. PC de Noradrenalina en descenso (0.9 mcg/kg/min). Episodios de FA con RVR que requirieron CVE. PC de Amiodarona por rachas de FA. TA 125/38 mmHg, FC RS 75-85 lpm (con rachas de FA). MCP epicárdico a 60 lpm (compite con ritmo propio). BIAC funcionando 1:1, disparado por ECG, con adecuada aumentación diastólica y sincronización. Soplo pansistólico mecánico por BIAC. Troponinas en descenso (1250). Lactato normalizado (1.3). Ecocardio: Mejoría de contractilidad en cara anterior y anterolateral, persiste acinesia inferiormediobasal y septoposteriorapical, hipocinesia anterolateralapical. FEVI bp 40%. VD no dilatado, buena FS. AI ligeramente dilatada. Patrón restrictivo de llenado. IM moderada-severa (ORE 0.29 cm2). Derrame pericárdico leve (7mm) sin compromiso.",
      "hemostasia_coagulacion": "Hb 9.9 (estable), HCT 31.9%. Plaquetas 312.000. Coagulación: IQ 65%, INR 1.33. AAS 450mg/d y Clopidogrel 75mg/d tras ACTP con stents. Tromboprofilaxis con enoxaparina 40mg c/24h. Vigilar hemólisis por déficit de G6PD.",
      "respiratorio": "IOT (tubo 7.5 a 19 cm), aspiración subglótica con salida hemática. VMI AC PRVC: FiO2 45%, VT 425, FR 14, PEEP 5, PPico 20-35. Gasometría arterial: pH 7.36, pCO2 42, pO2 109, HCO3 23.7, lactato 1.3. Roncus dispersos en ambos hemitórax. Rx tórax: mayor derrame pleural derecho. FBC: grandes coágulos en LID (extraídos por Neumo), luego mucosidad espesa y purulenta. Pautado budesonida + atrovent.",
      "renal": "Diuresis forzadas con Furosemida 20mg/8h con buena respuesta, balance equilibrado. Edemas en zonas declives. Función renal conservada (U 29, Cr 0.43). Ionograma: Na 136, hipoK 3.0, Cl 105, Ca corregido 9.4, hipoP 1.5, Mg 1.81. Reposición de P y K. Furosemida 20mg/8h iv, buscar balances ligeramente negativos.",
      "digestivo": "Abdomen blando y depresible, sin peristaltismo auscultable. Click del BCPIAo. SNG con débito escaso. Bilirrubina T 0.97, GOT 40, GPT 55, GGT 47, FA 98. Nutrición parenteral desde ayer.",
      "infeccioso": "Afebril. Leucocitos 14.000, PCR 28. Secreciones purulentas. En tratamiento con Tazocel. Cultivos BAS: cocos gram +. Vías: VYD (introductor swan) 14d, Arteria femoral derecha 14d, VYI 4d. Inicio Linezolid iv."
    }
  },
  {
    "id": "rea-3",
    "numero_cama": "3",
    "unidad": "REA",
    "estado": "Crítico",
    "edad": "59",
    "sexo": "H",
    "dias_estancia": "9º día postoperatorio",
    "antecedentes": "RAM Betalactámicos (shock anafiláctico). HTA, DLP. TVP recidivante por Déficit de proteína C. VIH C3 con pérdida de visión por coriorretinitis (CMV y Toxoplasma). Condilomas anales, carcinoma epidermoide perianal estadio IIA (actualmente T3). Ingresó por perforación intestinal e isquemia de colon, reintervenido.",
    "plan": "Aumentar dosis de clexane a 60mg/12h. Realizar angio-TC torácico para descartar TEP y TAC abdominal para descartar complicación. Destete progresivo. Reponer fosfato. Si se administra medicación/aportes con fluidoterapia, que sea con suero glucosado. Balances neutros. Vigilancia de enzimas de colestasis. Nuevos niveles de vancomicina el martes 10/02/26. No Linezolid por plaquetopenia.",
    "sistemas": {
      "neuro": "Sedoanalgesiado con propofol y morfina (RASS -3/-4). BIS ~60. Pupilas anisocóricas (I>D), reactivas (AP: coriorretinitis). No focalidades neurológicas aparentes.",
      "hemodinamica": "TA 137/59 sin aminas. En RS a 90 lpm con perfusión de Amiodarona. Pulsos periféricos presentes y simétricos, buena perfusión distal. Ecocardio (09/02): buena contractilidad de visu. Cava 1.6 cm colapsable. Hb 9.7 (estable), Hto 30. Lactato normalizado (1.7).",
      "hemostasia_coagulacion": "Plaquetopenia previa (mínimo 14.000), mejoría progresiva actual (116.000). 4 pools de plaquetas transfundidos. Coagulación levemente alterada (IQ 66%, APTTr 1.01, INR 1.33). No sangrados activos. Tromboprofilaxis con medias de compresión intermitente + clexane 60mg/24h. Dosis de clexane aumentada a 60mg/12 horas.",
      "respiratorio": "Intento de extubación hace 72h con reIOT precoz por bajo nivel de conciencia. IOT en SIMV con FiO2 0.7, VT 500, FR 16, PEEP 10, PS 15. Realiza 1-2 respiraciones espontáneas/min. Escasas secreciones mucosas. Pigtail derecho retirado. Fibroscopia: poco moco distal. Angio-TC torácico (09/02): No TEP. Opacidades de espacio aéreo en ambos lóbulos superiores y pirámides basales con impactaciones mucosas (posible aspirativo). Pequeño derrame pleural izquierdo con atelectasia pasiva. Tubo endotraqueal a 2 cm de carina. Granulomas calcificados (secuelas tuberculosas). AP: MVC con roncus aislados. Rx tórax: aumento de densidad en base izquierda. GSA: pH 7.35, pCO2 44, pO2 115, HCO3 25.7.",
      "renal": "Sondaje vesical. Buenas diuresis, función renal normal (previamente con furosemida). HiperNa/hipoK (previamente), ahora hiperNa (150) tratada con agua por SNG (retirada actocortina). No edemas. Urea 111, Cr 0.58, FG >90, Na 150, K 4.1, P 2.2, Mg 2.03. Pautada agua libre por SNG. Reposición de fosfato.",
      "digestivo": "SNG con débito seroso escaso (50 cc). NPT ajustada. Glucemias bien controladas. Ileostomía mínimamente productiva (60 cc). Abdomen blando y depresible, peristaltismo disminuido. Pequeño hematoma en hipogastrio. Herida quirúrgica e ileostomía con buen aspecto. Drenaje MP lento. Glucosa 162, Proteínas 5.2, bilirrubina 0.59, GOT 30, GPT 12, GGT 320 (aumento progresivo), FA 321 (aumento progresivo). Tratamiento con omeprazol 40mg/12h. Vigilancia de enzimas de colestasis.",
      "infeccioso": "Afebril. Tratamiento antibiótico con Aztreonam + Metronidazol + Vancomicina + Anidulafungina por shock séptico post peritonitis. Finalizada hidrocortisona. Mejoría de leucopenia severa inicial, ahora con leucocitosis estable (23.000) y PCR alta (14). Cultivos líquido abdominal: Escherichia coli R, Bacteroides stercoris S, Clostridium innocuum, Candida tropicalis. En segunda intervención: Enterococcus faecium multisensible, Escherichia coli R, Candida tropicalis. Vías: Yugular dcha 11d, Radial dcha 9d, S. vesical 11d. Nuevos niveles de vancomicina el martes 10/02/26. No linezolid por plaquetopenia."
    }
  },
  {
    "id": "rea-4",
    "numero_cama": "4",
    "unidad": "REA",
    "estado": "Alerta",
    "edad": "40",
    "sexo": "H",
    "dias_estancia": "19º día en REA/UCCQ",
    "antecedentes": "Obesidad, SAOS, Hiperuricemia. Ingreso por TCE grave (30/12/25) con craniectomía descompresiva y posterior cerebritis. HTA, DM, DLP negados.",
    "plan": "Intentar reducir perfusión de propofol. Nuevos niveles de Keppra el viernes 13/02. Continuar con O2 en T. Continuar misma pauta de agua libre. Vigilancia de colestasis disociada. Ajustar antibioterapia a función renal: Ceftarolina 600mg/12h y Ceftazidima-Avibactam 2g/8h.",
    "sistemas": {
      "neuro": "Mejor agitación con propofol 1% a 10 ml/h. No ha presentado episodios epileptiformes desde el 31/01. PIC normal. Moviliza las 4 extremidades. Apertura ocular espontánea, pero no conecta a la llamada ni obedece órdenes. Tratamiento con clonidina, haloperidol, quetiapina, clonazepam, propranolol y zuclopentixol. Antiepiléptico: Keppra (niveles en rango) y Lacosamida.",
      "hemodinamica": "Hemodinámicamente estable sin requerimiento de aminas (TAM >70mmHg). RS en monitor con FC en torno a 70-80lpm. Rítmico, sin soplos audibles. Lactato 1.6.",
      "hemostasia_coagulacion": "No signos ni síntomas sugestivos de sangrado. Tromboprofilaxis con clexane 80mg/24h. Coagulación en rango. Plaquetas: 396.000. Hb: 8.7 (estable). Última transfusión el 25/01 (3 HC).",
      "respiratorio": "Portador de TQT Shiley 8.5. Desde el 05/02 en O2 en T, bien tolerada. Eupneico, con buena mecánica ventilatoria y SatO2 100%. Moviliza secreciones (abundantes). En tratamiento con nebulizaciones (ipratropio y budesonida). AP: MVC, sibilantes espiratorios. Gasometría arterial: pH 7.34, pO2 131, pCO2 45, HCO3 24.3. Rx tórax (09/02/26): persiste congestión hiliar. BAS (29/1/26): Candida tropicalis + Enterobacter hormaechei (carbapenem resistente).",
      "renal": "Diuresis conservada (2950ml) a través de sondaje urinario, sin apoyo diurético. Balance -592 en 24h. Función renal alterada (AKI-3) en resolución (FG 59, Cr 1.47). Último ciclo de diálisis el 24/01. Ionograma en rango. No presencia de edemas en zonas declives. Continúa misma pauta de agua libre.",
      "digestivo": "SNG con nutrición enteral (Low protein) a 60ml/h, con buena tolerancia y sin retenciones. Glucemias bien controladas sin requerimiento de insulina. Realizando deposiciones tras pautar macrogol. GOT y GPT en rango. Descenso de enzimas de colestasis (GGT 566, FA 202). Abdomen blando y depresible, sin signos de peritonismo, peristaltismo conservado. RHA +. Vigilancia de colestasis disociada.",
      "infeccioso": "Aislamiento de contacto. Afebril. Tratamiento antibiótico con Ceftarolina 300mg/12h + Ceftazidima-Avibactam 1250mg/8h y Fluconazol 400mg/24h. No aspecto de sepsis ni aumento de parámetros infecciosos. Sin elevación de RFA. Herida quirúrgica: sin material purulento. Cultivos relevantes: SAMS, S. epidermidis, Proteus mirabilis BLEE, Enterobacter hormaechei (carbapenem resistente), Candida tropicalis. Vías: V femoral izquierda (14 días), ARD (7/02), PICC MSD (07/02)."
    }
  },
  {
    "id": "rea-6",
    "numero_cama": "6",
    "unidad": "REA",
    "estado": "Crítico",
    "edad": "69",
    "sexo": "M",
    "dias_estancia": "Primer día de estancia",
    "antecedentes": "HTA, DLP, DM2. Exfumadora. Meralgia parestésica. Aneurisma de aorta ascendente y arco aórtico severo (Dmax 7.6 x 7.6cm).",
    "plan": "Control postoperatorio inmediato en UCIQ tras cirugía cardíaca (tubo supracoronario). Mantener sedación e IOT. Monitorizar hemodinámica y parámetros de coagulación. Continuar con dopamina a dosis bajas si es necesario. Manejo del dolor con catéter epidural.",
    "sistemas": {
      "neuro": "Bajo sedación con IOT. Protección cerebral intraoperatoria con propofol y metilprednisolona.",
      "hemodinamica": "Ingresa a quirófano estable (TA 115/65mmHg, FC 65 lpm en RS, SatO2 96%). Monitorización invasiva (PAI, BIS, INVOS, Swan-Ganz, ETE). Vías: VVP 16G MSI, VVC yugular interna derecha con Swan-Ganz, Arterial (femoral derecha + radial derecha). Entrada y salida de CEC sin incidencias. Apoyo de dopamina a dosis bajas (<3 mcg/kg/min). En ritmo de MCP en VVI a 70 lpm, recuperando RS 70-75 lpm. Traslado a UCIQ con IOT y dopamina a dosis bajas.",
      "hemostasia_coagulacion": "Heparinización (250mg) intraoperatoria. Transfusión de 2 unidades de CH, 2 PF, 2 pool de plaquetas y 2g de fibrinógeno durante la cirugía.",
      "respiratorio": "Intubación orotraqueal (TET nº 7, Cormack-Lehane IIa), ventilación Han I. Traslado a UCIQ bajo sedación con IOT.",
      "renal": "Diuresis horaria monitorizada.",
      "digestivo": "No detalles específicos de sistema, se asume monitorización postoperatoria estándar.",
      "infeccioso": "No detalles específicos de sistema, se asume monitorización postoperatoria estándar.",
      "dolor": "Catéter epidural a nivel L1-L2 (distancia espacio epidural 6cm, catéter 10cm). Bolo inicial con levobupivacaína 0.5% y perfusión continua durante la intervención quirúrgica."
    }
  },
  {
    "id": "rea-7",
    "numero_cama": "7",
    "unidad": "REA",
    "estado": "Crítico",
    "edad": "77",
    "sexo": "H",
    "dias_estancia": "Primer día de evolución",
    "antecedentes": "Ex-fumador (75 años-paquete). DM II, DLP. HBP. Gota. EPOC leve. Anemia ferropénica. GIST estadio IV (metástasis hepáticas y peritoneales) en tto con imatinib. AF: hermano fallecido de cáncer gástrico. IQx cataratas y rodilla.",
    "plan": "Mantener soporte vital avanzado (IOT, NA, fluidos). Monitorizar hemodinámica, función renal y perfusión. Reponer hemoderivados/electrolitos según necesidad. Continuar antibioterapia (Meropenem + Linezolid). Enviar muestras para cultivo.",
    "sistemas": {
      "neuro": "Consciente y orientado al llegar a quirófano. Posterior IOT de secuencia rápida y traslado a REA bajo sedación.",
      "hemodinamica": "Ingresa con regular estado general, hipotenso (TA 96/40mmHg), taquicárdico (FC 95lpm). Inestabilidad hemodinámica grave. Noradrenalina a 18ml/h para TAM 65mmHg, FC 110lpm. Mala perfusión periférica, livideces distales, no capta saturación. Intraoperatoriamente: reposición con albúmina, cristaloides, 2 CH, cloruro cálcico, amchafibrin, bicarbonato. Oligoanuria.",
      "hemostasia_coagulacion": "Anemización intraoperatoria (Hb 7.7gr/dl). Transfusión de 2 CH. Administración de amchafibrin.",
      "respiratorio": "Sensación disneica (48h). IOT de secuencia rápida. Traslado a REANIMACIÓN IOT. No capta saturación periférica por mala perfusión.",
      "renal": "Oligoanuria durante toda la cirugía. Sondaje vesical.",
      "digestivo": "Dolor abdominal generalizado (dos semanas), empeorado (24h). Distensión abdominal, náuseas, molestias abdominales. Laparotomía: abundante líquido ascítico maloliente (~2L). Perforación a nivel de sigma por masa tumoral (GIST). Sigmoidectomía y resección de ileon. Anastomosis L-L, colostomía en FII. Drenaje Blake en espacio de Douglas. SNG.",
      "infeccioso": "Shock séptico de origen abdominal. Abundante líquido ascítico maloliente. Antibioterapia inicial con Tazocel, ampliada a Meropenem + Linezolid. Cursadas muestras para cultivo.",
      "metabolico": "DM II en tratamiento con ADO. Acidosis metabólica intraoperatoria."
    }
  },
  {
    "id": "rea-9",
    "numero_cama": "9",
    "unidad": "REA",
    "estado": "Alerta",
    "edad": "67",
    "sexo": "H",
    "dias_estancia": "34º día de ingreso en UCCQ",
    "antecedentes": "RAM a Petidina. Fumador, HTA, DLP. Adenocarcinoma Pulmón LSD (2010) con bilobectomía. AAA infrarrenal + A. Iliaca común izqda (EVAR 2022), reintervención por extensión de EVAR + A. ilíaca derecha por migración (2025). ERC en prediálisis. Estenosis renal severa bilateral.",
    "plan": "Retirar Olanzapina IM y cambiar por Quetiapina nocturna. Alternar periodos con válvula fonatoria durante el día. Contactar con el párroco del hospital para asistencia religiosa. Mantener dieta oral sin progresar. Continuar O2T y PS. No progresar más en deglución por ahora. Retirar Anidulafungina y Ceftolozano/Tazobactam; si empeoramiento, iniciar Cefiderocol (se impresiona de colonización).",
    "sistemas": {
      "neuro": "Consciente y orientado, colaborador. Precisa Propofol por agitación nocturna y reconexión a PS. Días previos requirió Dexdor. Solicita asistencia religiosa.",
      "hemodinamica": "Estable con tendencia a la HTA (TA 140/70 mmHg, RS 75 lpm). Tratamiento con Bisoprolol. Doxazosina y Amlodipino en SOS. Rítmico, sin soplos audibles. Buen relleno capilar, MID sin cambios. Lactato 1.7.",
      "hemostasia_coagulacion": "Hb estable en 8.4 (24h desde última transfusión). Plaquetas y coagulación convencional normales. AAS 100 mg/d vo. Anticoagulación a dosis profilácticas con Tinzaparina 4.500U/24h.",
      "respiratorio": "TQT percutánea. Alterna O2T 5L con PS 10/6 durante la noche por fatiga y agitación. Sentado en SARA a diario. AP: MVC con disminución MV en base derecha, roncus dispersos. Gasometría arterial (PS): pH 7.42, pCO2 39, pO2 114, HCO3 25.3. Rx Tórax: similar a días previos. Test de deshinchado de neumo bien tolerado, se conecta a válvula fonatoria sin incidencias. Buena fonación, prueba de deglución de sorbo de agua sin incidencias.",
      "renal": "72h desde última HD convencional, sin criterios metabólicos ni de volumen. Diuresis 4100 ml con apoyo de Furosemida, balance -3114 ml. Peso 88 kg. ERC en prediálisis, ahora en HD intermitente. Seguimiento conjunto con Nefrología.",
      "digestivo": "Desde hace 5 días tolera cremas y yogures, pero poco apetente. NPT. Abdomen muy distendido de forma habitual, continúa haciendo deposiciones. No porta SNG. Enzimas hepáticas normales. TAC (22/1): No aumento de hematoma retroperitoneal ni saco aneurismático, moderada distensión intestinal sin obstrucción. Colonoscopia (29/01): Compatible con signos de colitis isquémica.",
      "infeccioso": "Afebril. Marcadores infecciosos en descenso (PCR 9.5, Leucocitos 16.5). En tratamiento con Ceftolozano/Tazobactam y Anidulafungina (se retirarán por sospecha de colonización). Cultivos relevantes: Pseudomona Aeruginosa CR (S a cefto/tzb), C. glabrata, C. albicans, Staphylococcus epidermidis R line. Impresiona de colonización."
    }
  },
  {
    "id": "rea-10",
    "numero_cama": "10",
    "unidad": "REA",
    "estado": "Alerta",
    "edad": "61",
    "sexo": "M",
    "dias_estancia": "4º día de ingreso",
    "antecedentes": "Espondilolistesis de alto grado L5-S1 con pseudoartrosis y escoliosis de la charnela toracolumbar. IQx: Ampliación fijación proximal hasta T9 y fijación distal a iliacos. Actualmente, necesidad de noradrenalina, tendencia a sangrado por herida quirúrgica con colección (seroma/fuga de LCR?).",
    "plan": "Pautar Metamizol 2g/8h si precisa. Mantener PC morfina 1mg/h. Vigilancia de herida quirúrgica, signos de sangrado, y aparición de cefalea. Gasometría arterial de control. Mantener dosis de Cefazolina por presencia de colección. Progresión de dieta. Revisión de herida quirúrgica, vigilar fiebre y la colección. Pendiente de control de evolución neurológica. Destete de aminas. Tratamiento de la anemia.",
    "sistemas": {
      "neuro": "Consciente, orientada y colaboradora, sin focalidad neurológica (GCS: 15). Refiere dolor a pesar de PC de morfina a 1mg/h. Retirado bomba elastomérica. Drenajes tipo Redón con débito serohemático (350 cc ayer). AngioTAC (06/02): Colección postquirúrgica retroespinal de 18,6 x 5,8 x 3,8 cm, sin focos de sangrado activo.",
      "hemodinamica": "Necesidad de Noradrenalina a 2 ml/h. TA 114/79 (87) mmHg. FC: 77 /min, en RS. Lactato: 1.1. Tonos rítmicos, sin soplos.",
      "hemostasia_coagulacion": "Coagulación normal, Plaquetas: 258.000, Hgb: 9.7 (9.5) g/dl, HCT: 29.5 %. Profilaxis antitrombótica con medias de compresión neumática. Vigilancia de signos de sangrado y aparición de cefalea (posible fuga de LCR).",
      "respiratorio": "Eupneica con gafas nasales 2L O2. Gasometría arterial: pH: 7.36, pCO2 54 mmHg, pO2 52 mmHg, HCO3 30.5 mmol/l, EB:4.1 mmol/l, lactato: 1.1 mmol/l. Murmullo vesicular conservado, sin estertores patológicos. Rx Tórax (05/02): sin alteraciones significativas.",
      "renal": "Función renal sin alteraciones con iones normales. Diuresis: 4045 cc ayer, Balance: -2356 cc ayer. Diuresis espontáneas.",
      "digestivo": "Abdomen blando y depresible, no doloroso, peristaltismo disminuido. Se inicia la tolerancia a agua con buen control posterior. Glucemia alrededor de 134 mg/dl, sin necesidad de insulina regular. Proteínas totales: 5.4 g/dl. Progresión de dieta.",
      "infeccioso": "Afebril. Leucocitos: 7.720, PCR: 8.4 (en descenso). En tratamiento con Cefazolina. El aspecto del líquido que drena de la herida quirúrgica es más seroso que serohemático. Se realiza limpieza y vigilancia de la herida 6-8 veces al día; hoy el líquido ha sido de menor cuantía."
    }
  },
  {
    "id": "rea-11",
    "numero_cama": "11",
    "unidad": "REA",
    "estado": "Crítico",
    "edad": "75",
    "sexo": "F",
    "dias_estancia": "Primer día de estancia",
    "antecedentes": "Fumadora activa. Cardiopatía isquémica crónica con revascularización percutánea (ACTP y stent en DA media en 2018). IAo moderada, IM moderada funcional y aneurisma de aorta ascendente de 60mm.",
    "plan": "Control postoperatorio inmediato en UCIQ tras sustitución valvular aórtica + tubo de aorta ascendente supracoronario. Mantener sedación e IOT. Monitorizar hemodinámica y parámetros vitales. Evaluar requerimientos de aminas y hemoderivados. Evaluación de función cardíaca y respiratoria.",
    "sistemas": {
      "neuro": "Consciente y orientada al ingreso en quirófano. IOT bajo sedación para traslado a la Unidad de Reanimación.",
      "hemodinamica": "Ingresa C y O. TA: 170/55 mmHg. FC: 55 lpm. SpO2: 89%. Catéter arterial: ARI + AFD. Monitorización: PAI, diuresis horaria, PVC, ETE. Heparinización: 150 mg. Entrada y salida de CEC sin incidencias. Requerimientos de aminas y hemoderivados no especificados aún.",
      "hemostasia_coagulacion": "Heparinización intraoperatoria (150 mg). No se especifican otros detalles sobre hemoderivados post-CEC.",
      "respiratorio": "Preoxigenación. Inducción con fentanilo, etomidato y rocuronio. Laringoscopia Cormack I, TET: 7 mm. Mantenimiento con O2/Aire, sevofluorano, rocuronio y remifenta en PC. Traslado a la Unidad de Reanimación en situación de IOT.",
      "renal": "Diuresis horaria monitorizada.",
      "digestivo": "No se especifican detalles del sistema digestivo en la nota de ingreso.",
      "infeccioso": "No se especifican detalles del sistema infeccioso en la nota de ingreso."
    }
  }
];
    const PASSWORD_CORRECTA = "misbalare2720"; // La contraseña se inyecta aquí desde el script

    // --- COMPONENTE DE LOGIN ---
    const LoginScreen = ({ onLogin }) => {
      const [input, setInput] = useState("");
      const [error, setError] = useState(false);

      const handleSubmit = (e) => {
        e.preventDefault();
        // Convertimos a minúsculas para que no importe si escriben "UCI" o "uci"
        if (input.toLowerCase() === PASSWORD_CORRECTA.toLowerCase()) {
          onLogin();
        } else {
          setError(true);
          setInput("");
        }
      };

      return (
        <div className="min-h-screen flex items-center justify-center p-4">
          <div className="login-glass p-10 rounded-3xl shadow-2xl max-w-sm w-full text-center">
            <div className="mb-6 inline-flex p-4 bg-blue-600 rounded-2xl text-white shadow-lg shadow-blue-500/30">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="w-8 h-8"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect><path d="M7 11V7a5 5 0 0 1 10 0v4"></path></svg>
            </div>
            <h1 className="text-2xl font-black text-slate-800 mb-2">Acceso Restringido</h1>
            <p className="text-slate-500 text-sm mb-8 font-medium">Dashboard Clínico UCI Quirúrgica</p>
            
            <form onSubmit={handleSubmit} className="space-y-4">
              <input 
                type="password" 
                value={input}
                onChange={(e) => {setInput(e.target.value); setError(false);}}
                placeholder="Introduce la clave..."
                className="w-full px-5 py-3 rounded-xl bg-white/50 border border-slate-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 outline-none transition-all font-bold text-center text-slate-700 placeholder-slate-400"
                autoFocus
              />
              <button type="submit" className="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 rounded-xl shadow-lg shadow-blue-600/30 transition-all active:scale-95">
                Entrar
              </button>
            </form>
            {error && <p className="mt-4 text-red-500 text-xs font-bold animate-pulse">⛔ Clave incorrecta</p>}
          </div>
        </div>
      );
    };

    // --- ICONOS ---
    const Icons = {
      Brain: (p)=><svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z"/><path d="M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z"/></svg>,
      Wind: (p)=><svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M17.7 7.7a2.5 2.5 0 1 1 1.8 4.3H2"/><path d="M9.6 4.6A2 2 0 1 1 11 8H2"/><path d="M12.6 19.4A2 2 0 1 0 14 16H2"/></svg>,
      Heart: (p)=><svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M22 12h-4l-3 9L9 3l-3 9H2"/></svg>,
      Droplet: (p)=><svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M12 22a7 7 0 0 0 7-7c0-2-2-3-4-3l-3-3-3 3c-2 0-4 1-4 3a7 7 0 0 0 7 7z"/></svg>,
      Thermometer: (p)=><svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z"/></svg>,
      Stomach: (p)=><svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M19 20H5a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2Z"/><path d="M12 11h4"/><path d="M12 16h4"/><path d="M8 11h.01"/><path d="M8 16h.01"/></svg>,
      Bed: (p)=><svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M2 4v16"/><path d="M2 8h18a2 2 0 0 1 2 2v10"/><path d="M2 17h20"/><path d="M6 8v9"/></svg>,
      Alert: (p)=><svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/><line x1="12" y1="9" x2="12" y2="13"/><line x1="12" y1="17" x2="12.01" y2="17"/></svg>,
      Clipboard: (p)=><svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><rect width="8" height="4" x="8" y="2" rx="1" ry="1"/><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"/><path d="M12 11h4"/><path d="M12 16h4"/></svg>,
      User: (p)=><svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>,
      Logout: (p)=><svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/><polyline points="16 17 21 12 16 7"/><line x1="21" y1="12" x2="9" y2="12"/></svg>
    };
    const Icon = ({n, c}) => { const I = Icons[n]; return I ? <I className={c} /> : null; };

    // --- COMPONENTES UI DASHBOARD ---
    const BedCard = ({ data, onClick }) => {
      const isUCIN = data.unidad === 'UCIN';
      const colors = { 'Crítico': 'border-l-red-500 bg-red-100 text-red-700', 'Estable': 'border-l-emerald-500 bg-emerald-100 text-emerald-700', 'Alerta': 'border-l-amber-500 bg-amber-100 text-amber-700' };
      const status = colors[data.estado] || colors['Alerta'];
      const unitClass = isUCIN ? 'bg-purple-100 text-purple-700' : 'bg-blue-100 text-blue-700';
      return (
        <div onClick={() => onClick(data)} className={`relative glass-card rounded-xl shadow-sm hover:shadow-2xl hover:-translate-y-1 transition-all p-5 cursor-pointer border border-slate-200 border-l-4 ${status.split(' ')[0]}`}>
          <div className="flex justify-between items-start mb-2">
             <div className="flex items-center gap-3">
               <div className="bg-slate-50 p-2 rounded-lg text-slate-400"><Icon n="Bed" c="w-6 h-6"/></div>
               <div><h3 className="text-xl font-black text-slate-800 leading-none">Cama {data.numero_cama}</h3><span className={`text-[10px] font-black px-2 py-0.5 rounded uppercase ${unitClass}`}>{data.unidad}</span></div>
             </div>
             <span className={`px-2 py-1 rounded text-xs font-bold uppercase ${status.substring(status.indexOf(' ')+1)}`}>{data.estado}</span>
          </div>
          <div className="flex items-center gap-2 text-xs font-bold text-slate-500 mb-3 bg-slate-50 p-1.5 rounded-lg border border-slate-100">
             <span className="flex items-center gap-1"><Icon n="User" c="w-3 h-3"/> {data.edad} años</span><span className="text-slate-300">|</span><span>Día {data.dias_estancia}</span>
          </div>
          <div><p className="text-xs text-slate-400 font-bold uppercase">Paciente</p><p className="text-2xl font-black text-slate-700 truncate">{data.paciente_id}</p></div>
          {data.alertas && <div className="mt-3 flex items-center gap-2 text-red-600 bg-red-50 px-2 py-1 rounded"><Icon n="Alert" c="w-4 h-4 animate-pulse"/><span className="text-xs font-bold">ATENCIÓN</span></div>}
        </div>
      );
    };

    const Section = ({ i, t, txt, col }) => (
      <div className="bg-white/80 p-4 rounded-2xl border border-slate-100 shadow-sm backdrop-blur-sm">
        <div className="flex items-center gap-2 mb-2"><div className={`p-2 rounded-lg ${col}`}><Icon n={i} c="w-5 h-5"/></div><h4 className="text-xs font-bold text-slate-500 uppercase">{t}</h4></div>
        <p className="text-sm font-medium text-slate-700 pl-10 leading-relaxed">{txt || "Sin datos."}</p>
      </div>
    );

    const Modal = ({ p, onClose }) => {
      if(!p) return null;
      const isUCIN = p.unidad === 'UCIN';
      const headCol = isUCIN ? 'bg-purple-600' : 'bg-blue-600';
      return (
        <div className="fixed inset-0 modal-backdrop flex items-center justify-center p-4 z-50" onClick={onClose}>
          <div className="bg-slate-50 w-full max-w-6xl max-h-[95vh] overflow-y-auto rounded-3xl shadow-2xl" onClick={e=>e.stopPropagation()}>
            <div className="bg-white p-6 border-b border-slate-100 flex justify-between items-center sticky top-0 z-10 shadow-sm">
               <div className="flex items-center gap-4">
                 <div className={`h-14 w-14 ${headCol} rounded-xl flex items-center justify-center text-white font-black text-2xl shadow-md`}>{p.numero_cama}</div>
                 <div>
                    <h2 className="text-3xl font-black text-slate-800 tracking-tight">{p.paciente_id}</h2>
                    <div className="flex items-center gap-3 text-slate-500 font-bold text-sm mt-1">
                        <span className="bg-slate-100 px-2 py-0.5 rounded text-slate-600">{p.sexo}</span>
                        <span>{p.edad} años</span><span className="text-slate-300">•</span><span>Estancia: Día {p.dias_estancia}</span>
                    </div>
                 </div>
               </div>
               <button onClick={onClose} className="px-5 py-2.5 bg-slate-100 rounded-xl font-bold text-slate-600 hover:bg-slate-200 transition-colors">Esc Cerrar</button>
            </div>
            <div className="p-6 md:p-8 space-y-6">
               {p.antecedentes && p.antecedentes !== "?" && <div className="bg-slate-100/80 p-5 rounded-2xl border border-slate-200"><h3 className="text-xs font-black text-slate-400 uppercase tracking-widest mb-2">Antecedentes Personales (AP)</h3><p className="text-base font-medium text-slate-700 italic">{p.antecedentes}</p></div>}
               <div className={`p-1 rounded-2xl shadow-sm bg-gradient-to-r ${isUCIN ? 'from-purple-500 to-purple-400' : 'from-blue-500 to-blue-400'}`}><div className="bg-white p-5 rounded-xl"><div className="flex gap-2 mb-2 items-center text-slate-800"><Icon n="Clipboard" c="w-6 h-6"/><span className="font-black uppercase tracking-wide">Plan Terapéutico</span></div><p className="text-lg font-medium pl-8 leading-relaxed text-slate-800">{p.plan}</p></div></div>
               <div className="grid grid-cols-1 md:grid-cols-3 gap-5">
                 <Section i="Brain" t="Neurológico" txt={p.sistemas.neurologico} col="bg-indigo-100 text-indigo-600"/>
                 <Section i="Wind" t="Respiratorio" txt={p.sistemas.respiratorio} col="bg-sky-100 text-sky-600"/>
                 <Section i="Heart" t="Hemodinámico" txt={p.sistemas.hemodinamico} col="bg-rose-100 text-rose-600"/>
                 <Section i="Droplet" t="Renal" txt={p.sistemas.renal} col="bg-amber-100 text-amber-600"/>
                 <Section i="Thermometer" t="Infeccioso" txt={p.sistemas.infeccioso} col="bg-purple-100 text-purple-600"/>
                 <Section i="Stomach" t="Digestivo" txt={p.sistemas.digestivo} col="bg-lime-100 text-lime-600"/>
               </div>
            </div>
          </div>
        </div>
      );
    };

    // --- COMPONENTE PRINCIPAL (GESTIÓN DE SESIÓN) ---
    const App = () => {
      const [isLoggedIn, setIsLoggedIn] = useState(false);
      const [sel, setSel] = useState(null);

      // Al iniciar, miramos si ya estaba logueado en esta sesión para no pedir clave al recargar
      useEffect(() => {
        const session = sessionStorage.getItem("uci_auth");
        if (session === "true") setIsLoggedIn(true);
      }, []);

      const handleLoginSuccess = () => {
        setIsLoggedIn(true);
        sessionStorage.setItem("uci_auth", "true"); // Guarda la sesión mientras no cierren el navegador
      };
      
      const handleLogout = () => {
        setIsLoggedIn(false);
        setSel(null);
        sessionStorage.removeItem("uci_auth");
      };

      // Si no está logueado, mostramos SOLO la pantalla de Login
      if (!isLoggedIn) {
        return <LoginScreen onLogin={handleLoginSuccess} />;
      }

      // Si está logueado, mostramos el Dashboard normal
      const reas = PATIENTS.filter(p=>p.unidad==='REA');
      const ucins = PATIENTS.filter(p=>p.unidad==='UCIN');
      
      return (
        <div className="min-h-screen p-6 md:p-10 max-w-[1920px] mx-auto">
           <header className="mb-10 flex flex-col md:flex-row justify-between items-end gap-4">
              <div><h1 className="text-5xl font-black text-slate-800 tracking-tighter mb-2">UCI Quirúrgica <span className="text-blue-600">Dashboard</span></h1><p className="text-slate-500 font-medium">Vista clínica en tiempo real • REA + UCIN</p></div>
              <div className="flex gap-4 items-center">
                <div className="bg-white px-4 py-2 rounded-xl shadow-sm border border-slate-100 text-sm font-bold text-slate-400">Act: {new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})}</div>
                <button onClick={handleLogout} className="bg-red-50 hover:bg-red-100 text-red-600 p-2 rounded-xl transition-colors" title="Cerrar sesión"><Icon n="Logout" c="w-6 h-6"/></button>
              </div>
           </header>
           {reas.length>0 && <div className="mb-12"><h2 className="text-2xl font-black text-blue-900 mb-6 flex items-center gap-2"><span className="w-2 h-8 bg-blue-500 rounded-full"></span>REA</h2><div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5 gap-6">{reas.map(p=><BedCard key={p.id} data={p} onClick={setSel}/>)}</div></div>}
           {ucins.length>0 && <div><h2 className="text-2xl font-black text-purple-900 mb-6 flex items-center gap-2"><span className="w-2 h-8 bg-purple-500 rounded-full"></span>UCIN</h2><div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5 gap-6">{ucins.map(p=><BedCard key={p.id} data={p} onClick={setSel}/>)}</div></div>}
           {sel && <Modal p={sel} onClose={()=>setSel(null)}/>}
        </div>
      );
    };

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<App />);
  </script>
</body>
</html>