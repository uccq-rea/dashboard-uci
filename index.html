<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />
  
  <title>Acceso UCI</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <style>
    body { background-color: #f0f4f8; background-image: radial-gradient(#cbd5e1 1px, transparent 1px); background-size: 24px 24px; font-family: system-ui, sans-serif; }
    .glass-card { background: linear-gradient(145deg, #ffffff, #f8fafc); }
    .modal-backdrop { background-color: rgba(15, 23, 42, 0.8); backdrop-filter: blur(8px); }
    .login-glass { background: rgba(255, 255, 255, 0.7); backdrop-filter: blur(20px); border: 1px solid rgba(255, 255, 255, 0.5); }
    ::-webkit-scrollbar { width: 8px; } ::-webkit-scrollbar-thumb { background: #94a3b8; border-radius: 4px; }
  </style>
  <script> tailwind.config = { theme: { extend: { colors: { lime: { 100: '#ecfccb', 600: '#65a30d' } } } } } </script>
</head>
<body>
  <div id="root"></div>
  <script type="text/babel">
    const { useState, useEffect } = React;
    const PATIENTS = [
  {
    "id": "rea-1",
    "numero_cama": "1",
    "unidad": "REA",
    "estado": "Crítico",
    "edad": "77",
    "sexo": "M",
    "dias_estancia": "18",
    "antecedentes": "Enfermedad coronaria de 3 vasos, doble bypass. RAM a G6PDH. FEVI deprimida preQx. Historia de IAMSEST, insuficiencia respiratoria aguda y shock cardiogénico postinfarto. Comunicación interventricular septal postinfarto (sospecha en ETE).",
    "plan": "Destete de noradrenalina, vigilar digoxina (FC, FA, niveles). Aumentar balance negativo. Mantener cloxacilina y monitorizar PCR, vigilar posible S. epidermidis. Controlar Hb y RAM G6PDH. Mantener NPT. Paciente intubada y con VMI por deterioro respiratorio.",
    "sistemas": {
      "neurologico": "Consciente, orientada y colaboradora, sin focalidad neurológica. GCS: 15 puntos.",
      "hemodinamico": "TA 133/62 mmHg, FC: 92/min en RS. IC: 4,21 l/min/m2, IRVS: 1444 dinas.s.m2/cm5. Noradrenalina a 3 ml/h (0,08 mcg/kg/min). Hgb: 8,5 g/dl, HCT: 26,4 %. Troponina I: 187,8 pg/mL. AC: tonos rítmicos, sin soplos ni roces.",
      "respiratorio": "Intubada, VMI en SIMV con FiO2 del 50%, PEEP de 10 cmH2O. Previamente: SatO2: 100% con GNAF 50 l/min/50%, taquipnea leve. GSA: pH: 7,43, pCO2: 35,0 mmHg, pO2: 152 mmHg. AP: hipoventilación en base derecha y roncus aislados. RxTórax: atelectasia laminar en base pulmonar derecha. Ecografía pulmonar: múltiples líneas B, derrame pleural bilateral (ligero D, moderado I), atelectasia compresiva.",
      "renal": "Urea: 75 mg/dl, Creatinina: 0,40 mg/dl. Diuresis: 2910 cc ayer. Balance: +74 cc ayer. Na: 140 mmol/l, K: 4,0 mmol/l. Furosemida 20 mg. Edemas en zonas declives.",
      "infeccioso": "Afebril ayer (máx 36,8 ºC). Leucocitos: 9.010/mm3, PCR: 7,72 mg/dl. Cloxacilina (día 5). Vigilar S. epidermidis (aislado previamente en punta de catéter).",
      "digestivo": "Abdomen blando y depresible, sin masas ni visceromegalias, peristaltismo no auscultado. Bilirrubina total: 0,34 mg/dl, GOT: 52 UI/l, GPT: 39 UI/l. Dieta absoluta, NPT.",
      "coagulacion": "Quick: 78 %, INR: 1,16, TTPAr: 0,96 (ratio). Enoxaparina 40 mg/24h sc. Plaquetas: 490.000/mm3. Hgb: 8,5 g/dl.",
      "nutricion": "Glucemia: 122 mg/dl. Proteínas totales: 5,5 g/dl. NPT (N:18g, HC:180g, LIP:50g, Na:120mEq, K:120mEq, Ca:10mEq, P:40mMol, Mg:10mEq, VT:1500ml).",
      "vias": "Venosa central (VYI, 11º día). Arterial (Femoral derecha, 21º día)."
    }
  },
  {
    "id": "rea-2",
    "numero_cama": "2",
    "unidad": "REA",
    "estado": "Estable",
    "edad": "65",
    "sexo": "H",
    "dias_estancia": "3",
    "antecedentes": "EAo severa (SVAo biológica). HTA, DLP, DM tipo II, Obesidad, fumador, consumo de alcohol. HBP y litiasis vesical. No RAM conocidas.",
    "plan": "Suspender PC de morfina (bolos iv si precisa). Sentar en sillón. Destete de noradrenalina. Solicitar QUANTRA (anemización por débito hemático). Valorar iniciar enoxaparina si no sangrado. Transfundir 1 CH. Suspender fluidoterapia.",
    "sistemas": {
      "neurologico": "Consciente, orientado y colaborador. Lenguaje, pares craneales y fuerza 5/5 conservados. Dolor controlado.",
      "hemodinamico": "RS a 85 lpm. TA 121/55 mmHg (TAM 77) con NA 5 ml/h (0.09mcg/kg/min). Esternón estable. ETT: buena contractilidad, mínima línea de derrame pericárdico. Marcapasos epicárdico VVI a 50 lpm (captura hasta 2 mA). Troponina I en descenso (1640pg/ml). Lactato 1.1 mmol/l. TRC < 3s.",
      "respiratorio": "Eupneico en reposo, sin trabajo respiratorio. SatO2 99% con GN 4 lpm. AP: hipoventilación en ambas bases. RxTórax: introductor en VYID, pinzamiento seno costofrénico izquierdo. GSA (GN 4 lpm): pH 7.39, pCO2 44 mmHg, pO2 139 mmHg.",
      "renal": "Cr 0.89 mg/dl, FG > 90 ml/min, Urea 40 mg/dl. Ionograma: Na 132, K 3.7. Diuresis 1035cc, balance +1165. Furosemida 20mg/8h. No edemas.",
      "infeccioso": "Afebril. PCR 25.1, Leucocitos 16750. Sin antibioterapia.",
      "digestivo": "Abdomen blando y depresible, no doloroso, peristaltismo audible. Glucemia 178 mg/dl. Proteínas totales 5.4 g/dl. Bilirrubina 0.49 mg/dl. GOT 34 U/l. Ha iniciado tolerancia oral a líquidos.",
      "coagulacion": "Drenaje torácico: débito hemático previo (860cc), ahora escaso (10cc). Hemoglobina 8 g/dl. Plaquetas 158000/ul. APTTr 0.85, Quick 66%, INR 1.29. AAS 100mg/día.",
      "nutricion": "Glucemia 178 mg/dl. Proteínas totales 5.4 g/dl. Ha iniciado tolerancia oral a líquidos.",
      "vias": "Introductor VYID (3º día). Arteria radial izquierda (3º día)."
    }
  },
  {
    "id": "rea-3",
    "numero_cama": "3",
    "unidad": "REA",
    "estado": "Sin paciente",
    "edad": "?",
    "sexo": "?",
    "dias_estancia": "?",
    "antecedentes": "",
    "plan": "",
    "sistemas": {}
  },
  {
    "id": "rea-4",
    "numero_cama": "4",
    "unidad": "REA",
    "estado": "Estable",
    "edad": "68",
    "sexo": "H",
    "dias_estancia": "4",
    "antecedentes": "Reintervenido por taponamiento cardíaco, previamente aneurisma de aorta ascendente (debranching y tubo supracoronario). Secuela de ictus previo (paresia en MSD).",
    "plan": "Reponer potasio. Vigilar poliuria. Monitorear clínica infecciosa para iniciar antibioterapia específica por P. aeruginosa y S. marcescens (pend. antibiograma).",
    "sistemas": {
      "neurologico": "Consciente, orientado y colaborador, sin focalidad neurológica aguda (mantiene paresia en MSD secuela de ictus previo). GCS: 15 puntos. Analgesia con morfina a 0.5 mg/h. Episodio de agitación nocturna resuelto.",
      "hemodinamico": "TA: 117/73 mmHg. FC: 85/min, en RS. Hgb: 9.6 g/dl. Noradrenalina a 3 ml/h (0,06 mcg/kg/min). AC: Tonos rítmicos, soplo sistólico en foco aórtico.",
      "respiratorio": "FR: 17/min, SatO2: 100% con GN a 2 l/min. GSA: pH: 7.44, pCO2: 35.0 mmHg, pO2: 80 mmHg. AR: murmullo vesicular conservado. RxTórax: Ligero derrame pleural derecho.",
      "renal": "Urea: 82 mg/dl, Creatinina: 0.51 mg/dl. Diuresis: 5250 cc ayer, Balance: -1986 cc ayer. Sodio: 138 meq/l, Potasio: 3.1 meq/l. Sin edemas. Poliuria.",
      "infeccioso": "Afebril ayer. Leucocitos: 9.990 /mm3, PCR: 15.32 mg/dl. P. aeruginosa y S. marcescens en cultivo de aspirado traqueal (sin antibioterapia, pte antibiograma).",
      "digestivo": "Abdomen blando y depresible, tolera dieta oral. Bilirrubina total: 0.69 mg/dl, GOT: 80 UI/l, GPT: 30 UI/L, GGT: 143 UI/l, FA: 172 UI/l.",
      "coagulacion": "IQ: 50 %, INR: 1.57, APTT Ratio: 0.95. Plaquetas: 538.000 /mm3. Sin profilaxis de TVP descrita.",
      "nutricion": "Glucosa: 110 mg/dl. Proteínas totales: 5.7 g/dl. Dieta oral. Se retira fluidoterapia iv."
    }
  },
  {
    "id": "rea-5",
    "numero_cama": "5",
    "unidad": "REA",
    "estado": "Alerta",
    "edad": "79",
    "sexo": "M",
    "dias_estancia": "4",
    "antecedentes": "IM severa (Sustitución Válvula Mitral biológica). RAM a estreptomicina y propofol. HTA, DLP, VHB controlada. IQx previos: varices, injerto óseo, cataratas, amigdalectomía, biopsia mama izquierda.",
    "plan": "Quetiapina 25mg/24h (noche) + PC Dexmedetomidina nocturna si precisa. Destete de noradrenalina. Control de FA con RVR (amiodarona, metoprolol). Mantener furosemida 20mg/8h iv. Fisioterapia respiratoria con incentivador.",
    "sistemas": {
      "neurologico": "Consciente, orientada en tiempo, espacio y persona, colaboradora. RASS 0. GCS 15 puntos. Días previos con desorientación nocturna. Lenguaje, pares craneales, fuerza y sensibilidad conservados.",
      "hemodinamico": "TA en torno a 130/75mmHg con NA a 2ml/h. FA con RVR (120-130lpm), impregnación de amiodarona, bolos de metoprolol con escasa respuesta. Esternón estable. Troponina I 1035pg/ml. Lactato 0.9. Auscultación cardiaca: rítmica, sin soplos.",
      "respiratorio": "Eupneica en reposo con GN a 4 lpm. SatO2 98%. AP: hipoventilación bibasal de predominio izquierdo. GSA: pH 7.41, pCO2 35 mmHg, pO2 154 mmHg. RxTórax: hernia hiato gigante intratorácica, ligera mejoría del DP derecho.",
      "renal": "Fracaso renal agudo en mejoría (Cr 1.35, FG 37, Urea 67). Ionograma: Na 133, K 3.2. Diuresis 1600cc, balance -1016. Furosemida 20mg/8h. Discretos edemas tibio-maleolares. PTH 177,4 pg/mL, 25 (OH) VITAMINA D 18,7 ng/mL.",
      "infeccioso": "Afebril. PCR 31.38 y leucocitos 4790. Sin antibioterapia.",
      "digestivo": "Abdomen blando y depresible, no doloroso, peristaltismo audible. Escaso apetito. Tolerando vía oral. Glucemia 86 mg/dl. Proteínas totales 5.3 g/dl. GOT 38 U/l, GPT 16 U/l.",
      "coagulacion": "No signos de sangrado activo. Hemoglobina 9.8. Plaquetas 146000/ul. Coagulación básica en rango. Anticoagulación con enoxaparina 40 mg/12h.",
      "nutricion": "Escaso apetito. Glucemia 86 mg/dl. Proteínas totales 5.3 g/dl. Tolerando vía oral."
    }
  },
  {
    "id": "rea-6",
    "numero_cama": "6",
    "unidad": "REA",
    "estado": "Estable",
    "edad": "69",
    "sexo": "M",
    "dias_estancia": "6",
    "antecedentes": "Aneurisma de arco aórtico de 7cm intervenido con prótesis. CEC 240min, Tisquemia 32min. Tiempo de perfusión selectiva 54 min.",
    "plan": "Sentar al sillón. Insistir en fisioterapia respiratoria. Transfundir 1 CH. Vigilancia función renal. Pautado ferinjet semanal + ácido fólico.",
    "sistemas": {
      "neurologico": "Consciente y orientada, colaboradora. Movilidad, fuerza y sensibilidad de extremidades conservadas. PICNR. Pares craneales, habla conservada. Buen control analgésico. Buen descanso nocturno.",
      "hemodinamico": "TA en torno a 105/40mmHg (TAM 60) con NA (retirada esta mañana). En RS a 76lpm. Lactato 0.7. AC: rítmica sin soplos. Relleno capilar <3s.",
      "respiratorio": "Eupneica, buena mecánica respiratoria. Fisioterapia respiratoria. SpO2 94-95% con gafas nasales a 3lpm. AP: hipoventilación bibasal, más marcada en hemicampo izquierdo. GA: pH 7.41, pCO2 51, pO2 74, Lactico 0.7, HCO3 32.3. Rx tórax: Senos costofrénicos pinzados. Silueta cardíaca conservada.",
      "renal": "FRA en mejoría (Cr 1.76, FG 29, Urea 101). Ionograma: Na 138, K 3.2. Diuresis 1760cc, balance hidrico +400cc. Bolo puntual de furosemida. Sin edemas.",
      "infeccioso": "Afebril. Leucocitos 10270 con PCR 13.49. Sin tratamiento antibiótico. Cultivos de vigilancia 11/02 negativos.",
      "digestivo": "Abdomen blando y depresible. Ruidos peristálticos conservados. Regular tolerancia oral por escaso apetito. GOT 80, GPT 49. Proteínas totales 6.",
      "coagulacion": "Sin signos de sangrado. Hb 8 g/dL. Plaquetas 139.000. Coagulación en rango (APTT 0.82, TP 13.3, INR 1.19, IQ 75%, TT 12.6). Profilaxis antitrombótica con Tinzaparina 3500 c/24h y medias neumáticas. Perfil férrico con escasa reserva.",
      "nutricion": "Regular tolerancia oral por escaso apetito. Proteínas totales 6."
    }
  },
  {
    "id": "rea-7",
    "numero_cama": "7",
    "unidad": "REA",
    "estado": "Crítico",
    "edad": "71",
    "sexo": "H",
    "dias_estancia": "3",
    "antecedentes": "RAM a Pirazolonas. Recambio valvular mitral mecánico por doble lesión mitral. IC con FEVI 30%, DAI con resincronización cardíaca. Bloqueo AV completo. Fumador, EPOC moderado, HTA, DLP. ERC (Cr basal 1.7). Sustitución Válvula Mitral Aórtica por IAO reumática (2001).",
    "plan": "Optimización de parámetros ventilatorios. Descenso progresivo de aminas (valorar dispositivo de asistencia ventricular si empeora). Vigilancia de FR, por el momento no criterios de depuración extrarrenal. Profilaxis antitrombótica con tinzaparina 3500 c/24h (stop enoxa). Retirada de catéter epidural. Hemocultivos y urocultivos por fiebre, mantener cefazolina.",
    "sistemas": {
      "neurologico": "Paciente bajo sedación inhalatoria. BIS 45-60. PICNR. Catéter epidural (no utilizado).",
      "hemodinamico": "Shock cardiogénico grave con necesidad de drogas vasoactivas a dosis altas. Noradrenalina a 15ml/h, Dobutamina a 15ml/h, Vasopresina a 2.25ml/h. Catéter Swanz-Ganz con IC 2.2. Levosimendan completado. DAI programado con resincronización a 80lpm, pila de marcapasos epicárdico en reposo. Troponinas en descenso (2.149 pg/mL). Lactato en rango.",
      "respiratorio": "IOT y VMI en modo SIMVC con Vt 500ml, FR 18, PEEP 5, FiO2 50% (Pa/Fi 256). AP: mvc con leve hipofonesis en ambas bases. Rx Tórax: Senos costofrénicos levemente pinzados. Leve patrón alveolar en hemitórax derecho.",
      "renal": "FRA sobre ERC (Cr basal 1.7, hoy Cr 4 con FG 14). Urea 131. Ionograma en rango (Na 137, K 3.6). Diuresis conservada con PC de furosemida a 4ml/h (2250 cc ayer, balance +361l).",
      "infeccioso": "Fiebre mantenida de 38.6 ºC pese a paracetamol y medios físicos. Leucocitos 7.360, PCR 44. Cefazolina. Posible síndrome de respuesta inflamatoria sistémica (SIRS).",
      "digestivo": "Abdomen blando y depresible, ruidos peristálticos disminuidos. Dieta absoluta. NPT. Brt: 2.3, GOT 30, GPT 2. Proteínas totales 4.9.",
      "coagulacion": "Sin signos de sangrado activo. Hb 8.5. Transfundido 1 CH. Plaquetas 71.000. Drenajes torácicos funcionantes (serohemático 150 ml en 24h). Coagulación alterada en mejoría (APTTr 1.47, Quick 63%, INR 1.47). Test tromboelástico QUANTRA normal.",
      "nutricion": "Dieta absoluta. NPT. Proteínas totales 4.9.",
      "vias": "CVC yugular derecho con Swanz-Ganz (3d). CVC femoral derecho (2d). VVP MSD (3d). VVP MSI (3d). Sonda vesical (3d). Arteria femoral derecha (3d)."
    }
  },
  {
    "id": "rea-8",
    "numero_cama": "8",
    "unidad": "REA",
    "estado": "Sin paciente",
    "edad": "?",
    "sexo": "?",
    "dias_estancia": "?",
    "antecedentes": "",
    "plan": "",
    "sistemas": {}
  },
  {
    "id": "rea-9",
    "numero_cama": "9",
    "unidad": "REA",
    "estado": "Crítico",
    "edad": "69",
    "sexo": "H",
    "dias_estancia": "39",
    "antecedentes": "Rotura de saco aneurismático en paciente reintervenido de EVAR (EVAR sobre EVAR). Historial de distensión abdominal, agitación nocturna, fracaso renal.",
    "plan": "Tratamiento completo de delirium (olanzapina+haloperidol+dexmedetomidina). Mantener antihipertensivos solo si precisa. Decanular TQT en cuanto se controle el delirium. Vigilar marcadores infecciosos, si fiebre cambiar vías. Mantener NPT y tratamiento de gastroparesia.",
    "sistemas": {
      "neurologico": "Desorientación temporoespacial con gritos. Delirium. Pares craneales, fuerza y sensibilidad no evaluables por estado mental.",
      "hemodinamico": "HTA, en tratamiento con Bisoprolol 5mg/24h. RS a 80 lpm. AC: rítmica sin soplos. Perfusión periférica mmii similar a días previos. EcoDoppler venoso MID (28/01): sin TVP.",
      "respiratorio": "TQT percutánea (cánula cerrada >48 horas). Gafas nasales. AP: MVC con disminución MV base derecha. SatO2 por pulsioximetría > 97%. Rx TORAX: Sin cambios.",
      "renal": "Sin necesidades de hemodiálisis desde el 06/02/2026. Diuresis conservada: 2720 ml ayer. Edemas con fóveas en MMII. Cr 4.29, FG 13, U 255.",
      "infeccioso": "Afebril. PCR 24, Leucocitos 17100. Sin antibioterapia actual. Múltiples colonizaciones/infecciones previas (S. epidermidis, E.Coli BLEE, Pseudomonas aeruginosa multi-R, Enterococus Faecium, Cándida Albicans, S. aureus).",
      "digestivo": "Abdomen muy distendido (habitual), continúa haciendo deposiciones. Tratamiento de Azitromicina (gastroparesia). TAC (22/1): no aumento hematoma retroperitoneal ni saco aneurismático, moderada distensión intestinal. Colonoscopia (29/01): compatible con colitis isquémica. NPT.",
      "coagulacion": "Hb estable (anemia crónica), sin signos de sangrado. Coagulación en rango. AAS 100 mg/d vo. Tinzaparina 4.500U/24h.",
      "nutricion": "NPT. Glucemia no mencionada. Proteínas totales no mencionadas."
    }
  },
  {
    "id": "rea-10",
    "numero_cama": "10",
    "unidad": "REA",
    "estado": "Sin paciente",
    "edad": "?",
    "sexo": "?",
    "dias_estancia": "?",
    "antecedentes": "",
    "plan": "",
    "sistemas": {}
  },
  {
    "id": "rea-11",
    "numero_cama": "11",
    "unidad": "REA",
    "estado": "Crítico",
    "edad": "75",
    "sexo": "M",
    "dias_estancia": "10",
    "antecedentes": "Re-ingreso por insuficiencia respiratoria. Ingreso previo por cirugía de sustitución valvular aórtica biológica + tubo de AAsc. Reintervención por taponamiento cardíaco. Polineuropatía del paciente crítico. Úlcera sacra.",
    "plan": "Continuar destete respiratorio (intentar no conectar por la noche, gasometría previa si reconexión). Vigilar derrame pleural izquierdo, valorar colocar pig-tail si empeoramiento. Extraer nuevo nivel valle de Vancomicina (martes 17/02). Retirar Fluconazol (22/02). Mantener balances negativos.",
    "sistemas": {
      "neurologico": "Consciente. Delirium (Haloperidol, Olanzapina, Escitalopram, Mirtazapina). Mejoría de polineuropatía del paciente crítico (moviliza EE). Sin focalidades neurológicas. Algias bien controladas. Psiquiatría: 'No tiene capacidad para tomar decisiones'. Úlcera sacra.",
      "hemodinamico": "Estable sin requerimiento de aminas (tendencia a HTA, Amlodipino 10mg Vo/24h). Ritmo sinusal, FC 85 lpm. AC: rítmica, soplo sistólico panfocal. Pulsos periféricos presentes y simétricos. Lac: 0.3.",
      "respiratorio": "Portadora de TQT con cánula Shiley. Alterna O2 en T día y noche. Eupneica, SatO2 99% con O2 en T. AP: MVC, roncus dispersos, hipoventilación base pulmonar izquierda. GA: pH 7,42, pO2 135, pCO2 50, HCO3 32. Tratamiento broncodilatador (Budesonida, Ipratropio), Flumil. Sentada en sillón. RxT: leve empeoramiento del derrame pleural izquierdo. Ecoscopia pulmonar: líneas B, atelectasias, DP izquierdo ligero-moderado.",
      "renal": "Sondaje vesical, diuresis espontáneas (3070ml/24h). Balance: -1655ml. Función renal e ionograma normales. Ausencia de edemas.",
      "infeccioso": "Afebril. Tratamiento antibiótico: Meropenem + Vancomicina + Fluconazol. Aislamiento por Rinovirus + S. aureus (panel de neumonía). Sin aspecto de sepsis ni elevación de RFA. Historial de infecciones previas: urinarias por Pseudomonas, E. faecium, NAVM por SAMS, C. parapsilosis, S. epidermidis (multi-R a linezolid).",
      "digestivo": "En tratamiento con NPT (negativa de la paciente para comer, se negó a PEG). Abdomen indoloro, blando, depresible.",
      "coagulacion": "Sin signos de sangrado activo. Hb estable. Tromboprofilaxis con Enoxaparina 40mg + AAS 100mg. Coagulación y plaquetas en rango.",
      "nutricion": "NPT. Proteínas totales no mencionadas."
    }
  },
  {
    "id": "rea-12",
    "numero_cama": "12",
    "unidad": "REA",
    "estado": "Sin paciente",
    "edad": "?",
    "sexo": "?",
    "dias_estancia": "?",
    "antecedentes": "",
    "plan": "",
    "sistemas": {}
  },
  {
    "id": "ucin-1",
    "numero_cama": "1",
    "unidad": "UCIN",
    "estado": "Sin paciente",
    "edad": "?",
    "sexo": "?",
    "dias_estancia": "?",
    "antecedentes": "",
    "plan": "",
    "sistemas": {}
  },
  {
    "id": "ucin-2",
    "numero_cama": "2",
    "unidad": "UCIN",
    "estado": "Sin paciente",
    "edad": "?",
    "sexo": "?",
    "dias_estancia": "?",
    "antecedentes": "",
    "plan": "",
    "sistemas": {}
  },
  {
    "id": "ucin-3",
    "numero_cama": "3",
    "unidad": "UCIN",
    "estado": "Sin paciente",
    "edad": "?",
    "sexo": "?",
    "dias_estancia": "?",
    "antecedentes": "",
    "plan": "",
    "sistemas": {}
  },
  {
    "id": "ucin-4",
    "numero_cama": "4",
    "unidad": "UCIN",
    "estado": "Crítico",
    "edad": "55",
    "sexo": "M",
    "dias_estancia": "7",
    "antecedentes": "Fístula enteroatmosférica. Resección intestinal + eventroplastia. Portadora de VACC. Historial de dependencia de aminas, SIRS e íleo paralítico.",
    "plan": "Vigilar nivel infeccioso (considerar TAC abdominal si empeoramiento analítico/clínico). Destete de soporte vasopresor. Vigilancia de drenajes. Mantener Tazocel.",
    "sistemas": {
      "neurologico": "Consciente, orientada y colaboradora, sin focalidad neurológica. RASS 0. Control analgésico convencional.",
      "hemodinamico": "PC NA a 3 ml/h (TA 120/49 mmHg). Taquicardia sinusal 90-100 lpm en RS. Tendencia a la anemización (Hb 7.7 g/dl, pendiente 1 CH). Hierro iv (ayer). AC: tonos rítmicos.",
      "respiratorio": "Eupneica con GN 2l/min. SatpO2 100%. No expectoración. GA: pH 7.43, pO2 142, pCO2 43, Bicar 29, Lactato 1. AP: MVC.",
      "renal": "Diuresis 3 litros c/24h. Balance acumulado 400 ml. Función renal conservada. Iones normales.",
      "infeccioso": "Afebril. Parámetros infecciosos descendiendo pero elevados: Leucocitos: 6.500, PCR 23, Procalcitonina (12/02): 3.12. En tratamiento con piperaciclina-tazobactam, Linezolid (iniciado 14/02). Anfotericina B liposomal (suspendida 14/02). Pendiente cultivos de vigilancia. SIRS.",
      "digestivo": "Íleo paralítico en tratamiento con metoclopramida + azitromicina iv. Abdomen tenso, peristaltismo disminuido. Penrose: 25 ml seroso. VAC: 20 ml seroso. Ileostomía con débito bilioso oscuro 325 cc/24h. SNG 325 ml. Bilirrubina total, GOT, GPT, GGT.",
      "coagulacion": "Plaquetas 208.000, coagulación dentro de la normalidad. Tromboprofilaxis con HBPM sbc + medias de compresión.",
      "nutricion": "NPT. Proteínas totales: 5.6 g/dl. Buen control glucémico sin insulina."
    }
  },
  {
    "id": "ucin-5",
    "numero_cama": "5",
    "unidad": "UCIN",
    "estado": "Sin paciente",
    "edad": "?",
    "sexo": "?",
    "dias_estancia": "?",
    "antecedentes": "",
    "plan": "",
    "sistemas": {}
  },
  {
    "id": "ucin-6",
    "numero_cama": "6",
    "unidad": "UCIN",
    "estado": "Sin paciente",
    "edad": "?",
    "sexo": "?",
    "dias_estancia": "?",
    "antecedentes": "",
    "plan": "",
    "sistemas": {}
  }
];
    const PASSWORD_CORRECTA = "misbalare2720"; // La contraseña se inyecta aquí desde el script

    // --- COMPONENTE DE LOGIN ---
    const LoginScreen = ({ onLogin }) => {
      const [input, setInput] = useState("");
      const [error, setError] = useState(false);

      const handleSubmit = (e) => {
        e.preventDefault();
        // Convertimos a minúsculas para que no importe si escriben "UCI" o "uci"
        if (input.toLowerCase() === PASSWORD_CORRECTA.toLowerCase()) {
          onLogin();
        } else {
          setError(true);
          setInput("");
        }
      };

      return (
        <div className="min-h-screen flex items-center justify-center p-4">
          <div className="login-glass p-10 rounded-3xl shadow-2xl max-w-sm w-full text-center">
            <div className="mb-6 inline-flex p-4 bg-blue-600 rounded-2xl text-white shadow-lg shadow-blue-500/30">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="w-8 h-8"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect><path d="M7 11V7a5 5 0 0 1 10 0v4"></path></svg>
            </div>
            <h1 className="text-2xl font-black text-slate-800 mb-2">Acceso Restringido</h1>
            <p className="text-slate-500 text-sm mb-8 font-medium">Dashboard Clínico UCI Quirúrgica</p>
            
            <form onSubmit={handleSubmit} className="space-y-4">
              <input 
                type="password" 
                value={input}
                onChange={(e) => {setInput(e.target.value); setError(false);}}
                placeholder="Introduce la clave..."
                className="w-full px-5 py-3 rounded-xl bg-white/50 border border-slate-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 outline-none transition-all font-bold text-center text-slate-700 placeholder-slate-400"
                autoFocus
              />
              <button type="submit" className="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 rounded-xl shadow-lg shadow-blue-600/30 transition-all active:scale-95">
                Entrar
              </button>
            </form>
            {error && <p className="mt-4 text-red-500 text-xs font-bold animate-pulse">⛔ Clave incorrecta</p>}
          </div>
        </div>
      );
    };

    // --- ICONOS ---
    const Icons = {
      Brain: (p)=><svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z"/><path d="M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z"/></svg>,
      Wind: (p)=><svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M17.7 7.7a2.5 2.5 0 1 1 1.8 4.3H2"/><path d="M9.6 4.6A2 2 0 1 1 11 8H2"/><path d="M12.6 19.4A2 2 0 1 0 14 16H2"/></svg>,
      Heart: (p)=><svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M22 12h-4l-3 9L9 3l-3 9H2"/></svg>,
      Droplet: (p)=><svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M12 22a7 7 0 0 0 7-7c0-2-2-3-4-3l-3-3-3 3c-2 0-4 1-4 3a7 7 0 0 0 7 7z"/></svg>,
      Thermometer: (p)=><svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z"/></svg>,
      Stomach: (p)=><svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M19 20H5a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2Z"/><path d="M12 11h4"/><path d="M12 16h4"/><path d="M8 11h.01"/><path d="M8 16h.01"/></svg>,
      Bed: (p)=><svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M2 4v16"/><path d="M2 8h18a2 2 0 0 1 2 2v10"/><path d="M2 17h20"/><path d="M6 8v9"/></svg>,
      Alert: (p)=><svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/><line x1="12" y1="9" x2="12" y2="13"/><line x1="12" y1="17" x2="12.01" y2="17"/></svg>,
      Clipboard: (p)=><svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><rect width="8" height="4" x="8" y="2" rx="1" ry="1"/><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"/><path d="M12 11h4"/><path d="M12 16h4"/></svg>,
      User: (p)=><svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>,
      Logout: (p)=><svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/><polyline points="16 17 21 12 16 7"/><line x1="21" y1="12" x2="9" y2="12"/></svg>
    };
    const Icon = ({n, c}) => { const I = Icons[n]; return I ? <I className={c} /> : null; };

    // --- COMPONENTES UI DASHBOARD ---
    const BedCard = ({ data, onClick }) => {
      const isUCIN = data.unidad === 'UCIN';
      const colors = { 'Crítico': 'border-l-red-500 bg-red-100 text-red-700', 'Estable': 'border-l-emerald-500 bg-emerald-100 text-emerald-700', 'Alerta': 'border-l-amber-500 bg-amber-100 text-amber-700' };
      const status = colors[data.estado] || colors['Alerta'];
      const unitClass = isUCIN ? 'bg-purple-100 text-purple-700' : 'bg-blue-100 text-blue-700';
      return (
        <div onClick={() => onClick(data)} className={`relative glass-card rounded-xl shadow-sm hover:shadow-2xl hover:-translate-y-1 transition-all p-5 cursor-pointer border border-slate-200 border-l-4 ${status.split(' ')[0]}`}>
          <div className="flex justify-between items-start mb-2">
             <div className="flex items-center gap-3">
               <div className="bg-slate-50 p-2 rounded-lg text-slate-400"><Icon n="Bed" c="w-6 h-6"/></div>
               <div><h3 className="text-xl font-black text-slate-800 leading-none">Cama {data.numero_cama}</h3><span className={`text-[10px] font-black px-2 py-0.5 rounded uppercase ${unitClass}`}>{data.unidad}</span></div>
             </div>
             <span className={`px-2 py-1 rounded text-xs font-bold uppercase ${status.substring(status.indexOf(' ')+1)}`}>{data.estado}</span>
          </div>
          <div className="flex items-center gap-2 text-xs font-bold text-slate-500 mb-3 bg-slate-50 p-1.5 rounded-lg border border-slate-100">
             <span className="flex items-center gap-1"><Icon n="User" c="w-3 h-3"/> {data.edad} años</span><span className="text-slate-300">|</span><span>Día {data.dias_estancia}</span>
          </div>
          <div><p className="text-xs text-slate-400 font-bold uppercase">Paciente</p><p className="text-2xl font-black text-slate-700 truncate">{data.paciente_id}</p></div>
          {data.alertas && <div className="mt-3 flex items-center gap-2 text-red-600 bg-red-50 px-2 py-1 rounded"><Icon n="Alert" c="w-4 h-4 animate-pulse"/><span className="text-xs font-bold">ATENCIÓN</span></div>}
        </div>
      );
    };

    const Section = ({ i, t, txt, col }) => (
      <div className="bg-white/80 p-4 rounded-2xl border border-slate-100 shadow-sm backdrop-blur-sm">
        <div className="flex items-center gap-2 mb-2"><div className={`p-2 rounded-lg ${col}`}><Icon n={i} c="w-5 h-5"/></div><h4 className="text-xs font-bold text-slate-500 uppercase">{t}</h4></div>
        <p className="text-sm font-medium text-slate-700 pl-10 leading-relaxed">{txt || "Sin datos."}</p>
      </div>
    );

    const Modal = ({ p, onClose }) => {
      if(!p) return null;
      const isUCIN = p.unidad === 'UCIN';
      const headCol = isUCIN ? 'bg-purple-600' : 'bg-blue-600';
      return (
        <div className="fixed inset-0 modal-backdrop flex items-center justify-center p-4 z-50" onClick={onClose}>
          <div className="bg-slate-50 w-full max-w-6xl max-h-[95vh] overflow-y-auto rounded-3xl shadow-2xl" onClick={e=>e.stopPropagation()}>
            <div className="bg-white p-6 border-b border-slate-100 flex justify-between items-center sticky top-0 z-10 shadow-sm">
               <div className="flex items-center gap-4">
                 <div className={`h-14 w-14 ${headCol} rounded-xl flex items-center justify-center text-white font-black text-2xl shadow-md`}>{p.numero_cama}</div>
                 <div>
                    <h2 className="text-3xl font-black text-slate-800 tracking-tight">{p.paciente_id}</h2>
                    <div className="flex items-center gap-3 text-slate-500 font-bold text-sm mt-1">
                        <span className="bg-slate-100 px-2 py-0.5 rounded text-slate-600">{p.sexo}</span>
                        <span>{p.edad} años</span><span className="text-slate-300">•</span><span>Estancia: Día {p.dias_estancia}</span>
                    </div>
                 </div>
               </div>
               <button onClick={onClose} className="px-5 py-2.5 bg-slate-100 rounded-xl font-bold text-slate-600 hover:bg-slate-200 transition-colors">Esc Cerrar</button>
            </div>
            <div className="p-6 md:p-8 space-y-6">
               {p.antecedentes && p.antecedentes !== "?" && <div className="bg-slate-100/80 p-5 rounded-2xl border border-slate-200"><h3 className="text-xs font-black text-slate-400 uppercase tracking-widest mb-2">Antecedentes Personales (AP)</h3><p className="text-base font-medium text-slate-700 italic">{p.antecedentes}</p></div>}
               <div className={`p-1 rounded-2xl shadow-sm bg-gradient-to-r ${isUCIN ? 'from-purple-500 to-purple-400' : 'from-blue-500 to-blue-400'}`}><div className="bg-white p-5 rounded-xl"><div className="flex gap-2 mb-2 items-center text-slate-800"><Icon n="Clipboard" c="w-6 h-6"/><span className="font-black uppercase tracking-wide">Plan Terapéutico</span></div><p className="text-lg font-medium pl-8 leading-relaxed text-slate-800">{p.plan}</p></div></div>
               <div className="grid grid-cols-1 md:grid-cols-3 gap-5">
                 <Section i="Brain" t="Neurológico" txt={p.sistemas.neurologico} col="bg-indigo-100 text-indigo-600"/>
                 <Section i="Wind" t="Respiratorio" txt={p.sistemas.respiratorio} col="bg-sky-100 text-sky-600"/>
                 <Section i="Heart" t="Hemodinámico" txt={p.sistemas.hemodinamico} col="bg-rose-100 text-rose-600"/>
                 <Section i="Droplet" t="Renal" txt={p.sistemas.renal} col="bg-amber-100 text-amber-600"/>
                 <Section i="Thermometer" t="Infeccioso" txt={p.sistemas.infeccioso} col="bg-purple-100 text-purple-600"/>
                 <Section i="Stomach" t="Digestivo" txt={p.sistemas.digestivo} col="bg-lime-100 text-lime-600"/>
               </div>
            </div>
          </div>
        </div>
      );
    };

    // --- COMPONENTE PRINCIPAL (GESTIÓN DE SESIÓN) ---
    const App = () => {
      const [isLoggedIn, setIsLoggedIn] = useState(false);
      const [sel, setSel] = useState(null);

      // Al iniciar, miramos si ya estaba logueado en esta sesión para no pedir clave al recargar
      useEffect(() => {
        const session = sessionStorage.getItem("uci_auth");
        if (session === "true") setIsLoggedIn(true);
      }, []);

      const handleLoginSuccess = () => {
        setIsLoggedIn(true);
        sessionStorage.setItem("uci_auth", "true"); // Guarda la sesión mientras no cierren el navegador
      };
      
      const handleLogout = () => {
        setIsLoggedIn(false);
        setSel(null);
        sessionStorage.removeItem("uci_auth");
      };

      // Si no está logueado, mostramos SOLO la pantalla de Login
      if (!isLoggedIn) {
        return <LoginScreen onLogin={handleLoginSuccess} />;
      }

      // Si está logueado, mostramos el Dashboard normal
      const reas = PATIENTS.filter(p=>p.unidad==='REA');
      const ucins = PATIENTS.filter(p=>p.unidad==='UCIN');
      
      return (
        <div className="min-h-screen p-6 md:p-10 max-w-[1920px] mx-auto">
           <header className="mb-10 flex flex-col md:flex-row justify-between items-end gap-4">
              <div><h1 className="text-5xl font-black text-slate-800 tracking-tighter mb-2">UCI Quirúrgica <span className="text-blue-600">Dashboard</span></h1><p className="text-slate-500 font-medium">Vista clínica en tiempo real • REA + UCIN</p></div>
              <div className="flex gap-4 items-center">
                <div className="bg-white px-4 py-2 rounded-xl shadow-sm border border-slate-100 text-sm font-bold text-slate-400">Act: {new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})}</div>
                <button onClick={handleLogout} className="bg-red-50 hover:bg-red-100 text-red-600 p-2 rounded-xl transition-colors" title="Cerrar sesión"><Icon n="Logout" c="w-6 h-6"/></button>
              </div>
           </header>
           {reas.length>0 && <div className="mb-12"><h2 className="text-2xl font-black text-blue-900 mb-6 flex items-center gap-2"><span className="w-2 h-8 bg-blue-500 rounded-full"></span>REA</h2><div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5 gap-6">{reas.map(p=><BedCard key={p.id} data={p} onClick={setSel}/>)}</div></div>}
           {ucins.length>0 && <div><h2 className="text-2xl font-black text-purple-900 mb-6 flex items-center gap-2"><span className="w-2 h-8 bg-purple-500 rounded-full"></span>UCIN</h2><div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5 gap-6">{ucins.map(p=><BedCard key={p.id} data={p} onClick={setSel}/>)}</div></div>}
           {sel && <Modal p={sel} onClose={()=>setSel(null)}/>}
        </div>
      );
    };

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<App />);
  </script>
</body>
</html>