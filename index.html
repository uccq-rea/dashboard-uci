<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />
  
  <title>Acceso UCI</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <style>
    body { background-color: #f0f4f8; background-image: radial-gradient(#cbd5e1 1px, transparent 1px); background-size: 24px 24px; font-family: system-ui, sans-serif; }
    .glass-card { background: linear-gradient(145deg, #ffffff, #f8fafc); }
    .modal-backdrop { background-color: rgba(15, 23, 42, 0.8); backdrop-filter: blur(8px); }
    .login-glass { background: rgba(255, 255, 255, 0.7); backdrop-filter: blur(20px); border: 1px solid rgba(255, 255, 255, 0.5); }
    ::-webkit-scrollbar { width: 8px; } ::-webkit-scrollbar-thumb { background: #94a3b8; border-radius: 4px; }
  </style>
  <script> tailwind.config = { theme: { extend: { colors: { lime: { 100: '#ecfccb', 600: '#65a30d' } } } } } </script>
</head>
<body>
  <div id="root"></div>
  <script type="text/babel">
    const { useState, useEffect } = React;
    const PATIENTS = [
  {
    "id": "rea-1",
    "numero_cama": "1",
    "unidad": "REA",
    "estado": "Crítico",
    "edad": "77",
    "sexo": "M",
    "dias_estancia": "8º día",
    "antecedentes": "EC3V, doble bypass, RAM AAS/hemólisis por G6PDH, HTA, DLP. IQx: Amigdalectomía, Colecistectomía, Histerectomía + doble anexectomía.",
    "plan": "Seguir sentando en sillón. Intentar destete de NA. Realizar ETE mañana (ayunas) por sospecha CIV. Retirar pigtail izquierdo. Intentar disminuir FiO2 y realizar controles gasométricos. Reponer Fosfato monosódico y monopotasico. Vigilancia enzimas hepáticas. Pautar lactulosa.",
    "sistemas": {
      "neurologico": "Consciente y orientada en las 3 esferas, GCS 15. Algias controladas con analgesia de primer escalón. Lorazepam nocturno. Buena tolerancia a sentarse en sillón.",
      "hemodinamico": "Requerimiento de NA a 13ml/h para mantener TAM >70mmHg. RS a 88lpm. Bisoprolol 1.25mg. FA tratada previamente con amiodarona. IAMSEST post-op (pico troponinas 18.000, actualmente 2381). Catéter SG. Hb 9.2. Eco FICE: VI ligeramente dilatado, FEVI moderadamente deprimida, IM moderada, sin derrame. Sospecha CIV (ETE pendiente).",
      "respiratorio": "GNAF 35/35 (previo VMNI BIPAP). pO2: 75, pCO2: 35, PH: 7.48. Drenaje pleural izquierdo con 20ml seroso. Fisioterapia inspiratoria. AR: hipofonesis basal derecha. Rx tórax: sin signos de neumotórax/IC, leve pinzamiento costofrenico izq.",
      "renal": "Portadora de SV. Diuresis forzadas con bolos de furosemida. Ritmo miccional adecuado (ocasionalmente oligúrica). Balance hídrico neutro +5. Función renal conservada (Urea 20, Cr 0.45). Leve hipofosfatemia 2.4.",
      "digestivo": "Mejor tolerancia a dieta oral. Glucemias controladas. No deposiciones desde ingreso. Tratamiento antiemético. Elevación de transaminasas en descenso (GOT:31, GPT:198, GGT:46, FA:82). Bilirrubina normal. Hipoproteinemia (5.4). Abdomen blando, depresible, no doloroso, peristaltismo conservado.",
      "infeccioso": "Afebril, sin tratamiento antibiótico. No aspecto de sepsis. Leucocitos 15980, PCR 7.43.",
      "hemostasia_coagulacion": "Hb 9.2, HCT 28.3%. Sangrado por safenectomía (apositos limpios hoy). Plaquetas y coagulación sin alteraciones. Tromboprofilaxis con enoxaparina 40mg c/24h y clopidogrel 75mg."
    }
  },
  {
    "id": "rea-2",
    "numero_cama": "2",
    "unidad": "REA",
    "estado": "Crítico",
    "edad": "41",
    "sexo": "H",
    "dias_estancia": "1º día postoperatorio",
    "antecedentes": "DLP. SVAo mecánica (2021) por IAo severa (válvula bicúspide). Ictus isquémico con amaurosis no filiada. Sospecha de endocarditis sobre prótesis con IAo severa y absceso raíz aórtica. ACO con Sintrom.",
    "plan": "Monitorización postoperatoria inmediata. Soporte con noradrenalina.",
    "sistemas": {
      "neurologico": "Bajo sedación e IOT para monitorización postoperatoria inmediata.",
      "hemodinamico": "Intraoperatorio: NA dosis bajas. Post-op: Tendencia a la hipotensión arterial por vasoplejía postCEC, requiere noradrenalina a 8. Eco: buena función sistólica y valvular. Calcio 7.7 mg/dl.",
      "respiratorio": "Intubación orotraqueal (TET nº 7.5). Mantenimiento bajo ventilación. Traslado a UCIQ bajo IOT.",
      "renal": "Diuresis conservada durante la intervención.",
      "digestivo": "No datos relevantes.",
      "infeccioso": "Dx: Endocarditis. Leucocitos 18.000/mm3.",
      "hemostasia_coagulacion": "Intraoperatorio: Heparinización (300mg), Protamina (40mg). Sangrado dentro de límites permisibles. Transfusión de 2 plasma y 1g fibrinógeno."
    }
  },
  {
    "id": "rea-3",
    "numero_cama": "3",
    "unidad": "REA",
    "estado": "Crítico",
    "edad": "59",
    "sexo": "H",
    "dias_estancia": "6º día postoperatorio",
    "antecedentes": "RAM Betalactámicos (shock anafiláctico). HTA, DLP. TVP recidivante por déficit Proteína C. VIH C3 (coriorretinitis CMV/Toxoplasma). Carcinoma epidermoide perianal T3. IQx: laparoscopia exploradora, colostomía. Reintervención urgente por perforación intestinal en isquemia de colon y peritonitis fecaloidea.",
    "plan": "Disminuir aminas (objetivo TAM > 65 mmHg). Considerar déficit de Proteína C en plaquetopenia. Transfusión de 1PP por sangrado subglótico. Evitar balances positivos. Mantener y ajustar perfusión de furosemida. Ajustar niveles de Vancomicina (500mg/12h). Solicitar NPT.",
    "sistemas": {
      "neurologico": "Sedoanalgesiado con Propofol 2% + Cl mórfico, RASS -4. BIS 28-35 con escasa sedación.",
      "hemodinamico": "Mejoría con retirada de NA y vasopresina. RS a 74 lpm. Perfusión de amiodarona a 4 ml/h. Lactato 3.5 (previo 3.8). Relleno capilar enlentecido. Eco: sin datos.",
      "respiratorio": "Insuficiencia respiratoria hipoxémica, FiO2 50%. Ventilación controlada (VT 475, FR 16, PEEP 12), compliancia 35. PAFI 152. Derrame pleural derecho resuelto tras pig-tail. Rx tórax: sin infiltrados (previamente EAP por sobrecarga). GSA: pH 7.32, pCO2 45, pO2 76. Drenaje pleural 580 cc serohemático.",
      "renal": "FRA (Cr 1.43, máx 1.65, basal 0.85). Urea 65. Diuresis 2765 cc (ayer), Balance -801 cc (ayer). PC de furosemida a 2 ml/h (poliuria). Sodio 145, Potasio 3. Magnesio 2.51, Calcio-albúmina 8.8, Fosfato 3.8. Carga de CLK 40 mEq administrada.",
      "digestivo": "Reintervención por perforación intestinal, resección de colon e ileostomía terminal. Abdomen depresible, no distendido. M. palanca activo lento (700cc). Herida quirúrgica de laparotomía con buen aspecto. Enzimas hepáticas GOT/GPT 87/26. Hipoproteinemia 4.9. Dieta absoluta, NPT solicitada.",
      "infeccioso": "Mejoría por recuperación de leucopenia (L 6750). Afebril. PCR 38, Procalcitonina 8. ATB: Aztreonam + Metronidazol + Vancomicina + Anidulafungina (ajustado por RAM Betalactámicos). Cultivos de líquido peritoneal: E. coli sensible a aztreonam y E. Faecium sensible a vancomicina.",
      "hemostasia_coagulacion": "Hgb 11.1 (previo 12.3), HCT 36.8%. Plaquetas 15.000 (previo 14.000). Coagulación alterada (APTT 1.46, INR 1.5) en paciente con déficit de proteína C. Sangrado espontáneo por sonda aspiración subglótica. Sin tratamiento anticoagulante."
    }
  },
  {
    "id": "rea-4",
    "numero_cama": "4",
    "unidad": "REA",
    "estado": "Crítico",
    "edad": "40",
    "sexo": "H",
    "dias_estancia": "17º día en UCI (desde 30/12/25)",
    "antecedentes": "Obesidad, SAOS, Hiperuricemia. TCE grave (precipitación 30/12/25), craniectomía descompresiva, cerebritis. Múltiples cambios ATB. TQT. FRA (AKI-3). Agitación de difícil control.",
    "plan": "Intentar reducir dosis de propofol. Pendiente niveles de Keppra. Vigilancia de secreciones mucopurulentas. Continuar ventilación en PS, valorar O2T. Vigilancia de hipernatremia, evitar balances negativos excesivos, aumentar agua libre por SNG si persiste hipernatremia. Iniciar movicol. Vigilancia de colestasis disociada (eco abdominal). Si fiebre, realizar HC. Ajustar ATB si mejora función renal (Ceftazidima-Avibactam por antibiograma).",
    "sistemas": {
      "neurologico": "Sedado con propofol (ayer 7-13ml/h) por agitación. No conecta con el medio. Moviliza 4 EE. Apertura ocular espontánea. PINR. Sin episodios epileptiformes en 5 días (tto: Keppra, Lacosamida). Tto para agitación: Clonidina, Haloperidol, Quetiapina, Clonazepam, Propranolol. Inicio de Zuclopentixol IM valorado por psiquiatría.",
      "hemodinamico": "Estable sin requerimiento de aminas (TAM >70mmHg). RS con FC 90lpm y tendencia a HTA. Última transfusión 25/01 (3HC). Hb 9.1, lactato 0.9.",
      "respiratorio": "Portador de TQT en CPAP PS 14/8 y FiO2 0.4. Sat O2 100%. Mejoría de secreciones. Buena mecánica respiratoria y GSA (pH 7.36, pCO2 35, pO2 115). AR: MVC sin ruidos patológicos. Rx tórax: sin hallazgos patológicos. BAS: Candida tropicalis + Enterobacter hormaechei.",
      "renal": "AKI-3 en mejoría. Diuresis 3110ml (ayer), Balance -582. Ligera hipernatremia (Na 148), tto con agua libre por sonda e ionolyte. Último ciclo de diálisis 24/01. Urea 87, Cr 2.56, FG 30.",
      "digestivo": "SNG con NE (Low protein) a 60ml/h, buena tolerancia, sin retenciones. Glucemias bien controladas. 4 días sin deposiciones. Colestasis disociada en meseta. Abdomen blando y depresible, peristaltismo conservado. Glucosa 111, Proteínas 7.9, bilirrubina 0.32, GOT 27, GPT 60, GGT 994, FA 293.",
      "infeccioso": "Afebril. ATB: Ceftarolina + Cefepime (ambos ajustados a FG), Fluconazol. Leucocitos 11900, PCR 4.63. BAS: Enterobacter hormaechei (Carbapenem resistente) y Candida tropicalis. Frotis rectal: Colonización por Proteus mirabilis BLEE.",
      "hemostasia_coagulacion": "Tromboprofilaxis con tinzaparina 4.500U. No sangrados aparentes. Plaquetas 347.000. Coagulación anulada por incidencia (historial previo en rango)."
    }
  },
  {
    "id": "rea-5",
    "numero_cama": "5",
    "unidad": "REA",
    "estado": "N/A",
    "edad": "?",
    "sexo": "?",
    "dias_estancia": "?",
    "antecedentes": "N/A",
    "plan": "N/A",
    "sistemas": {
      "neurologico": "N/A",
      "hemodinamico": "N/A",
      "respiratorio": "N/A",
      "renal": "N/A",
      "digestivo": "N/A",
      "infeccioso": "N/A",
      "hemostasia_coagulacion": "N/A"
    }
  },
  {
    "id": "rea-6",
    "numero_cama": "6",
    "unidad": "REA",
    "estado": "Estable",
    "edad": "59",
    "sexo": "M",
    "dias_estancia": "1º día",
    "antecedentes": "Carcinoma de Timo. IQx: resección con esternotomía (complicaciones: sección nervios frénico y laríngeo recurrente izq, laceración arteria pulmonar y VCS).",
    "plan": "Realizar EVP y disminuir NA hasta suspender. Iniciar tromboprofilaxis con enoxaparina 40 mg sc/24h. Objetivo de balance hídrico neutro. Iniciar tolerancia a dieta oral.",
    "sistemas": {
      "neurologico": "Consciente, orientada y colaboradora, sin focalidad neurológica. RASS 0. Dolor controlado con catéter epidural.",
      "hemodinamico": "Precisa NA a bajas dosis de 1 ml/h para mantener TAM>65 mmHg. RS a 93 lpm. AC: tonos rítmicos, sin soplos ni roces.",
      "respiratorio": "Eupneica con GN a 2 lpm. Dificultad para expectorar secreciones (relacionado con lesión nervio recurrente). GSA: pH: 7.34, pCO2: 42, pO2: 85, láctico: 2.8. AR: murmullo vesicular conservado, sin estertores. Rx Tórax: hemitórax izquierdo con aumento de la trama vascular. Drenajes torácicos A/B/C 65/260/20 cc serohemático.",
      "renal": "Urea: 38 mg/dl, Cr: 0.51 mg/dl. Diuresis: 940cc (ayer), Balance positivo de 672 cc (ayer). Iones en rango. Sin diurético y sin edemas.",
      "digestivo": "Abdomen blando y depresible, sin masas ni visceromegalias, peristaltismo disminuido. Bilirrubina total: 0.52 mg/dl, GOT y GPT sin interés. Glucemia alrededor de 186 mg/dl (requiere insulina regular). Proteínas totales: 5.3 g/dl.",
      "infeccioso": "Afebril. Leucocitos: 14.390 /mm3, PCR: 17 mg/dl.",
      "hemostasia_coagulacion": "Coagulación y plaquetas normales. Hgb: 9.3 g/dl. Intraoperatorio: Déficit de factores de coagulación, administrado complejo protrombínico."
    }
  },
  {
    "id": "rea-7",
    "numero_cama": "7",
    "unidad": "REA",
    "estado": "Estable",
    "edad": "57",
    "sexo": "M",
    "dias_estancia": "1º día postoperatorio",
    "antecedentes": "Meningioma ángulo pontocerebeloso. IQx: Craneotomía + exéresis subtotal.",
    "plan": "Realizar TAC control 24h. Solicitar RNM por neurocirugía. Amlodipino 5mg/24h vo si HTA. Vigilancia neurológica. Si TAC normal y sin variaciones clínicas, alta mañana.",
    "sistemas": {
      "neurologico": "Consciente y orientada. Sin focalidad neurológica. Pares craneales conservados y simétricos.",
      "hemodinamico": "Estable, con tendencia a la hipertensión (precisó clevidipino, ya suspendido). TA 133/60, en RS a 70lpm. Hb 13 gr/dl.",
      "respiratorio": "Eupneica en reposo con cánulas a 3l/min. SatpO2 100%. AP: MVC, sin ruidos patológicos. GSA: pH 7.38, pCO2 36, pO2 102.",
      "renal": "Diuresis espontánea > 1 ml/Kg/h con función renal e iones dentro de la normalidad.",
      "digestivo": "Abdomen anodino. Dieta absoluta.",
      "infeccioso": "Afebril. Leucocitos 12290, PCR 5.52.",
      "hemostasia_coagulacion": "No datos relevantes."
    }
  },
  {
    "id": "rea-8",
    "numero_cama": "8",
    "unidad": "REA",
    "estado": "Crítico",
    "edad": "75",
    "sexo": "H",
    "dias_estancia": "2º día postoperatorio",
    "antecedentes": "HTA, DLP. IAM (julio 2025) con IC (FEVI 52%), IM severa. FA. PTI (tto dexametasona). Aneurisma ilíacas embolizadas. Ictus isquémico (julio 2025). IQx: Reparación valvular mitral, ablación venas pulmonares, implante Atriclip.",
    "plan": "Disminuir aminas. Pautar prednisoma oral en dosis decrecientes. Realizar incentivometría respiratoria. Vigilar función renal. Aumentar furosemida c/6h prn. Reponer calcio iv y bicarbonato vo. Progresar tolerancia oral y suspender fluidos. Pautar batidos hiperproteicos y procinéticos.",
    "sistemas": {
      "neurologico": "Consciente, orientado y colaborador, sin focalidad neurológica aparente. GCS: 15 puntos. Aceptable analgesia con pc morfina 0.5 ml/h.",
      "hemodinamico": "Inestable con necesidad de pc noradrenalina a 10 ml/h (0.189 mcg/kg/min) para TA 111/52 (71) mmHg. FC: 63 lpm en RS. Reiniciado amiodarona 200 mg/d vo. Troponina I: 17.163 ng/l. AC: tonos rítmicos. Eco: aceptable contractilidad global, no taponamiento. Láctico 2.3. Tubos torácicos: débito hemático de 330+265 ml.",
      "respiratorio": "Eupneico con GN a 3 lpm. Buen intercambio gaseoso y mecánica respiratoria. GSA: pH: 7.30, pCO2: 36, pO2: 94, EB: -8. AP: murmullo vesicular conservado, con algún roncus en base derecha. Eco: líneas A. Rx Tórax: ICT > 0.5, sin infiltrados ni derrames aparentes.",
      "renal": "Tendencia a la oliguria a pesar de expansión, precisa furosemida a bolos. Diuresis ayer de 700 ml, balance +2.339 ml. Empeoramiento de la función renal (Cr 1.9, basal 1.54). Urea: 63. Iones en rango, salvo Calcio corregido: 8.3.",
      "digestivo": "Abdomen blando y depresible. Peristaltismo disminuido. Bilirrubina total: 1.11, GOT: 95, GPT: 35. Nauseoso, pero inicia tolerancia oral con procinéticos. Mal control glucémico (requiere insulina). Proteínas totales: 5.3 g/dl.",
      "infeccioso": "Afebril. Leucocitos: 12.020/mm3, PCR: 6.35. Profilaxis antibiótica con cefazolina.",
      "hemostasia_coagulacion": "Hb: 8.8 g/dl, Hto: 27.5%. Plaquetas 116.000. Coagulación: APTTr 0.85, INR 1.08. Hidrocortisona como px supresión suprarrenal. Pautada tinzaparina 3500 unidades."
    }
  },
  {
    "id": "rea-9",
    "numero_cama": "9",
    "unidad": "REA",
    "estado": "Estable",
    "edad": "67",
    "sexo": "H",
    "dias_estancia": "27 días",
    "antecedentes": "Inestabilidad hemodinámica (shock hemorrágico, politransfusión). FRA anúrico (TRRC, HD intermitente). Destete complicado (traqueotomía percutánea 16/01). Distensión abdominal (colonoscopia). Lesión isquémica crónica en MID. Elevación de transaminasas (en descenso).",
    "plan": "Continuar con destete, con periodos de O2 en T y sentar al paciente. Mantener PC de Bicarbonato 1/6M. Seguir pautas de nefrología para diálisis. Si fiebre, cambiar vías. Mantener antibioterapia actual. Progresar con la dieta oral.",
    "sistemas": {
      "neurologico": "Consciente y aparentemente orientado. Colaborador y tranquilo. Sin necesidad de dexdor nocturno por 4 noches. Progreso a nivel miopático (ejercicios fisioterapeuta).",
      "hemodinamico": "Estable con tendencia a la HTA. TA 123/51 mmHg. Amlodipino 10mg/d, Bisoprolol 5mg/d. RS a 92 lpm con extrasístoles ventriculares. Amiodarona retirada. Láctico 1.7. Perfusión periférica en MID algo peor (livideces), isquemia crónica. EcoDoppler venoso MID: sin TVP.",
      "respiratorio": "TQT percutánea. O2 en T a 5 l/min, con periodos de SIMV (PS 12/6). FiO2 0.35%. Tolera O2 en T sentado. AP: MVC con disminución MV base derecha. GSA PS: pH 7.44, pCO2 30, pO2 108. Rx Tórax: mejoría radiológica tras drenaje de derrame pleural. Drenaje sin débito.",
      "renal": "Diálisis ayer sin ultrafiltrado significativo. Edemas en MMII en disminución. Buen ritmo diurético (2120 ml/24h), BH +139 ml. Furosemida 20 mg/12h. Cr 4.55 (previo 5.74). Urea 215. Iones: K 3.6, Na 138, Ca 8.4, P 3.",
      "digestivo": "Dieta absoluta, con NPT. Abdomen menos distendido, ha tolerado agua y yogur, defecó ayer. SNG: débito verdoso escaso. Enzimas hepáticas de citólisis normalizadas; colestasis elevadas pero en descenso (GGT 149, FA 226). BilT 0.77. Colonoscopia: signos de colitis isquémica.",
      "infeccioso": "En tratamiento con Ceftolozano/Tazobactam, Daptomicina y Anidulofungina. Afebril. Marcadores infecciosos en descenso PCR 7.3, Leucocitos 21.070. Hemocultivo 31/01: S. epidermidis (vía central, cambiada a PIC). Cultivos positivos: FR E.Coli BLEE, BAS Pseudomona Aeruginosa, Enterococus Faecium y Cándida Albicans.",
      "hemostasia_coagulacion": "Trasfusión de 2CH hace 4 días. Hb 7.7, Hto: 23.7%. Plaquetas 361.000/mm3. AAS 100 mg/d vo."
    }
  },
  {
    "id": "rea-10",
    "numero_cama": "10",
    "unidad": "REA",
    "estado": "Estable",
    "edad": "61",
    "sexo": "M",
    "dias_estancia": "1º día",
    "antecedentes": "Fumadora 20a-p. Neoplasia mamaria (2024, mastectomía + linfadenectomía). IQx previas: varices, artrodesis de cadera L1-S1 (2023), mastectomía. En tratamiento por la unidad del dolor (neuromoduladores).",
    "plan": "Monitorización postoperatoria y manejo del dolor con catéter incisional para anestésico local.",
    "sistemas": {
      "neurologico": "Extubación en Quirófano sin incidencias. Se traslada consciente a la unidad.",
      "hemodinamico": "Estable durante la intervención. TA: 147/89 mmHg. FC: 82 lpm. SatO2 97%. Sangrado 1500-1600 ml (con recuperador). Transfusión de 2CH y 2500 ml de cristaloides.",
      "respiratorio": "Intubación orotraqueal (TET nº 7 flexometálico). Extubación en Quirófano sin incidencias.",
      "renal": "Diuresis conservada 0.5-1 ml/kg/h durante la cirugía (1700 ml totales).",
      "digestivo": "No datos relevantes.",
      "infeccioso": "Profilaxis antibiótica con cefuroxima.",
      "hemostasia_coagulacion": "Sangrado 1500-1600ml. Administrados 2CH. Coagulación no especificada."
    }
  },
  {
    "id": "rea-11",
    "numero_cama": "11",
    "unidad": "REA",
    "estado": "Crítico",
    "edad": "65",
    "sexo": "H",
    "dias_estancia": "8º día postoperatorio",
    "antecedentes": "HDA (gran úlcera con sangrado activo). IQx: Laparotomía (hemostasia, cierre duodenal). Melanoma coroideo ojo izq Estadio IV (metástasis hepáticas). Fumador activo, enolismo, DLP, Obesidad. VHC.",
    "plan": "Disminuir sedación (PPF) con intención de destete, valorar Dexmedetomidina si disminución de NA. Disminuir aminas. Transfundir 2 CH, 1 PP y administrar 500 mg CP. Solicitar drenaje pleural izquierdo a RxI. Nebulizaciones SSF hipertónico. Intentar destete respiratorio. Mantener HDFVVC y anticoagulación con citrato. Iniciar sustitución de iones en bolsa de biphozil. Buscar balance negativo. Mantener antibioterapia. Vigilar función hepática y sangrado de nueva aparición. Si sangrado, valorar embolización por RxI.",
    "sistemas": {
      "neurologico": "Sedado con PPF 2% a 12-15 ml/h. BIS 50-70. Pupilas reactivas (lado izquierdo levemente más perezosa, asociado a melanoma).",
      "hemodinamico": "Inestable con necesidad de pc noradrenalina a 14 ml/h (0.2 mcg/kg/min) para TAM > 65 mmHg. RS 84 lpm. Mala perfusión distal crónica y aguda, relleno capilar enlentecido. Láctico 3.7.",
      "respiratorio": "IOT por disnea progresiva. VMI (VT 550, FR 18, PEEP 6). Murmullo vesicular conservado, roncus dispersos. Hipofonesis en base izquierda. GA (40%): pH 7.34, pO2 119, pCO2 41. Rx Tórax: Patrón alveolo-intersticial difuso, atelectasias base derecha, derrame pleural izquierdo.",
      "renal": "FRA on TTRR en HDFVVC desde 30/01/26. Anticoagulación con citrato. Diuresis espontanea 10 ml en 24h. Balance -6.163 ml (ayer). Disminución de edemas. Cr 1.57, Urea 56. Hipopotasemia 2.9, hipomagnesemia 1.27, hipofosfatemia 2.3.",
      "digestivo": "Abdomen globuloso, ligeramente distendido, no doloroso. Peristaltismo disminuido. PC de omeprazol. Drenaje penrose: débito ascítico de 3000 ml. SNG: débito escaso, salida de sangre fresca. Herida laparotomía sin signos de sangrado. Bilirrubina total 6.13, directa 5. Disminución de enzimas hepáticas (GOT: 97, GPT: 75). NPT 1500ml. Proteínas totales: 4.5 g/dl.",
      "infeccioso": "Afebril. Leucocitos: 13.780/mm3, PCR: 21.9, Procalcitonina 4.59. ATB: Piperacilina/tazobactam, Linezolid, Anidulafungina (ajustados para hemofiltro). Hemocultivos (02/02): Staphylococcus hominis (probable contaminación).",
      "hemostasia_coagulacion": "Anemia (Hb: 7.5), politransfundido (5 CH + 1 PFC + 2 PP). Plaquetas 40.000 (transfundido 2 PP). Coagulopatía (APTT 1.37, INR 1.25) con ligera mejoría. TEG alterado."
    }
  },
  {
    "id": "rea-12",
    "numero_cama": "12",
    "unidad": "REA",
    "estado": "Estable",
    "edad": "61",
    "sexo": "H",
    "dias_estancia": "2º día",
    "antecedentes": "HTA, DLP, tabaquismo, VHC+, sífilis+ (2020, sin tto/seguimiento). IAMSEST, enf 3 vasos (IQx: doble by-pass Ao-Co, AMI a DA, safena a OM2). EAo ligera. Apendicectomía.",
    "plan": "Iniciar tolerancia oral hoy, tras decisión de no realizar más intervencionismo coronario.",
    "sistemas": {
      "neurologico": "Consciente, orientado y colaborador, sin focalidad neurológica. GCS: 15 puntos.",
      "hemodinamico": "TA: 110/63 mmHg. FC: 103/min, en RS. Noradrenalina a 0.05 mcg/kg/min (reducción de soporte). Levosimendan terminado. Hgb: 10 g/dl. Troponina I: 63156 pg/ml (pico 1.043.766). AC: tonos rítmicos, sin soplos ni roces.",
      "respiratorio": "FR: 18/min, SatO2: 98 % con GN a 3 l/min. GSA: pH: 7.36, pCO2: 41, pO2: 78. AP: murmullo vesicular conservado, sin estertores patológicos. Rx Tórax: aumento de trama intersticial.",
      "renal": "Urea: 29 mg/dl, Cr: 0.97 mg/dl. Diuresis: 4070 cc (ayer), Balance: -2329 cc (ayer). Iones en rango. Sin tratamiento diurético, no presenta edemas.",
      "digestivo": "Abdomen blando y depresible, peristaltismo disminuido. Bilirrubina total: 0.35 mg/dl, GOT: 212 UI/l, GPT: 64 UI/L. Glucemia: 193 mg/dl (necesidad de insulina regular). Proteínas totales: 6.3 g/dl.",
      "infeccioso": "Afebril (máx 36.7ºC). Leucocitos: 5950/mm3, PCR: 19.69 mg/dl. Tratamiento con penicilina por antecedente de sífilis.",
      "hemostasia_coagulacion": "IQ: 86 %, INR: 1.09, TTPAr: 0.84. Profilaxis de TVP. Plaquetas: 182.000/mm3."
    }
  },
  {
    "id": "ucin-1",
    "numero_cama": "1",
    "unidad": "UCIN",
    "estado": "Estable",
    "edad": "66",
    "sexo": "M",
    "dias_estancia": "1º día",
    "antecedentes": "Carcinoma con metástasis ósea e invasión medular (Rtx, pendiente artrodesis, collarín cervical). Perforación colon con peritonitis fecaloidea.",
    "plan": "Reintroducir oxicodona por la noche. Iniciar agua de confort.",
    "sistemas": {
      "neurologico": "Consciente y orientada, sin focalidad. Dolor controlado con analgésicos de primer escalón.",
      "hemodinamico": "Estable sin precisar soporte vasopresor ni inotrópico. TA: 120/69; RS a 70 lpm. Hgb: 8.8 gr/dl. Láctico: 1.1. No edema ni hematoma en zona quirúrgica.",
      "respiratorio": "Eupneica con buena mecánica respiratoria y buen intercambio gaseoso. Sat O2: 100%. AP: MVC. No ruidos patológicos. Rx tórax: Ensanchamiento mediastínico. No DP ni condensaciones parenquimatosas. GA: pH: 7.41; pCO2: 41; pO2: 107.",
      "renal": "Diuresis conservadas sin precisar soporte diurético. Función renal e iones en rango.",
      "digestivo": "En dieta absoluta, inicia agua de confort. Dolor abdominal difuso con abdomen empastado. Marti-palanca activo lento serohemático.",
      "infeccioso": "Afebril. No elevación de parámetros sépticos. PCR: 18.18; Leu: 4960. Cultivo líquido abdominal: Cocos Gram + sugestivos de Strep/enteroc y bacilos Gram -. Tratamiento con linezolid, meropenem y fluconazol.",
      "hemostasia_coagulacion": "Coagulación en rango. IQ: 77%."
    }
  },
  {
    "id": "ucin-2",
    "numero_cama": "2",
    "unidad": "UCIN",
    "estado": "Crítico",
    "edad": "71",
    "sexo": "H",
    "dias_estancia": "1º día",
    "antecedentes": "HTA, DM, DLP. Ex-fumador. Ca Próstata (tto RT, relugolix). Ca Renal izq (infiltra psoas, trombo vena renal, metástasis pulmonares). IQx: Nefrectomía radical izq.",
    "plan": "Continuar abordaje terapéutico y control evolutivo del paciente en UCIN.",
    "sistemas": {
      "neurologico": "Extubación en quirófano sin incidencias. Analgesia epidural a nivel T9-T10.",
      "hemodinamico": "Intraoperatorio: Hemodinámicamente inestable por sangrado abundante (1L), precisando PC de NA a dosis bajas y transfusión de 1CH. Lactato 1.9. Traslado a UCIN monitorizado.",
      "respiratorio": "Intubación orotraqueal (tubo Murphy nº7.5). Extubación en quirófano sin incidencias. Ventimask 6 L/min en traslado.",
      "renal": "Sondaje vesical. Diuresis intraoperatoria mantenida (450cc).",
      "digestivo": "No datos relevantes.",
      "infeccioso": "Profilaxis antibiótica con cefuroxima.",
      "hemostasia_coagulacion": "Sangrado 1L. Transfusión de 1CH. Fluidoterapia con cristaloides (2200cc ionolyte)."
    }
  },
  {
    "id": "ucin-3",
    "numero_cama": "3",
    "unidad": "UCIN",
    "estado": "N/A",
    "edad": "?",
    "sexo": "?",
    "dias_estancia": "?",
    "antecedentes": "N/A",
    "plan": "N/A",
    "sistemas": {
      "neurologico": "N/A",
      "hemodinamico": "N/A",
      "respiratorio": "N/A",
      "renal": "N/A",
      "digestivo": "N/A",
      "infeccioso": "N/A",
      "hemostasia_coagulacion": "N/A"
    }
  },
  {
    "id": "ucin-4",
    "numero_cama": "4",
    "unidad": "UCIN",
    "estado": "Estable",
    "edad": "44",
    "sexo": "M",
    "dias_estancia": "1º día",
    "antecedentes": "RAM Metamizol/Dexketoprofeno (evitar AINES). HTA. Adenocarcinoma pulmón (Met. cerebral, QT+inmunoterapia). Hipotiroidismo por inmunoterapia. IQx: Tiroidectomía subtotal y linfadenectomía derecha (incompleta por afectación nervio laríngeo recurrente). Apendicectomía.",
    "plan": "Vigilancia y cuidados postoperatorios en UCIN.",
    "sistemas": {
      "neurologico": "Extubación en quirófano sin incidencias. Neuromonitorización intraoperatoria: falta de respuesta nerviosa en nervio laríngeo recurrente derecho. RM cerebral 2/2/26: lesión frontal izquierda preexistente no identificada.",
      "hemodinamico": "Estable durante la intervención. TA: 148/89 mmHg. FC: 82 lpm. SatO2 95%. Sangrado dentro de límites permisibles.",
      "respiratorio": "Intubación orotraqueal con videolaringoscopio (TET flexometálico nº 7). Extubación en quirófano sin incidencias.",
      "renal": "Diuresis conservada 0.5-1 ml/kg/h durante la intervención. Sondaje vesical.",
      "digestivo": "No datos relevantes.",
      "infeccioso": "No datos relevantes.",
      "hemostasia_coagulacion": "Sangrado dentro de límites permisibles."
    }
  },
  {
    "id": "ucin-5",
    "numero_cama": "5",
    "unidad": "UCIN",
    "estado": "N/A",
    "edad": "?",
    "sexo": "?",
    "dias_estancia": "?",
    "antecedentes": "N/A",
    "plan": "N/A",
    "sistemas": {
      "neurologico": "N/A",
      "hemodinamico": "N/A",
      "respiratorio": "N/A",
      "renal": "N/A",
      "digestivo": "N/A",
      "infeccioso": "N/A",
      "hemostasia_coagulacion": "N/A"
    }
  },
  {
    "id": "ucin-6",
    "numero_cama": "6",
    "unidad": "UCIN",
    "estado": "Estable",
    "edad": "41",
    "sexo": "M",
    "dias_estancia": "1º día",
    "antecedentes": "Ex-fumadora (5 años). Distrofia muscular Emery-Dreifuss (afectación muscular/ósea/tendinosa). Trastorno respiratorio restrictivo moderado. Disnea de esfuerzos. IQx previas: Pie cavo, rodilla, estrabismo, clavo gamma cadera derecha.",
    "plan": "Control postoperatorio en REA3 (debido a antecedentes médicos).",
    "sistemas": {
      "neurologico": "Extubación en quirófano sin incidencias. Consciente.",
      "hemodinamico": "Estable intraoperatoriamente. TA 110/70mmHg en RS a 90lpm y SatO2 100%. Sangrado escaso.",
      "respiratorio": "Eupneica respirando aire ambiente pre-op. IOT (TET nº 8). Extubación sin incidencias en quirófano. Trastorno respiratorio restrictivo moderado.",
      "renal": "No datos relevantes.",
      "digestivo": "No datos relevantes.",
      "infeccioso": "No datos relevantes.",
      "hemostasia_coagulacion": "Sangrado escaso."
    }
  }
];
    const PASSWORD_CORRECTA = "misbalare2720"; // La contraseña se inyecta aquí desde el script

    // --- COMPONENTE DE LOGIN ---
    const LoginScreen = ({ onLogin }) => {
      const [input, setInput] = useState("");
      const [error, setError] = useState(false);

      const handleSubmit = (e) => {
        e.preventDefault();
        // Convertimos a minúsculas para que no importe si escriben "UCI" o "uci"
        if (input.toLowerCase() === PASSWORD_CORRECTA.toLowerCase()) {
          onLogin();
        } else {
          setError(true);
          setInput("");
        }
      };

      return (
        <div className="min-h-screen flex items-center justify-center p-4">
          <div className="login-glass p-10 rounded-3xl shadow-2xl max-w-sm w-full text-center">
            <div className="mb-6 inline-flex p-4 bg-blue-600 rounded-2xl text-white shadow-lg shadow-blue-500/30">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="w-8 h-8"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect><path d="M7 11V7a5 5 0 0 1 10 0v4"></path></svg>
            </div>
            <h1 className="text-2xl font-black text-slate-800 mb-2">Acceso Restringido</h1>
            <p className="text-slate-500 text-sm mb-8 font-medium">Dashboard Clínico UCI Quirúrgica</p>
            
            <form onSubmit={handleSubmit} className="space-y-4">
              <input 
                type="password" 
                value={input}
                onChange={(e) => {setInput(e.target.value); setError(false);}}
                placeholder="Introduce la clave..."
                className="w-full px-5 py-3 rounded-xl bg-white/50 border border-slate-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 outline-none transition-all font-bold text-center text-slate-700 placeholder-slate-400"
                autoFocus
              />
              <button type="submit" className="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 rounded-xl shadow-lg shadow-blue-600/30 transition-all active:scale-95">
                Entrar
              </button>
            </form>
            {error && <p className="mt-4 text-red-500 text-xs font-bold animate-pulse">⛔ Clave incorrecta</p>}
          </div>
        </div>
      );
    };

    // --- ICONOS ---
    const Icons = {
      Brain: (p)=><svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z"/><path d="M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z"/></svg>,
      Wind: (p)=><svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M17.7 7.7a2.5 2.5 0 1 1 1.8 4.3H2"/><path d="M9.6 4.6A2 2 0 1 1 11 8H2"/><path d="M12.6 19.4A2 2 0 1 0 14 16H2"/></svg>,
      Heart: (p)=><svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M22 12h-4l-3 9L9 3l-3 9H2"/></svg>,
      Droplet: (p)=><svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M12 22a7 7 0 0 0 7-7c0-2-2-3-4-3l-3-3-3 3c-2 0-4 1-4 3a7 7 0 0 0 7 7z"/></svg>,
      Thermometer: (p)=><svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z"/></svg>,
      Stomach: (p)=><svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M19 20H5a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2Z"/><path d="M12 11h4"/><path d="M12 16h4"/><path d="M8 11h.01"/><path d="M8 16h.01"/></svg>,
      Bed: (p)=><svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M2 4v16"/><path d="M2 8h18a2 2 0 0 1 2 2v10"/><path d="M2 17h20"/><path d="M6 8v9"/></svg>,
      Alert: (p)=><svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/><line x1="12" y1="9" x2="12" y2="13"/><line x1="12" y1="17" x2="12.01" y2="17"/></svg>,
      Clipboard: (p)=><svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><rect width="8" height="4" x="8" y="2" rx="1" ry="1"/><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"/><path d="M12 11h4"/><path d="M12 16h4"/></svg>,
      User: (p)=><svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>,
      Logout: (p)=><svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/><polyline points="16 17 21 12 16 7"/><line x1="21" y1="12" x2="9" y2="12"/></svg>
    };
    const Icon = ({n, c}) => { const I = Icons[n]; return I ? <I className={c} /> : null; };

    // --- COMPONENTES UI DASHBOARD ---
    const BedCard = ({ data, onClick }) => {
      const isUCIN = data.unidad === 'UCIN';
      const colors = { 'Crítico': 'border-l-red-500 bg-red-100 text-red-700', 'Estable': 'border-l-emerald-500 bg-emerald-100 text-emerald-700', 'Alerta': 'border-l-amber-500 bg-amber-100 text-amber-700' };
      const status = colors[data.estado] || colors['Alerta'];
      const unitClass = isUCIN ? 'bg-purple-100 text-purple-700' : 'bg-blue-100 text-blue-700';
      return (
        <div onClick={() => onClick(data)} className={`relative glass-card rounded-xl shadow-sm hover:shadow-2xl hover:-translate-y-1 transition-all p-5 cursor-pointer border border-slate-200 border-l-4 ${status.split(' ')[0]}`}>
          <div className="flex justify-between items-start mb-2">
             <div className="flex items-center gap-3">
               <div className="bg-slate-50 p-2 rounded-lg text-slate-400"><Icon n="Bed" c="w-6 h-6"/></div>
               <div><h3 className="text-xl font-black text-slate-800 leading-none">Cama {data.numero_cama}</h3><span className={`text-[10px] font-black px-2 py-0.5 rounded uppercase ${unitClass}`}>{data.unidad}</span></div>
             </div>
             <span className={`px-2 py-1 rounded text-xs font-bold uppercase ${status.substring(status.indexOf(' ')+1)}`}>{data.estado}</span>
          </div>
          <div className="flex items-center gap-2 text-xs font-bold text-slate-500 mb-3 bg-slate-50 p-1.5 rounded-lg border border-slate-100">
             <span className="flex items-center gap-1"><Icon n="User" c="w-3 h-3"/> {data.edad} años</span><span className="text-slate-300">|</span><span>Día {data.dias_estancia}</span>
          </div>
          <div><p className="text-xs text-slate-400 font-bold uppercase">Paciente</p><p className="text-2xl font-black text-slate-700 truncate">{data.paciente_id}</p></div>
          {data.alertas && <div className="mt-3 flex items-center gap-2 text-red-600 bg-red-50 px-2 py-1 rounded"><Icon n="Alert" c="w-4 h-4 animate-pulse"/><span className="text-xs font-bold">ATENCIÓN</span></div>}
        </div>
      );
    };

    const Section = ({ i, t, txt, col }) => (
      <div className="bg-white/80 p-4 rounded-2xl border border-slate-100 shadow-sm backdrop-blur-sm">
        <div className="flex items-center gap-2 mb-2"><div className={`p-2 rounded-lg ${col}`}><Icon n={i} c="w-5 h-5"/></div><h4 className="text-xs font-bold text-slate-500 uppercase">{t}</h4></div>
        <p className="text-sm font-medium text-slate-700 pl-10 leading-relaxed">{txt || "Sin datos."}</p>
      </div>
    );

    const Modal = ({ p, onClose }) => {
      if(!p) return null;
      const isUCIN = p.unidad === 'UCIN';
      const headCol = isUCIN ? 'bg-purple-600' : 'bg-blue-600';
      return (
        <div className="fixed inset-0 modal-backdrop flex items-center justify-center p-4 z-50" onClick={onClose}>
          <div className="bg-slate-50 w-full max-w-6xl max-h-[95vh] overflow-y-auto rounded-3xl shadow-2xl" onClick={e=>e.stopPropagation()}>
            <div className="bg-white p-6 border-b border-slate-100 flex justify-between items-center sticky top-0 z-10 shadow-sm">
               <div className="flex items-center gap-4">
                 <div className={`h-14 w-14 ${headCol} rounded-xl flex items-center justify-center text-white font-black text-2xl shadow-md`}>{p.numero_cama}</div>
                 <div>
                    <h2 className="text-3xl font-black text-slate-800 tracking-tight">{p.paciente_id}</h2>
                    <div className="flex items-center gap-3 text-slate-500 font-bold text-sm mt-1">
                        <span className="bg-slate-100 px-2 py-0.5 rounded text-slate-600">{p.sexo}</span>
                        <span>{p.edad} años</span><span className="text-slate-300">•</span><span>Estancia: Día {p.dias_estancia}</span>
                    </div>
                 </div>
               </div>
               <button onClick={onClose} className="px-5 py-2.5 bg-slate-100 rounded-xl font-bold text-slate-600 hover:bg-slate-200 transition-colors">Esc Cerrar</button>
            </div>
            <div className="p-6 md:p-8 space-y-6">
               {p.antecedentes && p.antecedentes !== "?" && <div className="bg-slate-100/80 p-5 rounded-2xl border border-slate-200"><h3 className="text-xs font-black text-slate-400 uppercase tracking-widest mb-2">Antecedentes Personales (AP)</h3><p className="text-base font-medium text-slate-700 italic">{p.antecedentes}</p></div>}
               <div className={`p-1 rounded-2xl shadow-sm bg-gradient-to-r ${isUCIN ? 'from-purple-500 to-purple-400' : 'from-blue-500 to-blue-400'}`}><div className="bg-white p-5 rounded-xl"><div className="flex gap-2 mb-2 items-center text-slate-800"><Icon n="Clipboard" c="w-6 h-6"/><span className="font-black uppercase tracking-wide">Plan Terapéutico</span></div><p className="text-lg font-medium pl-8 leading-relaxed text-slate-800">{p.plan}</p></div></div>
               <div className="grid grid-cols-1 md:grid-cols-3 gap-5">
                 <Section i="Brain" t="Neurológico" txt={p.sistemas.neurologico} col="bg-indigo-100 text-indigo-600"/>
                 <Section i="Wind" t="Respiratorio" txt={p.sistemas.respiratorio} col="bg-sky-100 text-sky-600"/>
                 <Section i="Heart" t="Hemodinámico" txt={p.sistemas.hemodinamico} col="bg-rose-100 text-rose-600"/>
                 <Section i="Droplet" t="Renal" txt={p.sistemas.renal} col="bg-amber-100 text-amber-600"/>
                 <Section i="Thermometer" t="Infeccioso" txt={p.sistemas.infeccioso} col="bg-purple-100 text-purple-600"/>
                 <Section i="Stomach" t="Digestivo" txt={p.sistemas.digestivo} col="bg-lime-100 text-lime-600"/>
               </div>
            </div>
          </div>
        </div>
      );
    };

    // --- COMPONENTE PRINCIPAL (GESTIÓN DE SESIÓN) ---
    const App = () => {
      const [isLoggedIn, setIsLoggedIn] = useState(false);
      const [sel, setSel] = useState(null);

      // Al iniciar, miramos si ya estaba logueado en esta sesión para no pedir clave al recargar
      useEffect(() => {
        const session = sessionStorage.getItem("uci_auth");
        if (session === "true") setIsLoggedIn(true);
      }, []);

      const handleLoginSuccess = () => {
        setIsLoggedIn(true);
        sessionStorage.setItem("uci_auth", "true"); // Guarda la sesión mientras no cierren el navegador
      };
      
      const handleLogout = () => {
        setIsLoggedIn(false);
        setSel(null);
        sessionStorage.removeItem("uci_auth");
      };

      // Si no está logueado, mostramos SOLO la pantalla de Login
      if (!isLoggedIn) {
        return <LoginScreen onLogin={handleLoginSuccess} />;
      }

      // Si está logueado, mostramos el Dashboard normal
      const reas = PATIENTS.filter(p=>p.unidad==='REA');
      const ucins = PATIENTS.filter(p=>p.unidad==='UCIN');
      
      return (
        <div className="min-h-screen p-6 md:p-10 max-w-[1920px] mx-auto">
           <header className="mb-10 flex flex-col md:flex-row justify-between items-end gap-4">
              <div><h1 className="text-5xl font-black text-slate-800 tracking-tighter mb-2">UCI Quirúrgica <span className="text-blue-600">Dashboard</span></h1><p className="text-slate-500 font-medium">Vista clínica en tiempo real • REA + UCIN</p></div>
              <div className="flex gap-4 items-center">
                <div className="bg-white px-4 py-2 rounded-xl shadow-sm border border-slate-100 text-sm font-bold text-slate-400">Act: {new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})}</div>
                <button onClick={handleLogout} className="bg-red-50 hover:bg-red-100 text-red-600 p-2 rounded-xl transition-colors" title="Cerrar sesión"><Icon n="Logout" c="w-6 h-6"/></button>
              </div>
           </header>
           {reas.length>0 && <div className="mb-12"><h2 className="text-2xl font-black text-blue-900 mb-6 flex items-center gap-2"><span className="w-2 h-8 bg-blue-500 rounded-full"></span>REA</h2><div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5 gap-6">{reas.map(p=><BedCard key={p.id} data={p} onClick={setSel}/>)}</div></div>}
           {ucins.length>0 && <div><h2 className="text-2xl font-black text-purple-900 mb-6 flex items-center gap-2"><span className="w-2 h-8 bg-purple-500 rounded-full"></span>UCIN</h2><div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5 gap-6">{ucins.map(p=><BedCard key={p.id} data={p} onClick={setSel}/>)}</div></div>}
           {sel && <Modal p={sel} onClose={()=>setSel(null)}/>}
        </div>
      );
    };

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<App />);
  </script>
</body>
</html>