<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />
  
  <title>Acceso UCI</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <style>
    body { background-color: #f0f4f8; background-image: radial-gradient(#cbd5e1 1px, transparent 1px); background-size: 24px 24px; font-family: system-ui, sans-serif; }
    .glass-card { background: linear-gradient(145deg, #ffffff, #f8fafc); }
    .modal-backdrop { background-color: rgba(15, 23, 42, 0.8); backdrop-filter: blur(8px); }
    .login-glass { background: rgba(255, 255, 255, 0.7); backdrop-filter: blur(20px); border: 1px solid rgba(255, 255, 255, 0.5); }
    ::-webkit-scrollbar { width: 8px; } ::-webkit-scrollbar-thumb { background: #94a3b8; border-radius: 4px; }
  </style>
  <script> tailwind.config = { theme: { extend: { colors: { lime: { 100: '#ecfccb', 600: '#65a30d' } } } } } </script>
</head>
<body>
  <div id="root"></div>
  <script type="text/babel">
    const { useState, useEffect } = React;
    const PATIENTS = [
  {
    "id": "rea-1",
    "numero_cama": "1",
    "unidad": "REA",
    "estado": "Crítico",
    "edad": "77",
    "sexo": "M",
    "dias_estancia": "15",
    "antecedentes": "Mujer de 77 años con enfermedad coronaria de 3 vasos, doble bypass previo. RAM a medicación que genere hemólisis por déficit de G6PDH. FEVI moderadamente deprimida preoperatoria. Ingresó en REA tras cirugía y desarrolló IAMSEST, insuficiencia respiratoria aguda, shock cardiogénico postinfarto con BIAC, sospecha de rotura de septo interventricular (CIV postinfarto) y cateterismo con múltiples ACTP y colocación de balón de contrapulsación intraaórtico. Actualmente, IOT y sedada, con múltiples complicaciones.",
    "plan": "Mantener sedoanalgesia con midazolam y morfina, control neurológico. Soporte vasopresor con noradrenalina y BCPIAo. Control hemodinámico estricto (IC, IRVS, VVS, PVC, Hb, lactato). Manejo de episodios de FA con amiodarona y MCP epicárdico. Ventilación mecánica invasiva en SIMV, ajustes según GA y Rx tórax. Diuresis con furosemida, monitorización de función renal e iones. Dieta absoluta. Tratamiento antibiótico con Tazocel y Linezolid por infección por Staph aureus. Tromboprofilaxis con inyesprin, clopidogrel y enoxaparina.",
    "sistemas": {
      "neurologico": "IOT. Sedada con MDZ y morfina. Pupilas anisocóricas (I>D), reactivas. No focalidades aparentes.",
      "hemodinamico": "Inestable. Precisa soporte vasopresor con NA a 14 ml/h (0.6 mcg/kg/min) y BCPIAo 1/1. IC>4.5; IRVS: 1300; VVS: 8; PVC: 10. Hgb: 9.2 gr/dl; Hto: 28.7%; Láct: 1.4. En RS a 90 lpm con amiodarona IV (900 mg/24h) por FA paroxística previa. MCP epicárdico funcionante.",
      "respiratorio": "IOT en SIMV. VT: 475; FiO2: 50%. GA: pH: 7.47; pCO2: 39; pO2: 86; HCO3: 28.4. Rx tórax: DP derecho ya conocido. AP: Crepitantes en ambos campos pulmonares. Eco pulmonar: > 3-5 líneas B/campo bilat.",
      "renal": "Diuresis conservada con furosemida IV (2880 ml/24h, balance +500 ml). Cr: 0.47/U: 43; FG<90 ml/min. Iones: Na+: 135; k+: 3.7; Ca++ corr: 9.5; Fosfato: 3; Mg++: 1.98.",
      "digestivo": "Dieta absoluta. Enzimas hepáticas normales (BT: 0.85).",
      "infeccioso": "Afebril. Leu: 9680; PCR: 22. BAS (9/2/26): Cocos Gram + (Staph). BAS (8/2/26): Staph aureus S a todo, R a penicilina. Tto: Tazocel (4/0.5 cada 6h)+ Linezolid 600/12h.",
      "coagulacion": "IQ: 72% (en rango). Tto: inyesprin 450 mg + plavix 75 mg + 40 mg SC de enoxaparina."
    }
  },
  {
    "id": "rea-2",
    "numero_cama": "2",
    "unidad": "REA",
    "estado": "Estable",
    "edad": "82",
    "sexo": "M",
    "dias_estancia": "1",
    "antecedentes": "Mujer de 82 años con colangiocarcinoma intrahepático, sometida a hepatectomía izquierda ampliada. Antecedentes de depresión e hipotiroidismo, colecistectomía previa. Sin RAMc ni FRCV. Durante la cirugía, presentó labilidad hemodinámica que requirió soporte con fenilefrina y noradrenalina (suspendido al final). Extubada en quirófano sin incidencias.",
    "plan": "Control postoperatorio en UCCQ para abordaje terapéutico y control evolutivo. Vigilancia hemodinámica y respiratoria, aunque fue extubada en quirófano y se trasladó estable.",
    "sistemas": {
      "neurologico": "Consciente y orientada pre-inducción. Extubación en quirófano sin incidencias.",
      "hemodinamico": "Labilidad hemodinámica intraoperatoria (requirió fenilefrina y noradrenalina, que se pudo suspender al final). Traslado a UCCQ estable.",
      "respiratorio": "IOT con TET nº7. Extubación en quirófano sin incidencias. SpO2 97% a aire ambiente pre-inducción.",
      "renal": "Diuresis intraquirófano de 400cc.",
      "digestivo": "Colangiocarcinoma intrahepático. Hepatectomía izquierda ampliada.",
      "infeccioso": "Profilaxis antibiótica con Cefazolina 2g.",
      "coagulacion": "Sangrado aproximado de 1000cc intraoperatorio. Transfusión de 2 unidades de sangre autóloga."
    }
  },
  {
    "id": "rea-3",
    "numero_cama": "3",
    "unidad": "REA",
    "estado": "Crítico",
    "edad": "59",
    "sexo": "H",
    "dias_estancia": "10",
    "antecedentes": "Varón de 59 años con antecedentes de RAM a betalactámicos, HTA, DLP, TVP recidivante por déficit de proteína C, VIH C3 con pérdida de visión por coriorretinitis (CMV, Toxoplasma), condilomas anales y carcinoma epidermoide perianal T3. Ingresó por perforación intestinal, sometido a laparoscopia exploradora + colostomía. Reintervenido de urgencia por perforación intestinal e isquemia de colon, desarrollando shock séptico grave con inestabilidad hemodinámica, insuficiencia respiratoria e importante plaquetopenia. Actualmente sedoanalgesiado, IOT y con soporte vasopresor.",
    "plan": "Mantener sedoanalgesia con propofol y morfina, control de RASS y BIS. Vigilancia hemodinámica con noradrenalina y amiodarona. Control de la hemostasia y coagulación (plaquetas, IQ), con tromboprofilaxis (clexane). Ventilación mecánica invasiva con parámetros ajustados. Realizar destete progresivo. Monitorización de función renal e iones, reponer fosfato y mantener balances neutros con suero glucosado. Vigilancia digestiva postquirúrgica (drenajes, ileostomía), control de glucemia y enzimas de colestasis. Tratamiento antibiótico y antifúngico para el shock séptico. Control niveles de vancomicina.",
    "sistemas": {
      "neurologico": "Sedoanalgesiado con propofol (400 mg/h) y morfina (0.5 mg/h), RASS -3/-4. BIS aproximado de 50. Pupilas anisocóricas (I>D), reactivas (AP: coriorretinitis). No focalidades aparentes.",
      "hemodinamico": "TA 114/55 mmHg con noradrenalina a 5 ml/h. RS a 90lpm con perfusión de amiodarona. Tonos rítmicos, soplo sistólico eyectivo. Pulsos periféricos presentes y simétricos. Eco 09/02: buena contractilidad de visu, Cava 1.6 cm colapsable. Hb 8.8 g/dl (9.7), Hto 28.5% (30), lactato normalizado de 1.1 mmol/l (1.7).",
      "respiratorio": "IOT en SIMV con FiO2 0.65, VT 525 cc, FR 16, PEEP 10 y PS 15. Realiza 1-2 respiraciones espontáneas/min. Escasas secreciones. Roncus aislados. Rx tórax: aumento de densidad en base izquierda. GSA: pH 7.4; pCO2 36; pO2: 92; HCO3 22.3; EB -2.5; Sat 96.7%. Angio-TC torácico 09/02: opacidades de espacio aéreo (posible aspirativo), pequeño derrame pleural izquierdo y atelectasia pasiva.",
      "renal": "Portador de sondaje vesical. Buenas diuresis. Función renal normal (Cr 0.58, Urea 111, FG >90). HiperNa 150, K 4.1, P 2.2, Mg 2.03. Reposición de fosfato y agua libre por SNG.",
      "digestivo": "Dieta absoluta. SNG con débito de 50 de aspecto seroso. NPT ajustada. Glucemias bien controladas. Ileostomía mínimamente productiva (685 cc). Abdomen blando y depresible, doloroso a la palpación profunda, peristaltismo disminuido. Material purulento por drenaje Martí Palanca. GOT 30, GPT 12, GGT 336, FA 355. Omeprazol.",
      "infeccioso": "Afebril. Leucocitos: 23.000 (leucocitosis estable), PCR: 14 (alta). Tto antibiótico con Aztreonam + Metronidazol + Vancomicina + Anidulafungina por shock séptico y peritonitis. Cultivos líquidos abdominales previos: E. coli, Bacteroides stercoris, Clostridium innocuum, Candida tropicalis, Enterococcus faecium.",
      "coagulacion": "Plaquetas hoy en 153.000/mm3. Coagulación alterada levemente con IQ 61%, APTTr 1.03, INR 1.37. No sangrados activos. Tromboprofilaxis con medias de compresión intermitente + clexane 60 mg/24 horas."
    }
  },
  {
    "id": "rea-4",
    "numero_cama": "4",
    "unidad": "REA",
    "estado": "Crítico",
    "edad": "40",
    "sexo": "H",
    "dias_estancia": "20",
    "antecedentes": "Varón de 40 años, obeso, SAOS, hiperuricemia. Ingresó por TCE grave con cerebritis y mala evolución, requirió craniectomía descompresiva, traqueostomía y múltiples cambios antibióticos por infecciones complejas (Staphylococcus epidermidis, Proteus mirabilis BLEE, Enterobacter hormaechei carbapenem resistente, Candida tropicalis). Presentó AKI-3 que requirió diálisis intermitente, actualmente en resolución. Agitación de difícil control y actividad epileptiforme. En O2 en T desde el 05/02.",
    "plan": "Suspender propofol para evaluación neurológica y de agitación. Manejo de agitación con clonidina, quetiapina, clonazepam, propranolol y zuclopentixol. Tratamiento antiepiléptico con keppra y lacosamida. Mantener TQT y O2 en T, con nebulizaciones y vigilancia respiratoria. Continuar pauta de agua libre para la función renal. Vigilancia de colestasis disociada. Mantenimiento del tratamiento antibiótico y antifúngico. Control de cultivos y seguimiento de posibles contaminaciones de catéteres. Actualizar dosis de Ceftarolina y Ceftazidima-Avibactam.",
    "sistemas": {
      "neurologico": "Suspendida PC de propofol. Agitación, apertura ocular espontánea. No conecta a la llamada ni obedece órdenes. Moviliza las 4 extremidades. Hemorragia conjuntival en ojo derecho. Tto: clonidina, quetiapina, clonazepam, propranolol, zuclopentixol. Antiepilépticos: keppra, lacosamida.",
      "hemodinamico": "Estable sin requerimiento de aminas. RS en monitor con FC en torno a 70-80lpm. Lactato: 2.3.",
      "respiratorio": "Portador de TQT shiley 8.5. En O2 en T bien tolerada (desde 05/02). Eupneico, buena mecánica ventilatoria y SatO2 100%. Moviliza secreciones (abundantes). Sibilantes espiratorios. GA: pH: 7.29; pO2: 116; pCO2: 53; HCO3: 25.5; EB: -1.1. Rx tórax: persiste congestión hiliar.",
      "renal": "Diuresis conservada (2570 ml/24h, BH -1074). Función renal alterada (AKI-3) en resolución (FG 59, Cr 1.47, Urea 47). Último ciclo de diálisis el 24/01. Ionograma en rango.",
      "digestivo": "Portador de SNG en tratamiento con NE (Low protein) a 60ml/h con buena tolerancia. Glucemias bien controladas (insulina rápida). Realizando deposiciones. Descenso de enzimas de colestasis (GGT 519, FA 192). Bilirrubina total en rango. Abdomen blando y depresible, peristaltismo conservado.",
      "infeccioso": "Afebril. PCR 1.73 en descenso. Tto: Ceftarolina 600mg/12h + Ceftazidima-Avibactam 2g/8h + Fluconazol 400mg/24h. Herida quirúrgica sin empeoramiento. BAS 29/1/26: Candida tropicalis + Enterobacter hormaechei (carbapenem resistente). Punta catéter (06/02): S. epidermidis (posible contaminación).",
      "coagulacion": "No signos de sangrado. Tromboprofilaxis con clexane 80mg/24h. Coagulación en rango. Plaquetas: 426.000. Hb: 8.8."
    }
  },
  {
    "id": "rea-5",
    "numero_cama": "5",
    "unidad": "REA",
    "estado": "Sin paciente",
    "edad": "?",
    "sexo": "?",
    "dias_estancia": "?",
    "antecedentes": "Sin paciente asignado a esta cama.",
    "plan": "No aplica.",
    "sistemas": {}
  },
  {
    "id": "rea-6",
    "numero_cama": "6",
    "unidad": "REA",
    "estado": "Crítico",
    "edad": "69",
    "sexo": "H",
    "dias_estancia": "2",
    "antecedentes": "Varón de 69 años, con antecedentes de HTA, DLP, DM2 y ex-fumador. Meralgia parestésica. Sometido a cirugía cardíaca por aneurisma de aorta ascendente severa. Trasladado a REA IOT, sedado e inestable hemodinámicamente, requiriendo soporte vasopresor.",
    "plan": "Mantener IOT y sedación con propofol. Soporte con noradrenalina para mantener TAM>75 mmHg. Monitorización hemodinámica con catéter AP. Control de TI y lactato. Manejo de marcapasos epicárdico. Ajuste de ventilación mecánica. Inicio de furosemida en perfusión por diuresis justas y empeoramiento de la función renal. Suplementos de Ca y fosfato. Control SIRS y coagulación.",
    "sistemas": {
      "neurologico": "IOT sedado con PPF a 10 ml/h.",
      "hemodinamico": "Inestable. Precisa soporte con noradrenalina para TAM> 75 mmHg. IC: 1.6; IRVS: 2400; PAP: 36/16/12; PEAP: 15; PVC: 20. TI: 3818. Láct: 3.4. Hgb: 9.5 (tras 1 CH). Escaso drenaje por tubos de tórax. RS a 85 lpm. Marcapasos epicárdico en VVI funcionante.",
      "respiratorio": "IOT en SIMV. FiO2: 60%. GA: pH: 7.37; pCO2: 39; pO2: 71; HCO3: 22.5. Rx tórax: Sin hallazgos de interés.",
      "renal": "Diuresis justas. Inicio PC furosemida 4 ml/h. Ligero empeoramiento de función renal. Cr: 1.77; U: 55; FG: 29 ml/min. Iones: Na+: 137; K+: 3.5; Fosfato: 2; Ca++ co: 8; Mg++: 3.46.",
      "digestivo": "No información específica en la nota.",
      "infeccioso": "Afebril. Leu: 10460; PCR: 6.64.",
      "coagulacion": "IQ: 62%."
    }
  },
  {
    "id": "rea-7",
    "numero_cama": "7",
    "unidad": "REA",
    "estado": "Crítico",
    "edad": "77",
    "sexo": "H",
    "dias_estancia": "2",
    "antecedentes": "Varón de 77 años, ex-fumador, DMII, DLP, EPOC leve, GIST estadío IV con metástasis. Ingresó en REA tras cirugía de urgencia por perforación sigmoidea por tumor metastásico, sigmoidectomía + resección de íleon con anastomosis y colostomía. Intraoperatoriamente inestable hemodinámicamente, oligoanúrico, anémico y acidótico con abundante líquido ascítico. Post-operatorio inmediato con alta necesidad de noradrenalina, taquicardia y mala perfusión. Actualmente con soporte de NA, con ascenso de leucocitos y PCR.",
    "plan": "Destete progresivo de noradrenalina y mantenimiento de albúmina. Vigilancia respiratoria tras extubación exitosa, con GNAF. Monitorización de parámetros infecciosos (leucocitos, PCR, procalcitonina) y cultivos de líquido abdominal. Mantenimiento del tratamiento antibiótico (Linezolid y Meropenem). Control de coagulación y transfusión de hemoderivados si es necesario. Vigilancia de función renal y balance hídrico. Inicio de Nutrición Parenteral por dieta absoluta y colostomía no funcionante.",
    "sistemas": {
      "neurologico": "Despierto, responde a la llamada (extubado).",
      "hemodinamico": "Inestable. Requerimientos de NA en descenso (actualmente a 12 ml/h). RS con 100lpm. AC: Rítmico sin soplos. Hb 7.9 (post-transfusión de 2CH).",
      "respiratorio": "Extubación exitosa. Ahora eupneico con GNAF 30/40. Sat O2 97%.",
      "renal": "Diuresis con PC de Furosemida. Cr 1.65, Urea 72, FG 39, Na 130, K 3.7, Cl 103. Diuresis total 525 ml, Balance +1182.5 ml.",
      "digestivo": "Dieta absoluta. Abdomen blanco depresible, doloroso a la palpación profunda. Colostomía no funcionante. Drenaje de líquido serohemático. Portador de SNG. Solicitado inicio de NPT.",
      "infeccioso": "Leucocitos en ascenso 24.470. PCR 26.17. Procalcitonina >100. Tto antibiótico con Linezolid y Meropenem. Pendiente cultivo del líquido abdominal.",
      "coagulacion": "Coagulación en rango. No evidencia de sangrado activo. Hb 7.9. Plaquetas 396.000."
    }
  },
  {
    "id": "rea-8",
    "numero_cama": "8",
    "unidad": "REA",
    "estado": "Crítico",
    "edad": "75",
    "sexo": "H",
    "dias_estancia": "1",
    "antecedentes": "Varón de 75 años con DLP, hiperplasia benigna de próstata y FA cardiovertida en 2025. Sometido a cirugía programada de recambio valvular mitral y aórtico con bioprótesis y anuloplastia tricúspide. Intraoperatoriamente presentó FV tras desclampaje de aorta, requiriendo desfibrilaciones y marcapasos epicárdico. Salió de CEC con dobutamina. Trasladado a UCIQ intubado para control postoperatorio.",
    "plan": "Control postoperatorio inmediato en UCIQ. Mantener IOT y soporte ventilatorio. Vigilancia hemodinámica estrecha con dobutamina y marcapasos VVI. Monitoreo de Swan-Ganz (PAP). Revertir efectos de heparina con protamina. Controlar la aparición de arritmias postoperatorias.",
    "sistemas": {
      "neurologico": "Intubado. Previamente Consciente y Orientado a la llegada a quirófano.",
      "hemodinamico": "Inestable. Requiere dobutamina. Presentó FV intraoperatoria y FA a 40 lpm post-desclampaje de aorta. Conectado a MCP VVI a 80 lpm. PAP 45/30 (intraoperatorio).",
      "respiratorio": "IOT. TET 7.5 mm. SpO2 95% pre-inducción.",
      "renal": "No información específica en la nota.",
      "digestivo": "No información específica en la nota.",
      "infeccioso": "No información específica en la nota.",
      "coagulacion": "Heparinización (240 mg), Protamina (300 mg). No se transfundieron hemoderivados."
    }
  },
  {
    "id": "rea-9",
    "numero_cama": "9",
    "unidad": "REA",
    "estado": "Crítico",
    "edad": "?",
    "sexo": "H",
    "dias_estancia": "35",
    "antecedentes": "Varón (edad no especificada, se infiere por patologías) con RAM a petidina, fumador, HTA, DLP, Adenocarcinoma de pulmón LSD (bilobectomía previa). Historial de AAA infrarrenal y A. Ilíaca (EVAR 2022, reintervención 2025 por migración). ERC en prediálisis con estenosis renal severa bilateral. Ingresó por rotura de saco aneurismático, reintervenido de EVAR sobre EVAR. Durante el ingreso, inestabilidad hemodinámica, shock hemorrágico, FRA anúrico con TRRC (ahora HD intermitente), elevación transaminasas, destete complicado con traqueotomía, y distensión abdominal (posible isquemia intestinal).",
    "plan": "Mantener al paciente tranquilo con Quetiapina. Continuar con antihipertensivos (Bisoprolol, Amlodipino) para control de la HTA. Mantener tromboprofilaxis con Tinzaparina y AAS. Continuar con destete respiratorio, con periodos de O2 en T con válvula fonatoria y nebulizaciones con MESNA. Intentar balance negativo para reducir edemas, con bolos de Furosemida. Monitorear marcadores infecciosos (PCR, Leucocitos), actualmente sin antibioterapia activa. Mantener dieta oral sin progresar, con NPT, y vigilancia de colestasis disociada y signos de isquemia intestinal.",
    "sistemas": {
      "neurologico": "Consciente y aparentemente orientado. Colaborador y tranquilo. Quetiapina oral para descanso nocturno.",
      "hemodinamico": "Estable con tendencia a la HTA (TA 164/90 mmHg), en tratamiento con Bisoprolol y Amlodipino. RS a 78 lpm, sin extrasístoles. Láctico 1.5. Perfusion periférica regular en MMII. EcoDoppler venoso de MID (28/01) sin TVP.",
      "respiratorio": "TQT percutánea. O2 en T a 5 l/min durante el día y PS por la noche (PS10/PEEP 6). Sentado en SARA, buena tolerancia a válvula fonatoria. Disminución de MV en base derecha. GA PS: pH 7.44, pCO2 35, pO2 77, HCO3 27.1. Rx TORAX: Infiltrado alveolar difuso (sugiere congestión).",
      "renal": "FRA en hemodiálisis intermitente (última hace 4 días). Edemas con foveas en MMII. Buen ritmo diurético con bolos de Furosemida. BH -768 ml. Cr 4.77, FG 12, U 234.",
      "digestivo": "Abdomen muy distendido de forma habitual. NPT y tolerancia a cremas y yogures (poco apetente). Enzimas hepáticas de citólisis normales; enzimas de colestasis elevadas (GGT 146, FA 233, BilT 0.65). Colonoscopia (29/01): compatible con signos de colitis isquémica.",
      "infeccioso": "Afebril. Leucocitos 16.010, PCR 10.19. Sin antibioterapia actual. Hemocultivo del 31/01: S. epidermidis (vía central, no periférica).",
      "coagulacion": "Hb 8.6, Plaquetas 467.000/mm3. AAS 100 mg/d vo. Anticoagulación a dosis profilácticas con Tinzaparina 4.500U/24h."
    }
  },
  {
    "id": "rea-10",
    "numero_cama": "10",
    "unidad": "REA",
    "estado": "Sin paciente",
    "edad": "?",
    "sexo": "?",
    "dias_estancia": "?",
    "antecedentes": "Sin paciente asignado a esta cama.",
    "plan": "No aplica.",
    "sistemas": {}
  },
  {
    "id": "rea-11",
    "numero_cama": "11",
    "unidad": "REA",
    "estado": "Crítico",
    "edad": "75",
    "sexo": "M",
    "dias_estancia": "3",
    "antecedentes": "Mujer de 75 años con historial complejo: ingresó en UCCPQ tras cirugía de sustitución valvular aórtica, reintervenida por taponamiento cardíaco. Múltiples complicaciones: FRA, FA rápida, hemorragia alveolar, laceración pulmonar, broncoaspiración, traqueotomía con fracaso de decanulación y recanulación urgente. Polineuromiopatía del paciente crítico y apatía. Reingresó desde planta por episodios de desaturación, trabajo respiratorio, febrícula/fiebre, secreciones abundantes y mal estado general. Actualmente con TQT, agitación y en tratamiento para infecciones.",
    "plan": "Manejo de agitación con haloperidol, olanzapina, escitalopram, mirtazapina; consideración de dexdor si mala adaptación a VM. Mantenimiento ventilatorio con cánula de shiley, reducción gradual de FiO2 y PS/PEEP. Monitoreo de GA y aplazamiento de TAC torácico. Vigilancia hemodinámica (TA, FC, Hb, lactato, ECOTT). NPT personalizada por negación a la ingesta y úlcera sacra. Vigilancia de fiebre, leucocitosis y PCR, y ajuste de tratamiento antibiótico y antifúngico según cultivos. Mantenimiento de tromboprofilaxis.",
    "sistemas": {
      "neurologico": "Consciente, obedece órdenes sencillas. Mejoría de polineuropatía. Episodios de agitación (tto: haloperidol, olanzapina, escitalopram, mirtazapina). Psiquiatría valora falta de capacidad para tomar decisiones.",
      "hemodinamico": "Hemodinámicamente estable sin necesidad de DVA. Tendencia a HTA en episodios de taquipnea. Ritmo sinusal en monitor en torno a 80 lpm. Hb 7.9 g/dL. Láctico 1.8 mmol/L. ECOTT (09/02): adecuado tamaño de cavidades izquierdas, no derrame pericárdico. Función biventricular normal.",
      "respiratorio": "Conectada a través de cánula de shiley a modo PS/PEEP 14/8, FIO2 45%. Tto con nebulizaciones (muconeb, budesonida, ipratropio). ACP: MVC en ambos hemitórax, sin ruidos sobreañadidos. GA: pH: 7.43; pO2: 161; pCO2: 45; HCO3: 29.9 Lact:1.8. Rx Tórax 9/2/26: aumento de densidad en ambos hemitórax (congestión).",
      "renal": "Diuresis conservada (0.5cc/kg/h) a través de sondaje urinario. Función renal estable (FG 90, Cr 0.51, Urea 84). Sin alteraciones iónicas significativas.",
      "digestivo": "Abdomen blando, depresible, no doloroso. RHA presentes. Proteínas totales 6.1 g/dL. La paciente se niega a comer, se mantiene con NPT personalizada. Adecuado control glucémico. Úlcera sacra.",
      "infeccioso": "Ayer nuevo pico febril de 38.5º. Discreta neutrofilia 8.840, PCR 10.48. Tto antibiótico y antifúngico con Linezolid, Fluconazol, Meropenem. BAS (8/2/26): Cocos Gram + (staph aureus por PCR) + Rinovirus.",
      "coagulacion": "Sin signos de sangrado. Plaquetas y hemostasia en rango. Tromboprofilaxis con enoxaparina 40/24h y AAS 100mg."
    }
  },
  {
    "id": "rea-12",
    "numero_cama": "12",
    "unidad": "REA",
    "estado": "Estable",
    "edad": "71",
    "sexo": "M",
    "dias_estancia": "1",
    "antecedentes": "Mujer de 71 años con ALERGIA A BETA-LACTÁMICOS, HTA, fumadora. Sometida a BEVAR por AA toraco-abdominal. Se realizó punción dural para catéter de drenaje lumbar. Extubada en quirófano sin incidencias, hemodinámicamente estable con bajo soporte vasopresor (noradrenalina diluida) para objetivos de PAM y PPM durante la intervención. Trasladada a UCCQ sin incidencias.",
    "plan": "Control postoperatorio en UCCQ. Vigilancia neurológica post-extubación y por catéter de drenaje lumbar. Mantenimiento de la estabilidad hemodinámica. Monitorización de diuresis. Manejo de la alergia a betalactámicos.",
    "sistemas": {
      "neurologico": "Extubación orotraqueal en quirófano sin incidencias. Catéter de Drenaje Lumbar con presión estable en 10 mmHg.",
      "hemodinamico": "Estable durante la intervención. Mantenimiento de PAM>80 mmHg con noradrenalina diluida. TA: 160/90 mmHg. FC: 50 lpm. SatO2 98% (pre-inducción).",
      "respiratorio": "Intubación orotraqueal y extubación en quirófano sin incidencias. TET nº 7.5.",
      "renal": "Diuresis total 1000 cc intraoperatoria.",
      "digestivo": "No información específica en la nota.",
      "infeccioso": "ALERGIA A BETA-LACTÁMICOS. No se menciona profilaxis antibiótica específica en la nota post-cirugía.",
      "coagulacion": "Sangrado dentro de límites permisibles."
    }
  },
  {
    "id": "ucin-1",
    "numero_cama": "1",
    "unidad": "UCIN",
    "estado": "Estable",
    "edad": "62",
    "sexo": "H",
    "dias_estancia": "1",
    "antecedentes": "Varón de 62 años con HTA, DM2, DLP (intolerancia a estatinas), cardiopatía isquémica crónica (IAM 2011, oclusión CD, estenosis DA distal con stent), claudicación intermitente, ictus 2015 con secuelas de memoria y habla, DCL vascular, SPI y estenosis carotídea bilateral. Hernia de hiato ERGE. Sometido a endarterectomía carotídea izquierda. Presentó labilidad hemodinámica intraoperatoria. Extubado en quirófano sin incidencias y trasladado a UCIN.",
    "plan": "Control postoperatorio en UCIN. Vigilancia de la función neurológica (secuelas de ictus) y hemodinámica (historial de labilidad). Monitorización de INVOS. Mantener diuresis conservada. Profilaxis antitrombótica post-quirúrgica (heparina).",
    "sistemas": {
      "neurologico": "Extubación en quirófano sin incidencias. Antecedentes de ictus con secuelas de memoria y habla.",
      "hemodinamico": "Labilidad hemodinámica durante la intervención. INVOS basal 80/79, estable. TA 210/100 mmHg. FC 80 lpm (pre-inducción).",
      "respiratorio": "Extubación en quirófano sin incidencias. TET nº 7.5 flexometálico.",
      "renal": "Diuresis conservada 0.5-1 ml/kg/h intraoperatoria.",
      "digestivo": "Hernia del hiato ERGE con esofagitis.",
      "infeccioso": "No información específica en la nota.",
      "coagulacion": "Administración de 5000 UI Heparina Na. Sangrado dentro de límites permisibles."
    }
  },
  {
    "id": "ucin-2",
    "numero_cama": "2",
    "unidad": "UCIN",
    "estado": "Estable",
    "edad": "44",
    "sexo": "M",
    "dias_estancia": "1",
    "antecedentes": "Mujer de 44 años con múltiples alergias (penicilina, aminopenicilinas, aminofilina, adrenalina e hidrocortisona, ácaros, caspa de gato/perro) y asma bronquial severa desde la infancia, con historial de crisis asmática con parada respiratoria e IOT. Polisensibilizada y en tratamiento con Omalizumab, estable desde 2023. Sometida a resección VATS por linfangioma mediastínico. Se realizó bloqueo erector de la espina y paravertebral. Extubada en quirófano sin incidencias y trasladada a UCIN.",
    "plan": "Control postoperatorio en UCIN. Vigilancia estrecha de la función respiratoria dada su historia de asma grave. Monitoreo de posibles reacciones alérgicas. Mantener diuresis conservada.",
    "sistemas": {
      "neurologico": "Extubación en quirófano sin incidencias. Consciente y orientada pre-inducción.",
      "hemodinamico": "Estable. TA: 135/64 mmHg. FC: 85 lpm en RS. SpO2: 99% con aire ambiente (pre-inducción).",
      "respiratorio": "Extubación en quirófano sin incidencias. IOT con TET nº 39Fr doble luz. Antecedente de asma bronquial con crisis graves.",
      "renal": "Diuresis espontánea conservada > 0.5mL/Kg/h intraoperatoria.",
      "digestivo": "No información específica en la nota.",
      "infeccioso": "Profilaxis antibiótica con Cefazolina 2g (considerando alergia a penicilinas).",
      "coagulacion": "No información específica en la nota."
    }
  },
  {
    "id": "ucin-3",
    "numero_cama": "3",
    "unidad": "UCIN",
    "estado": "Sin paciente",
    "edad": "?",
    "sexo": "?",
    "dias_estancia": "?",
    "antecedentes": "Sin paciente asignado a esta cama.",
    "plan": "No aplica.",
    "sistemas": {}
  },
  {
    "id": "ucin-4",
    "numero_cama": "4",
    "unidad": "UCIN",
    "estado": "Crítico",
    "edad": "55",
    "sexo": "M",
    "dias_estancia": "1",
    "antecedentes": "Mujer de 55 años con antecedentes de Poliposis Adenomatosa Familiar (PAF), adenocarcinoma de colon (hemicolectomía derecha), proctocolectomía total con ileostomía terminal, reintervención por perforación intestinal y complicación con fístula enterocutánea de bajo grado y abdomen hostil. Sometida a resección intestinal y eventroplastia por fístulas enteroatmosféricas. Actualmente dependiente de aminas a dosis bajas, con dolor controlado con catéter epidural.",
    "plan": "Mantener control del dolor con catéter epidural. Continuar con manejo hemodinámico con noradrenalina a dosis bajas, con objetivo de disminuir si TAM > 65 mmHg y valorar transfusión de CH si Hb < 7 g/dl. Control de coagulación y plaquetas. Vigilancia respiratoria con gasometría. Control estricto de función renal e iones. Tratamiento antibiótico con Augmentine. Vigilancia postquirúrgica abdominal, drenajes y enzimas hepáticas. Mantenimiento con NPT y control de glucemias.",
    "sistemas": {
      "neurologico": "Consciente, orientada y colaboradora, sin focalidad neurológica. RASS 0. Dolor controlado con catéter epidural.",
      "hemodinamico": "Precisa de NA a dosis bajas desde el quirófano. TA 90/60 mmHg. FC: 75 l/min, en RS. AC: tonos rítmicos, sin soplos ni roces. Hgb: 7.2 g/dl (pendiente de control).",
      "respiratorio": "Eupneica con Gn. GV: pH 7.34, pCO2: 45 mmHg, pO2: 25 mmHg, HCO3: 24.3 mmol/l, láctico: 1.4 mmol/l. AP: murmullo vesicular conservado. Rx Tórax: sin infiltrados.",
      "renal": "Urea: 40 mg/dl, Creatinina: 0.67 mg/dl. Diuresis > 1 ml/ Kg/h ayer. Balance negativo de 688 cc ayer. Iones: Sodio: 137 meq/l, Potasio: 4.1 meq/l, Magnesio: 2 mg/dl, Calcio-albumina: 9 mg/dl, fosfato: 2.4 mg/dl.",
      "digestivo": "Abdomen blando y depresible, sin masas ni visceromegalias, peristaltismo disminuido. Drenajes Penrose con débito serohemático de 235 cc. GOT: 85 UI/l, GPT: 231 UI/L. NPT. Glucemia alrededor de 145 mg/dl (insulina). Proteínas totales: 4.2 g/dl.",
      "infeccioso": "Afebril. Leucocitos: 5590/mm3, PCR 14 mg/dl. En tratamiento con augmentine.",
      "coagulacion": "Coagulación normal (INR 1.32, límite alto). Plaquetas 138.000."
    }
  },
  {
    "id": "ucin-5",
    "numero_cama": "5",
    "unidad": "UCIN",
    "estado": "Estable",
    "edad": "59",
    "sexo": "M",
    "dias_estancia": "1",
    "antecedentes": "Mujer de 59 años sometida a resección de secuestro pulmonar en LII. Trasladada a UCCQ en su primer día postoperatorio con enfisema subcutáneo como complicación. Consciente, orientada y hemodinámicamente estable sin necesidad de aminas.",
    "plan": "Vigilancia del enfisema subcutáneo y de la pO2 con control de gasometría arterial esta tarde. Valorar medidas por CTO para el manejo de la fuga y aumento de la aspiración de la campana. Controlar las transaminasas. Reponer calcio y fósforo. Iniciar tolerancia a dieta oral.",
    "sistemas": {
      "neurologico": "Consciente, orientada y colaboradora, sin focalidad neurológica. RASS: 0.",
      "hemodinamico": "Normotensa en RS 68 lpm y sin aminas. AC: tonos rítmicos, sin soplos ni roces. Hgb: 13.4 g/dl.",
      "respiratorio": "Eupneica con Gn. Enfisema subcutáneo en hemitórax izquierdo. GSA: pH: 7.33, pCO2: 46 mmHg, pO2: 64 mmHg. AP: murmullo vesicular conservado.",
      "renal": "Creatinina: 0.51 mg/dl. Diuresis > 1 ml/Kg/h ayer. Balance negativo de 248 cc ayer. Iones: Sodio: 138 meq/l, Potasio: 3.8 meq/l, Calcio-albumina: 8.3 mg/dl, fosfato: 2.1 mg/dl. Sin tratamiento diurético ni edemas.",
      "digestivo": "Abdomen blando y depresible, peristaltismo disminuido. GOT: 101 UI/l, GPT: 97 UI/L. Glucemia alrededor de 128 mg/dl. Proteínas totales: 5.8g/dl. Inicia tolerancia a dieta oral.",
      "infeccioso": "Afebril. Leucocitos: 9.980/mm3, PCR: 5.3 mg/dl.",
      "coagulacion": "Coagulación y plaquetas normales. Profilaxis con enoxaparina."
    }
  },
  {
    "id": "ucin-6",
    "numero_cama": "6",
    "unidad": "UCIN",
    "estado": "Estable",
    "edad": "76",
    "sexo": "M",
    "dias_estancia": "1",
    "antecedentes": "Mujer de 76 años con múltiples comorbilidades: HTA, Dislipemia, DM2, Hiperuricemia, Obesidad, Cirrosis hepática por NASH, SAOS (CPAP nocturna), ERCT en TRS con hemodiálisis. Antecedentes de neumonías y cirugías abdominales. Ingresa tras pleuroscopia por derrame pleural derecho. Extubada en quirófano sin incidencias y trasladada a UCIN.",
    "plan": "Control postoperatorio en UCIN. Vigilancia de la función respiratoria y manejo del derrame pleural. Monitoreo hemodinámico. Control de la profilaxis antibiótica. Mantener el tratamiento habitual de sus enfermedades crónicas y diálisis según pauta.",
    "sistemas": {
      "neurologico": "Extubación en quirófano sin incidencias. Consciente y orientada pre-inducción.",
      "hemodinamico": "Estable. TA: 155/74 mmHg. FC: 80 lpm en RS. SpO2: 97 % con aire ambiente (pre-inducción).",
      "respiratorio": "Extubación en quirófano sin incidencias. IOT con TET nº 37Fr doble luz. Pleuroscopia por derrame pleural derecho. AP: disminución del MV con sibilantes. Uso de BiPAP nocturna.",
      "renal": "Enfermedad Renal Crónica Terminal (ERCT) en Tratamiento Renal Sustitutivo (TRS) mediante Hemodiálisis M-J-S.",
      "digestivo": "Cirrosis hepática por NASH. Antecedente de pancreatitis aguda.",
      "infeccioso": "Profilaxis antibiótica con Cefazolina 2g.",
      "coagulacion": "No información específica en la nota."
    }
  }
];
    const PASSWORD_CORRECTA = "misbalare2720"; // La contraseña se inyecta aquí desde el script

    // --- COMPONENTE DE LOGIN ---
    const LoginScreen = ({ onLogin }) => {
      const [input, setInput] = useState("");
      const [error, setError] = useState(false);

      const handleSubmit = (e) => {
        e.preventDefault();
        // Convertimos a minúsculas para que no importe si escriben "UCI" o "uci"
        if (input.toLowerCase() === PASSWORD_CORRECTA.toLowerCase()) {
          onLogin();
        } else {
          setError(true);
          setInput("");
        }
      };

      return (
        <div className="min-h-screen flex items-center justify-center p-4">
          <div className="login-glass p-10 rounded-3xl shadow-2xl max-w-sm w-full text-center">
            <div className="mb-6 inline-flex p-4 bg-blue-600 rounded-2xl text-white shadow-lg shadow-blue-500/30">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="w-8 h-8"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect><path d="M7 11V7a5 5 0 0 1 10 0v4"></path></svg>
            </div>
            <h1 className="text-2xl font-black text-slate-800 mb-2">Acceso Restringido</h1>
            <p className="text-slate-500 text-sm mb-8 font-medium">Dashboard Clínico UCI Quirúrgica</p>
            
            <form onSubmit={handleSubmit} className="space-y-4">
              <input 
                type="password" 
                value={input}
                onChange={(e) => {setInput(e.target.value); setError(false);}}
                placeholder="Introduce la clave..."
                className="w-full px-5 py-3 rounded-xl bg-white/50 border border-slate-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 outline-none transition-all font-bold text-center text-slate-700 placeholder-slate-400"
                autoFocus
              />
              <button type="submit" className="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 rounded-xl shadow-lg shadow-blue-600/30 transition-all active:scale-95">
                Entrar
              </button>
            </form>
            {error && <p className="mt-4 text-red-500 text-xs font-bold animate-pulse">⛔ Clave incorrecta</p>}
          </div>
        </div>
      );
    };

    // --- ICONOS ---
    const Icons = {
      Brain: (p)=><svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z"/><path d="M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z"/></svg>,
      Wind: (p)=><svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M17.7 7.7a2.5 2.5 0 1 1 1.8 4.3H2"/><path d="M9.6 4.6A2 2 0 1 1 11 8H2"/><path d="M12.6 19.4A2 2 0 1 0 14 16H2"/></svg>,
      Heart: (p)=><svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M22 12h-4l-3 9L9 3l-3 9H2"/></svg>,
      Droplet: (p)=><svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M12 22a7 7 0 0 0 7-7c0-2-2-3-4-3l-3-3-3 3c-2 0-4 1-4 3a7 7 0 0 0 7 7z"/></svg>,
      Thermometer: (p)=><svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z"/></svg>,
      Stomach: (p)=><svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M19 20H5a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2Z"/><path d="M12 11h4"/><path d="M12 16h4"/><path d="M8 11h.01"/><path d="M8 16h.01"/></svg>,
      Bed: (p)=><svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M2 4v16"/><path d="M2 8h18a2 2 0 0 1 2 2v10"/><path d="M2 17h20"/><path d="M6 8v9"/></svg>,
      Alert: (p)=><svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/><line x1="12" y1="9" x2="12" y2="13"/><line x1="12" y1="17" x2="12.01" y2="17"/></svg>,
      Clipboard: (p)=><svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><rect width="8" height="4" x="8" y="2" rx="1" ry="1"/><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"/><path d="M12 11h4"/><path d="M12 16h4"/></svg>,
      User: (p)=><svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>,
      Logout: (p)=><svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/><polyline points="16 17 21 12 16 7"/><line x1="21" y1="12" x2="9" y2="12"/></svg>
    };
    const Icon = ({n, c}) => { const I = Icons[n]; return I ? <I className={c} /> : null; };

    // --- COMPONENTES UI DASHBOARD ---
    const BedCard = ({ data, onClick }) => {
      const isUCIN = data.unidad === 'UCIN';
      const colors = { 'Crítico': 'border-l-red-500 bg-red-100 text-red-700', 'Estable': 'border-l-emerald-500 bg-emerald-100 text-emerald-700', 'Alerta': 'border-l-amber-500 bg-amber-100 text-amber-700' };
      const status = colors[data.estado] || colors['Alerta'];
      const unitClass = isUCIN ? 'bg-purple-100 text-purple-700' : 'bg-blue-100 text-blue-700';
      return (
        <div onClick={() => onClick(data)} className={`relative glass-card rounded-xl shadow-sm hover:shadow-2xl hover:-translate-y-1 transition-all p-5 cursor-pointer border border-slate-200 border-l-4 ${status.split(' ')[0]}`}>
          <div className="flex justify-between items-start mb-2">
             <div className="flex items-center gap-3">
               <div className="bg-slate-50 p-2 rounded-lg text-slate-400"><Icon n="Bed" c="w-6 h-6"/></div>
               <div><h3 className="text-xl font-black text-slate-800 leading-none">Cama {data.numero_cama}</h3><span className={`text-[10px] font-black px-2 py-0.5 rounded uppercase ${unitClass}`}>{data.unidad}</span></div>
             </div>
             <span className={`px-2 py-1 rounded text-xs font-bold uppercase ${status.substring(status.indexOf(' ')+1)}`}>{data.estado}</span>
          </div>
          <div className="flex items-center gap-2 text-xs font-bold text-slate-500 mb-3 bg-slate-50 p-1.5 rounded-lg border border-slate-100">
             <span className="flex items-center gap-1"><Icon n="User" c="w-3 h-3"/> {data.edad} años</span><span className="text-slate-300">|</span><span>Día {data.dias_estancia}</span>
          </div>
          <div><p className="text-xs text-slate-400 font-bold uppercase">Paciente</p><p className="text-2xl font-black text-slate-700 truncate">{data.paciente_id}</p></div>
          {data.alertas && <div className="mt-3 flex items-center gap-2 text-red-600 bg-red-50 px-2 py-1 rounded"><Icon n="Alert" c="w-4 h-4 animate-pulse"/><span className="text-xs font-bold">ATENCIÓN</span></div>}
        </div>
      );
    };

    const Section = ({ i, t, txt, col }) => (
      <div className="bg-white/80 p-4 rounded-2xl border border-slate-100 shadow-sm backdrop-blur-sm">
        <div className="flex items-center gap-2 mb-2"><div className={`p-2 rounded-lg ${col}`}><Icon n={i} c="w-5 h-5"/></div><h4 className="text-xs font-bold text-slate-500 uppercase">{t}</h4></div>
        <p className="text-sm font-medium text-slate-700 pl-10 leading-relaxed">{txt || "Sin datos."}</p>
      </div>
    );

    const Modal = ({ p, onClose }) => {
      if(!p) return null;
      const isUCIN = p.unidad === 'UCIN';
      const headCol = isUCIN ? 'bg-purple-600' : 'bg-blue-600';
      return (
        <div className="fixed inset-0 modal-backdrop flex items-center justify-center p-4 z-50" onClick={onClose}>
          <div className="bg-slate-50 w-full max-w-6xl max-h-[95vh] overflow-y-auto rounded-3xl shadow-2xl" onClick={e=>e.stopPropagation()}>
            <div className="bg-white p-6 border-b border-slate-100 flex justify-between items-center sticky top-0 z-10 shadow-sm">
               <div className="flex items-center gap-4">
                 <div className={`h-14 w-14 ${headCol} rounded-xl flex items-center justify-center text-white font-black text-2xl shadow-md`}>{p.numero_cama}</div>
                 <div>
                    <h2 className="text-3xl font-black text-slate-800 tracking-tight">{p.paciente_id}</h2>
                    <div className="flex items-center gap-3 text-slate-500 font-bold text-sm mt-1">
                        <span className="bg-slate-100 px-2 py-0.5 rounded text-slate-600">{p.sexo}</span>
                        <span>{p.edad} años</span><span className="text-slate-300">•</span><span>Estancia: Día {p.dias_estancia}</span>
                    </div>
                 </div>
               </div>
               <button onClick={onClose} className="px-5 py-2.5 bg-slate-100 rounded-xl font-bold text-slate-600 hover:bg-slate-200 transition-colors">Esc Cerrar</button>
            </div>
            <div className="p-6 md:p-8 space-y-6">
               {p.antecedentes && p.antecedentes !== "?" && <div className="bg-slate-100/80 p-5 rounded-2xl border border-slate-200"><h3 className="text-xs font-black text-slate-400 uppercase tracking-widest mb-2">Antecedentes Personales (AP)</h3><p className="text-base font-medium text-slate-700 italic">{p.antecedentes}</p></div>}
               <div className={`p-1 rounded-2xl shadow-sm bg-gradient-to-r ${isUCIN ? 'from-purple-500 to-purple-400' : 'from-blue-500 to-blue-400'}`}><div className="bg-white p-5 rounded-xl"><div className="flex gap-2 mb-2 items-center text-slate-800"><Icon n="Clipboard" c="w-6 h-6"/><span className="font-black uppercase tracking-wide">Plan Terapéutico</span></div><p className="text-lg font-medium pl-8 leading-relaxed text-slate-800">{p.plan}</p></div></div>
               <div className="grid grid-cols-1 md:grid-cols-3 gap-5">
                 <Section i="Brain" t="Neurológico" txt={p.sistemas.neurologico} col="bg-indigo-100 text-indigo-600"/>
                 <Section i="Wind" t="Respiratorio" txt={p.sistemas.respiratorio} col="bg-sky-100 text-sky-600"/>
                 <Section i="Heart" t="Hemodinámico" txt={p.sistemas.hemodinamico} col="bg-rose-100 text-rose-600"/>
                 <Section i="Droplet" t="Renal" txt={p.sistemas.renal} col="bg-amber-100 text-amber-600"/>
                 <Section i="Thermometer" t="Infeccioso" txt={p.sistemas.infeccioso} col="bg-purple-100 text-purple-600"/>
                 <Section i="Stomach" t="Digestivo" txt={p.sistemas.digestivo} col="bg-lime-100 text-lime-600"/>
               </div>
            </div>
          </div>
        </div>
      );
    };

    // --- COMPONENTE PRINCIPAL (GESTIÓN DE SESIÓN) ---
    const App = () => {
      const [isLoggedIn, setIsLoggedIn] = useState(false);
      const [sel, setSel] = useState(null);

      // Al iniciar, miramos si ya estaba logueado en esta sesión para no pedir clave al recargar
      useEffect(() => {
        const session = sessionStorage.getItem("uci_auth");
        if (session === "true") setIsLoggedIn(true);
      }, []);

      const handleLoginSuccess = () => {
        setIsLoggedIn(true);
        sessionStorage.setItem("uci_auth", "true"); // Guarda la sesión mientras no cierren el navegador
      };
      
      const handleLogout = () => {
        setIsLoggedIn(false);
        setSel(null);
        sessionStorage.removeItem("uci_auth");
      };

      // Si no está logueado, mostramos SOLO la pantalla de Login
      if (!isLoggedIn) {
        return <LoginScreen onLogin={handleLoginSuccess} />;
      }

      // Si está logueado, mostramos el Dashboard normal
      const reas = PATIENTS.filter(p=>p.unidad==='REA');
      const ucins = PATIENTS.filter(p=>p.unidad==='UCIN');
      
      return (
        <div className="min-h-screen p-6 md:p-10 max-w-[1920px] mx-auto">
           <header className="mb-10 flex flex-col md:flex-row justify-between items-end gap-4">
              <div><h1 className="text-5xl font-black text-slate-800 tracking-tighter mb-2">UCI Quirúrgica <span className="text-blue-600">Dashboard</span></h1><p className="text-slate-500 font-medium">Vista clínica en tiempo real • REA + UCIN</p></div>
              <div className="flex gap-4 items-center">
                <div className="bg-white px-4 py-2 rounded-xl shadow-sm border border-slate-100 text-sm font-bold text-slate-400">Act: {new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})}</div>
                <button onClick={handleLogout} className="bg-red-50 hover:bg-red-100 text-red-600 p-2 rounded-xl transition-colors" title="Cerrar sesión"><Icon n="Logout" c="w-6 h-6"/></button>
              </div>
           </header>
           {reas.length>0 && <div className="mb-12"><h2 className="text-2xl font-black text-blue-900 mb-6 flex items-center gap-2"><span className="w-2 h-8 bg-blue-500 rounded-full"></span>REA</h2><div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5 gap-6">{reas.map(p=><BedCard key={p.id} data={p} onClick={setSel}/>)}</div></div>}
           {ucins.length>0 && <div><h2 className="text-2xl font-black text-purple-900 mb-6 flex items-center gap-2"><span className="w-2 h-8 bg-purple-500 rounded-full"></span>UCIN</h2><div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5 gap-6">{ucins.map(p=><BedCard key={p.id} data={p} onClick={setSel}/>)}</div></div>}
           {sel && <Modal p={sel} onClose={()=>setSel(null)}/>}
        </div>
      );
    };

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<App />);
  </script>
</body>
</html>